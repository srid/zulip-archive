<html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="I&#39;ve put together this package to decompose high level business problems into components by type applications and then fill in the blanks with simpler functions. I&#39;ve managed to simplify some of my own programs with it and so far I quite like the approach.
https://hackage.haskell.org/package/polysem" name="description"><link href="https://funprog.srid.ca/polysemy/polysemy-methodology.html" rel="canonical"><meta property="og:title" content="polysemy-methodology - Polysemy"><meta property="og:site_name" content="Functional Programming Zulip Archive"><meta property="og:type" content="article"><meta property="og:article:section" content="Polysemy"><meta property="og:article:modified_time" content="2020-10-31T07:36:10Z"><meta property="og:article:published_time" content="2020-10-29T15:41:25Z"><meta property="og:image" content="https://secure.gravatar.com/avatar/3f02fadd6146855b37247afc22b39685?d=identicon&amp;version=1"><title>polysemy-methodology - Polysemy</title><style type="text/css">
div#thesite
{
  font-family   : "Open Sans", sans-serif;
  font-size     : 1em !important;
  margin-top    : 1em;
  margin-bottom : 1em;
}

div#thesite h1
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h2
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h3
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h4
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h5
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h6
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .ui.breadcrumb.rib .section
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .as-header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite code, pre, tt
{
  font-family : "SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace;
}

div#thesite .ui.breadcrumb.rib
{
  margin-bottom : 1em;
}



div#thesite .ui.comments.messages .comment .metadata a
{
  color : #808080;
}

div#thesite .ui.comments.messages .comment a.avatar img
{
  height : auto;
}

div#thesite .subtle
{
  color : #808080;
}


div#thesite .messages pre
{
  font-size : 85%;
  overflow  : auto;
  max-width : 100%;
}

div#thesite .messages .message_embed
{
  border-left  : solid 3px #808080;
  padding-left : 0.69999em;
}

div#thesite .messages .message_inline_image img
{
  max-width     : 100%;
  margin-bottom : 1em;
}


/* Generated with Clay, http://fvisser.nl/clay */</style><link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Open+Sans|Oswald&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto|Open+Sans&amp;display=swap" rel="stylesheet"></head><body><div id="thesite" class="ui text container"><div class="ui violet inverted top attached center aligned segment"><h1 class="ui huge header">polysemy-methodology - Polysemy</h1></div><div class="ui attached segment"><div class="ui message"><p>Welcome to the Functional Programming Zulip Chat Archive. You can join the chat <a href="https://funprog.zulipchat.com">here</a>.</p></div><div class="ui breadcrumb rib"><a href="/" class="section">Home</a><i class="right angle icon divider"></i><a href="/polysemy/" class="section">#Polysemy</a><i class="right angle icon divider"></i><div class="active section">polysemy-methodology</div></div><div class="ui comments messages"><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3f02fadd6146855b37247afc22b39685?d=identicon&amp;version=1"></a><div class="content"><a class="author">locallycompact</a><div class="metadata"><a href="#214985180" name="214985180"><div>2020-10-29 15:41:25</div></a></div><div class="text"><p>I've put together this package to decompose high level business problems into components by type applications and then fill in the blanks with simpler functions. I've managed to simplify some of my own programs with it and so far I quite like the approach.</p>
<p><a href="https://hackage.haskell.org/package/polysemy-methodology">https://hackage.haskell.org/package/polysemy-methodology</a></p>
<p>I'd love to get the thoughts of the polysemy devs on any improvements that might make sense here.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#214986301" name="214986301"><div>2020-10-29 15:48:57</div></a></div><div class="text"><p>I think an example of this</p>
<div class="codehilite"><pre><span></span><code>This allows you to work up a solution to a domain problem backwards, by running
the program you intend to solve directly and using holes to guide the
requirements.
</code></pre></div>


<p>would be nice</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#214986377" name="214986377"><div>2020-10-29 15:49:39</div></a></div><div class="text"><p>very interesting, but some examples are definitely in order <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#214986417" name="214986417"><div>2020-10-29 15:49:55</div></a></div><div class="text"><p>how is the function in the readme of type <code>* -&gt; Constraint</code>?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3f02fadd6146855b37247afc22b39685?d=identicon&amp;version=1"></a><div class="content"><a class="author">locallycompact</a><div class="metadata"><a href="#214990125" name="214990125"><div>2020-10-29 16:12:52</div></a></div><div class="text"><p>My README is wrong, sec. I'll fix that and write up an example.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3f02fadd6146855b37247afc22b39685?d=identicon&amp;version=1"></a><div class="content"><a class="author">locallycompact</a><div class="metadata"><a href="#215004070" name="215004070"><div>2020-10-29 17:51:53</div></a></div><div class="text"><p>Ok there's more readme now.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#215004457" name="215004457"><div>2020-10-29 17:54:25</div></a></div><div class="text"><p>you forgot something at <code>A CollectionsPackage indicates.</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#215004584" name="215004584"><div>2020-10-29 17:55:17</div></a></div><div class="text"><p>btw you don't have to release a new version to update the docs!</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3f02fadd6146855b37247afc22b39685?d=identicon&amp;version=1"></a><div class="content"><a class="author">locallycompact</a><div class="metadata"><a href="#215005147" name="215005147"><div>2020-10-29 17:59:33</div></a></div><div class="text"><p>Oh, I didn't know that. :)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#215005172" name="215005172"><div>2020-10-29 17:59:44</div></a></div><div class="text"><p>yeah, I should work with <code>cabal publishDoc</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3f02fadd6146855b37247afc22b39685?d=identicon&amp;version=1"></a><div class="content"><a class="author">locallycompact</a><div class="metadata"><a href="#215005432" name="215005432"><div>2020-10-29 18:01:59</div></a></div><div class="text"><p>Thanks</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#215006841" name="215006841"><div>2020-10-29 18:13:13</div></a></div><div class="text"><p>very nice! it has a sort of stream transducer feeling to it.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3f02fadd6146855b37247afc22b39685?d=identicon&amp;version=1"></a><div class="content"><a class="author">locallycompact</a><div class="metadata"><a href="#215007083" name="215007083"><div>2020-10-29 18:14:45</div></a></div><div class="text"><p>Thanks I don't know what that is but it's going on my list</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#215007287" name="215007287"><div>2020-10-29 18:16:10</div></a></div><div class="text"><p>something like conduit, streaming, streamly</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#215007334" name="215007334"><div>2020-10-29 18:16:34</div></a></div><div class="text"><p>wonder how this would look with a <code>Stream</code> as the final monad</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#215007643" name="215007643"><div>2020-10-29 18:19:07</div></a></div><div class="text"><p>do you mean to have a Stream of interpreters?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#215007672" name="215007672"><div>2020-10-29 18:19:20</div></a></div><div class="text"><p>though only conduit would be considered to have transducer semantics, right?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#215007684" name="215007684"><div>2020-10-29 18:19:29</div></a></div><div class="text"><p>no, stream of <code>Input</code>/<code>Output</code> values</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#215007847" name="215007847"><div>2020-10-29 18:20:34</div></a></div><div class="text"><p>I think this is really cool btw, it takes something that is "a software engineering practice" and reifies it into a language construction!</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#215007908" name="215007908"><div>2020-10-29 18:21:05</div></a></div><div class="text"><p>this is how you sell polysemy to your product owner</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3f02fadd6146855b37247afc22b39685?d=identicon&amp;version=1"></a><div class="content"><a class="author">locallycompact</a><div class="metadata"><a href="#215008122" name="215008122"><div>2020-10-29 18:22:30</div></a></div><div class="text"><p>Tyvm</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#215008429" name="215008429"><div>2020-10-29 18:24:38</div></a></div><div class="text"><p>btw, I'm sure you intend to "fix" some of these, but I think it would help for the example to have as little non-library related code in it (e.g. no optics/dhall/etc), and more importantly for the library to <em>not</em> depend on <code>polysemy-zoo</code> (it's heavy!)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#215008550" name="215008550"><div>2020-10-29 18:25:42</div></a></div><div class="text"><p>probably better to copy the KVStore into the project</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3f02fadd6146855b37247afc22b39685?d=identicon&amp;version=1"></a><div class="content"><a class="author">locallycompact</a><div class="metadata"><a href="#215008728" name="215008728"><div>2020-10-29 18:27:11</div></a></div><div class="text"><p>Yeah I'll try and think of something neater as an example. Why is KVStore not in the main library? I use it a lot.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#215008759" name="215008759"><div>2020-10-29 18:27:29</div></a></div><div class="text"><p>good question!</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3f02fadd6146855b37247afc22b39685?d=identicon&amp;version=1"></a><div class="content"><a class="author">locallycompact</a><div class="metadata"><a href="#215008769" name="215008769"><div>2020-10-29 18:27:35</div></a></div><div class="text"><p>I also use KVStore (Path Rel File) ByteString as a filesystem.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#215008904" name="215008904"><div>2020-10-29 18:28:35</div></a></div><div class="text"><p>good point, I've reimplemented that, should use KVStore!</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#215009018" name="215009018"><div>2020-10-29 18:29:26</div></a></div><div class="text"><p>if you'd make a PR puling KVStore into polysemy, I'm sure it would be welcome!</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3f02fadd6146855b37247afc22b39685?d=identicon&amp;version=1"></a><div class="content"><a class="author">locallycompact</a><div class="metadata"><a href="#215009080" name="215009080"><div>2020-10-29 18:29:56</div></a></div><div class="text"><p>cool, I will</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3f02fadd6146855b37247afc22b39685?d=identicon&amp;version=1"></a><div class="content"><a class="author">locallycompact</a><div class="metadata"><a href="#215009253" name="215009253"><div>2020-10-29 18:31:21</div></a></div><div class="text"><p>ah, also the HList type is from the zoo as well, although that's kind of fine to reimplement I think</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3f02fadd6146855b37247afc22b39685?d=identicon&amp;version=1"></a><div class="content"><a class="author">locallycompact</a><div class="metadata"><a href="#215179201" name="215179201"><div>2020-10-31 07:36:10</div></a></div><div class="text"><p>Added the ability to intercept the start and end of each submethodology to do bracketed tracing. <a href="https://hackage.haskell.org/package/polysemy-methodology">https://hackage.haskell.org/package/polysemy-methodology</a></p></div></div></div></div></div><div class="ui vertical footer segment"><a href="https://github.com/srid/zulip-archive">Powered by Haskell</a> | Questions? Contact <a href="https://www.srid.ca">srid</a></div></div></body></html>