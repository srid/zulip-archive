<html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="This is being extremely fun. Might switch from Control.Monad.Free to polysemy soon, but the code so
 far is not too complicated. The goal here is to just build data structures. So interpreters will be mostly pure, without IO. pasted image  cf. https://www.srid.ca/tidbits/dhall-toml-free-monad.html
T" name="description"><link href="https://funprog.srid.ca/polysemy/free-monad-dsl-to-construct-datastructures.html" rel="canonical"><meta property="og:title" content="Free monad DSL to construct datastructures - Polysemy"><meta property="og:site_name" content="Functional Programming Zulip Archive"><meta property="og:type" content="article"><meta property="og:article:section" content="Polysemy"><meta property="og:article:modified_time" content="2020-01-20T16:59:45Z"><meta property="og:article:published_time" content="2020-01-20T16:07:48Z"><meta property="og:image" content="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"><title>Free monad DSL to construct datastructures - Polysemy</title><style type="text/css">
div#thesite
{
  font-family   : "Open Sans", sans-serif;
  font-size     : 1em !important;
  margin-top    : 1em;
  margin-bottom : 1em;
}

div#thesite h1
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h2
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h3
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h4
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h5
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h6
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .ui.breadcrumb.rib .section
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .as-header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite code, pre, tt
{
  font-family : "SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace;
}

div#thesite .ui.breadcrumb.rib
{
  margin-bottom : 1em;
}



div#thesite .ui.comments.messages .comment .metadata a
{
  color : #808080;
}

div#thesite .ui.comments.messages .comment a.avatar img
{
  height : auto;
}

div#thesite .subtle
{
  color : #808080;
}


div#thesite .messages pre
{
  font-size : 85%;
  overflow  : auto;
  max-width : 100%;
}

div#thesite .messages .message_embed
{
  border-left  : solid 3px #808080;
  padding-left : 0.69999em;
}

div#thesite .messages .message_inline_image img
{
  max-width     : 100%;
  margin-bottom : 1em;
}


/* Generated with Clay, http://fvisser.nl/clay */</style><link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Open+Sans|Oswald&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto|Open+Sans&amp;display=swap" rel="stylesheet"></head><body><div id="thesite" class="ui text container"><div class="ui violet inverted top attached center aligned segment"><h1 class="ui huge header">Free monad DSL to construct datastructures - Polysemy</h1></div><div class="ui attached segment"><div class="ui message"><p>Welcome to the Functional Programming Zulip Chat Archive. You can join the chat <a href="https://funprog.zulipchat.com">here</a>.</p></div><div class="ui breadcrumb rib"><a href="/" class="section">Home</a><i class="right angle icon divider"></i><a href="/polysemy/" class="section">#Polysemy</a><i class="right angle icon divider"></i><div class="active section">Free monad DSL to construct datastructures</div></div><div class="ui comments messages"><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#186114202" name="186114202"><div>2020-01-20 16:07:48</div></a></div><div class="text"><p>This is being extremely fun. Might switch from Control.Monad.Free to polysemy soon, but the code so<br>
 far is not too complicated. The goal here is to just build data structures. So interpreters will be mostly pure, without IO. <a href="/user_uploads/13896/j76UrFq9sWLKJP2alNF4X3tr/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a>  cf. <a href="https://www.srid.ca/tidbits/dhall-toml-free-monad.html" target="_blank" title="https://www.srid.ca/tidbits/dhall-toml-free-monad.html">https://www.srid.ca/tidbits/dhall-toml-free-monad.html</a></p>
<div class="message_inline_image"><a href="/user_uploads/13896/j76UrFq9sWLKJP2alNF4X3tr/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/13896/j76UrFq9sWLKJP2alNF4X3tr/pasted_image.png"></a></div><div class="message_embed"><a class="message_embed_image" href="https://www.srid.ca/tidbits/dhall-toml-free-monad.html" style="background-image: url(https://srid.keybase.pub/me.jpeg)" target="_blank"></a><div class="data-container"><div class="message_embed_title"><a href="https://www.srid.ca/tidbits/dhall-toml-free-monad.html" target="_blank" title="Tidbit: From Dhall to TOML to Free Monad - Sridhar Ratnakumar">Tidbit: From Dhall to TOML to Free Monad - Sridhar Ratnakumar</a></div><div class="message_embed_description">Home page of Sridhar Ratnakumar</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?x=x&amp;version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#186117928" name="186117928"><div>2020-01-20 16:52:28</div></a></div><div class="text"><p><span class="user-mention" data-user-id="251311">@Sridhar Ratnakumar</span> Why was <code>dhall</code> problematic?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#186118139" name="186118139"><div>2020-01-20 16:55:22</div></a></div><div class="text"><p>From the post,</p>
<blockquote>
<p>The main problem with Dhall is ergonomics. I found myself to be no fan of meticulously writing syntax when all I want to do is add a link to my site. The other pain point was having to keep the Haskell type definition in sync with the Dhall type</p>
</blockquote>
<p>I just find the free monad use to be more ergonomic. As shown in the screenshot, I can introduce a let binding in the middle of the data and then use it. Can't do this in Dhall.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?x=x&amp;version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#186118221" name="186118221"><div>2020-01-20 16:56:08</div></a></div><div class="text"><p>Oh, right, thanks!</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#186118259" name="186118259"><div>2020-01-20 16:56:37</div></a></div><div class="text"><p>My conclusion: dhall is for configuration, not data.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?x=x&amp;version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#186118284" name="186118284"><div>2020-01-20 16:57:13</div></a></div><div class="text"><p>Configuration is sort of data too - I guess "non-repetitive data"</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#186118461" name="186118461"><div>2020-01-20 16:59:45</div></a></div><div class="text"><p>Both are structured, in my mind configuration is generally "small" compared to data that grows over time.</p></div></div></div></div></div><div class="ui vertical footer segment"><a href="https://github.com/srid/zulip-archive">Powered by Haskell</a> | Questions? Contact <a href="https://www.srid.ca">srid</a></div></div></body></html>