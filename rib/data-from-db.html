<html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="Is it possible to wire-up Rib in a way such that the data for the static site from from Postgres tables? How would the build process figure out what has changed, and what hasn&#39;t? Will it end-up re-building the entire site every time?" name="description"><link href="https://funprog.srid.ca/rib/data-from-db.html" rel="canonical"><meta property="og:title" content="Data from DB? - Rib"><meta property="og:site_name" content="Functional Programming Zulip Archive"><meta property="og:type" content="article"><meta property="og:article:section" content="Rib"><meta property="og:article:modified_time" content="2020-06-17T21:53:14Z"><meta property="og:article:published_time" content="2020-06-17T09:51:44Z"><title>Data from DB? - Rib</title><style type="text/css">
div#thesite
{
  font-family   : "Open Sans", sans-serif;
  font-size     : 1em !important;
  margin-top    : 1em;
  margin-bottom : 1em;
}

div#thesite h1
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h2
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h3
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h4
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h5
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h6
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .ui.breadcrumb.rib .section
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .as-header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite code, pre, tt
{
  font-family : "SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace;
}

div#thesite .ui.breadcrumb.rib
{
  margin-bottom : 1em;
}



div#thesite .ui.comments.messages .comment .metadata a
{
  color : #808080;
}

div#thesite .ui.comments.messages .comment a.avatar img
{
  height : auto;
}

div#thesite .subtle
{
  color : #808080;
}


div#thesite .messages pre
{
  font-size : 85%;
  overflow  : auto;
  max-width : 100%;
}

div#thesite .messages .message_embed
{
  border-left  : solid 3px #808080;
  padding-left : 0.69999em;
}

div#thesite .messages .message_inline_image img
{
  max-width     : 100%;
  margin-bottom : 1em;
}


/* Generated with Clay, http://fvisser.nl/clay */</style><link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Open+Sans|Oswald&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto|Open+Sans&amp;display=swap" rel="stylesheet"></head><body><div id="thesite" class="ui text container"><div class="ui violet inverted top attached center aligned segment"><h1 class="ui huge header">Data from DB? - Rib</h1></div><div class="ui attached segment"><div class="ui message"><p>Welcome to the Functional Programming Zulip Chat Archive. You can join the chat <a href="https://funprog.zulipchat.com">here</a>.</p></div><div class="ui breadcrumb rib"><a href="/" class="section">Home</a><i class="right angle icon divider"></i><a href="/rib/" class="section">#Rib</a><i class="right angle icon divider"></i><div class="active section">Data from DB?</div></div><div class="ui comments messages"><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201120528" name="201120528"><div>2020-06-17 09:51:44</div></a></div><div class="text"><p>Is it possible to wire-up Rib in a way such that the data for the static site from from Postgres tables? How would the build process figure out what has changed, and what hasn't? Will it end-up re-building the entire site every time?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201148169" name="201148169"><div>2020-06-17 14:25:35</div></a></div><div class="text"><p><span class="user-mention" data-user-id="312422">@Saurabh Nanda</span> I saw your question on the Slick tracker, and was wondering what you were planning to build. Could you explain the original goal?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201148200" name="201148200"><div>2020-06-17 14:25:51</div></a></div><div class="text"><p>Are you for example trying to create static blog but with comments backed on postgres, and you want to render the comments as well statically?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201198302" name="201198302"><div>2020-06-17 20:47:25</div></a></div><div class="text"><p>Speeding up a traditional CMS-powered website by pre-generating pages that change infrequently.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201198469" name="201198469"><div>2020-06-17 20:49:05</div></a></div><div class="text"><p>Both rib and slick use Shake -- in particular <code>Shake.Forward</code> -- as its build engine. So your question is more geared towards Shake itself I think. </p>
<p>Shake is conceptually like Makefile, but defined as a DSL in Haskell.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201198536" name="201198536"><div>2020-06-17 20:49:47</div></a></div><div class="text"><p>When using rib, you normally call Shake's <code>readFile'</code> which automatically makes that file as a dependency for the current target, so when that file changes, the target is rebuilt.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201198560" name="201198560"><div>2020-06-17 20:50:00</div></a></div><div class="text"><p>You would probably build a combinator like that, but using database instead of the filesystem as the source.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201198661" name="201198661"><div>2020-06-17 20:50:21</div></a></div><div class="text"><p>Maybe one could do something really interesting using postgres's LISTEN/ NOTIFY mechanism?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201202246" name="201202246"><div>2020-06-17 21:21:33</div></a></div><div class="text"><p>hmm interesting. looked at <code>rattle</code>, which is probably the inspiration for <code>Shake.Forward</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201202366" name="201202366"><div>2020-06-17 21:22:33</div></a></div><div class="text"><p>would you know how something like <code>Shake.Forward</code> works if it reads a file listing from a directory (as input), and then the new files are added to the directory? will it be able to detect the change, and re-run  the build commands?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201202391" name="201202391"><div>2020-06-17 21:22:46</div></a></div><div class="text"><p>and isn't that  something that <code>rib</code> has to contend with?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201202421" name="201202421"><div>2020-06-17 21:23:07</div></a></div><div class="text"><p>Shake doesn't "monitor" filesystem changes like that. Which is why rib uses <code>fsnotify</code>.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201202460" name="201202460"><div>2020-06-17 21:23:26</div></a></div><div class="text"><p>re: <code>rattle</code> - interesting! never come across it before; it is from the same author, and is being actively developed.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201202573" name="201202573"><div>2020-06-17 21:24:13</div></a></div><div class="text"><p>so IIUC, if your build process reads 3 known files, then <code>Shake.Forward</code> will automagically mark them as deps. But if after that a 4th file is added as a dep, shake won't rebuild?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201202636" name="201202636"><div>2020-06-17 21:24:57</div></a></div><div class="text"><p><code>rib</code> uses <code>fsnotify</code> directly, or via ghcid?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201202664" name="201202664"><div>2020-06-17 21:25:14</div></a></div><div class="text"><p>Right, as long as you use something like <a href="https://hackage.haskell.org/package/shake-0.19.1/docs/Development-Shake-Forward.html#v:cacheActionWith"><code>cacheActionWith</code></a> in your "forward" rules.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201202710" name="201202710"><div>2020-06-17 21:25:46</div></a></div><div class="text"><p>rib uses fsnotify directly; but ghcid also helps with the scenario of Haskell sources changing (which should do a rebuild, because HTML/CSS in the Haskell DSL may have changed)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201202718" name="201202718"><div>2020-06-17 21:25:53</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="251311">Sridhar Ratnakumar</span> <a href="#narrow/stream/218047-Rib/topic/Data.20from.20DB.3F/near/201202664">said</a>:</p>
<blockquote>
<p>Right, as long as you use something like <a href="https://hackage.haskell.org/package/shake-0.19.1/docs/Development-Shake-Forward.html#v:cacheActionWith"><code>cacheActionWith</code></a> in your "forward" rules.</p>
</blockquote>
<p>didn't understand this statement. what will happen as long as you use <code>cacheActionWith</code>?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201202769" name="201202769"><div>2020-06-17 21:26:06</div></a></div><div class="text"><p>this "But if after that a 4th file is added as a dep, shake won't rebuild?"</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201202785" name="201202785"><div>2020-06-17 21:26:23</div></a></div><div class="text"><p>cacheActionWith prevents those rebuilds.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201202884" name="201202884"><div>2020-06-17 21:27:32</div></a></div><div class="text"><p>so, <code>shake.forward</code> will normally figure out  a newly added dependency, or one is forced to use <code>cacheActionWith</code> to teach shake how to figure out dependencies? And if the case is latter, then doesn't it become a backward build system all over again?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201202991" name="201202991"><div>2020-06-17 21:28:13</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="251311">Sridhar Ratnakumar</span> <a href="#narrow/stream/218047-Rib/topic/Data.20from.20DB.3F/near/201202785">said</a>:</p>
<blockquote>
<p>cacheActionWith prevents those rebuilds.</p>
</blockquote>
<p>but I'm <strong>expecting</strong> to shake to rebuild, but can't figure out how shake would come to know of a 4th new dependency.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201203089" name="201203089"><div>2020-06-17 21:29:08</div></a></div><div class="text"><p>say, for example, a YAML file contains a list of 3 markdown files that need to be compiled. when the build command is run, <code>Shake.Forward</code> will track one YAML file + 3 files that are read after reading the YAML file, as deps, right?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201203271" name="201203271"><div>2020-06-17 21:30:17</div></a></div><div class="text"><p>how does shake know that the 3 files that are being read, are a result of the contents of the first YAML file?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201203279" name="201203279"><div>2020-06-17 21:30:21</div></a></div><div class="text"><p>If you use Shake's <a href="https://github.com/srid/rib/blob/master/src/Rib/Shake.hs#L72"><code>getDirectoryFiles</code></a> - then it tracks them. Otherwise you will have to call the [<code>need</code>] function manually, which explicitly tells shake to track the argument as dep.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/rib/blob/master/src/Rib/Shake.hs#L72" style="background-image: url(https://avatars2.githubusercontent.com/u/3998?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/rib/blob/master/src/Rib/Shake.hs#L72" title="srid/rib">srid/rib</a></div><div class="message_embed_description">Haskell static site generator based on Shake, with a delightful development experience. - srid/rib</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201203315" name="201203315"><div>2020-06-17 21:30:49</div></a></div><div class="text"><p>That's what the Dhall parser does (call <code>need</code> explicitly): <a href="https://github.com/srid/rib/blob/master/src/Rib/Parser/Dhall.hs#L33">https://github.com/srid/rib/blob/master/src/Rib/Parser/Dhall.hs#L33</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/rib/blob/master/src/Rib/Parser/Dhall.hs#L33" style="background-image: url(https://avatars2.githubusercontent.com/u/3998?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/rib/blob/master/src/Rib/Parser/Dhall.hs#L33" title="srid/rib">srid/rib</a></div><div class="message_embed_description">Haskell static site generator based on Shake, with a delightful development experience. - srid/rib</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201203361" name="201203361"><div>2020-06-17 21:31:13</div></a></div><div class="text"><p>which basically means that <code>shake.forward</code> is very brittle, (explicity marked as experimental in the docs)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201203387" name="201203387"><div>2020-06-17 21:31:28</div></a></div><div class="text"><p>Not the ideal build system, yea.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201203413" name="201203413"><div>2020-06-17 21:31:43</div></a></div><div class="text"><p>is <code>shake.forward</code> core to <code>rib</code> ?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201203420" name="201203420"><div>2020-06-17 21:31:47</div></a></div><div class="text"><p>Just taking a step back, and thinking about this problem in a more general fashion: I'd like to explore the FRP model for tracking changes and building 'final values' like we do in a static site.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201203497" name="201203497"><div>2020-06-17 21:32:18</div></a></div><div class="text"><p>I was thinking of FRP, but stumbled across <code>slim</code> and <code>rib</code> and wanted to evaluate this space first.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201203507" name="201203507"><div>2020-06-17 21:32:27</div></a></div><div class="text"><blockquote>
<p>Saurabh Nanda: is shake.forward core to rib ?</p>
</blockquote>
<p>yes</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201203553" name="201203553"><div>2020-06-17 21:33:07</div></a></div><div class="text"><p>and <code>shake.forward</code> is not going to work its magic with the DB obviously</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201203561" name="201203561"><div>2020-06-17 21:33:13</div></a></div><div class="text"><p>Is this a projet you have taken to work against an existing CMS? Or an in-house system? Or do you have the flexibility to design this system from the ground up? Who are going to be its target users?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201203670" name="201203670"><div>2020-06-17 21:34:16</div></a></div><div class="text"><p>have the flexibility to design ground-up</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201203675" name="201203675"><div>2020-06-17 21:34:21</div></a></div><div class="text"><p>The Postgres LISTEN/NOTIFY mechanism is used in obelisk apps to get postgres notifications to the frontend's FRP network. Basically what I do in my app <a href="http://www.cerveau.app/">http://www.cerveau.app/</a> (which is the web app version of neuron)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201203718" name="201203718"><div>2020-06-17 21:34:54</div></a></div><div class="text"><p>what happens if a notification is missed?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201203717" name="201203717"><div>2020-06-17 21:34:54</div></a></div><div class="text"><p>it's part of rhyolite that nobody outside of obsidian really uses haha, but it is pretty cool tech: <a href="https://www.srid.ca/2012401.html">https://www.srid.ca/2012401.html</a></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201203779" name="201203779"><div>2020-06-17 21:35:38</div></a></div><div class="text"><p>well, if you refresh the page, it is going to query the initial data anyway (which does a normal sql query), and from that point in your "single page app" data will come in automatically (no need to refresh).</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201203855" name="201203855"><div>2020-06-17 21:36:10</div></a></div><div class="text"><p>consider a server side static-website system. what happens if the template itself changes, and the site needs to be re-generated? will the ENTIRE site need to be re-generated?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201203863" name="201203863"><div>2020-06-17 21:36:16</div></a></div><div class="text"><blockquote>
<p>have the flexibility to design ground-up</p>
</blockquote>
<p>Why a statically generated site? Instead of a SPA one like <a href="https://reflex-frp.org/">https://reflex-frp.org/</a> ?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201203916" name="201203916"><div>2020-06-17 21:36:51</div></a></div><div class="text"><p>(a) the content is mostly static,  (b) SEO, (c) Google PageSpeed</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201203956" name="201203956"><div>2020-06-17 21:37:12</div></a></div><div class="text"><blockquote>
<p>consider a server side static-website system. what happens if the template itself changes, and the site needs to be re-generated? will the ENTIRE site need to be re-generated?</p>
</blockquote>
<p>If template changes, yes. What's wrong with that?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201204122" name="201204122"><div>2020-06-17 21:38:39</div></a></div><div class="text"><p>as in, site uses multiple templates, and one template changes which probably affect 10% of the pages, will the entire site be rebuilt?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201204135" name="201204135"><div>2020-06-17 21:38:52</div></a></div><div class="text"><p>SEO is important. This zulip's archive is over at <a href="https://funprog.srid.ca/">https://funprog.srid.ca/</a> - it is generated using rib, but the "input data" is not local files; rather dynamically read from zulip API (though an intermediary json file is used to trigger Shake)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201204201" name="201204201"><div>2020-06-17 21:39:42</div></a></div><div class="text"><blockquote>
<p>as in, site uses multiple templates, and one template changes which probably affect 10% of the pages, will the entire site be rebuilt?</p>
</blockquote>
<p>Only those affected should be rebuilt.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201204285" name="201204285"><div>2020-06-17 21:40:16</div></a></div><div class="text"><p>If there is no obvious dependency link, you'll have to render them anyway to be able to tell what those 10% are (just not write the 90% to disk)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201204340" name="201204340"><div>2020-06-17 21:41:10</div></a></div><div class="text"><p>wrt <code>rib</code> what would be the best way to pull data from the DB?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201204455" name="201204455"><div>2020-06-17 21:42:15</div></a></div><div class="text"><p>You would only be using the nix/ghcid part of rib in that case (not shake/fsnotify). And do all the plumbing yourself. Unless you do a trick like <a href="http://funprog.srid.ca">funprog.srid.ca</a> does (i.e., write intermediary files)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201204545" name="201204545"><div>2020-06-17 21:43:39</div></a></div><div class="text"><p>so, getting data to a file is necessary for the magic to start</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201204683" name="201204683"><div>2020-06-17 21:44:53</div></a></div><div class="text"><p>that's one approach, yes. another is to design from scratch, preferably using a FRP model? the latter might be too research-y.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201204748" name="201204748"><div>2020-06-17 21:45:42</div></a></div><div class="text"><p>let me keep abreast of your findings either way! i'm interested in this problem as well.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201204809" name="201204809"><div>2020-06-17 21:46:06</div></a></div><div class="text"><p>everytime I think about FRP, I can't figure out how it would work if the state is sitting outside the FRP system (the DB, in this case)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201204844" name="201204844"><div>2020-06-17 21:46:35</div></a></div><div class="text"><p>it is hard problem for sure. obsidian will have something cool to show later this year, or after that.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201204861" name="201204861"><div>2020-06-17 21:46:48</div></a></div><div class="text"><p>(but rhyolite works meanwhile, even if a bit cludgy)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201204897" name="201204897"><div>2020-06-17 21:47:17</div></a></div><div class="text"><p><a href="https://materialize.io/">https://materialize.io/</a> is half the equation for such FRP app</p>
<div class="message_embed"><a class="message_embed_image" href="https://materialize.io/" style="background-image: url(https://materialize.io/wp-content/uploads/2020/02/Asset-3.png)"></a><div class="data-container"><div class="message_embed_title"><a href="https://materialize.io/" title="Homepage">Homepage</a></div><div class="message_embed_description">A Streaming Database for Real-Time Applications</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201204900" name="201204900"><div>2020-06-17 21:47:18</div></a></div><div class="text"><p>listen/notify is one technique, and assuming you listen to all changes being made to the DB, how do you select the changes that affect your current FRP network?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201205010" name="201205010"><div>2020-06-17 21:48:06</div></a></div><div class="text"><p>in rhyolite, there is a type called "ViewSelector" which allows the frontend to select all it needs from various points in network. Globally they are combined (<code>Monoid</code>), and communicated via websocket channel.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201205130" name="201205130"><div>2020-06-17 21:49:35</div></a></div><div class="text"><p>you don't listen to all changes. and you 'notify' explicitly, from the points in your backend where you update. and then there is a NotifyHandler that handles the notifications, and updates the resulting "View" (based on what's selected in ViewSelector) which gets merged downstream</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201205159" name="201205159"><div>2020-06-17 21:49:54</div></a></div><div class="text"><p>this app does all i've said <a href="https://github.com/srid/obelisk-rhyolite-template">https://github.com/srid/obelisk-rhyolite-template</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/obelisk-rhyolite-template" style="background-image: url(https://avatars2.githubusercontent.com/u/3998?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/obelisk-rhyolite-template" title="srid/obelisk-rhyolite-template">srid/obelisk-rhyolite-template</a></div><div class="message_embed_description">A template repository for your Obelisk+Rhyolite projects  - srid/obelisk-rhyolite-template</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201205375" name="201205375"><div>2020-06-17 21:51:59</div></a></div><div class="text"><p>by the way, in case if you are wondering: reflex is a pretty isolated ecosystem in the Haskell universe. you won't get help for it in places like FP slack. IRC (<code>#reflex-frp</code>) is the only place where prominent folks can respond to your question. they are very helpful.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201205443" name="201205443"><div>2020-06-17 21:52:18</div></a></div><div class="text"><p>(and I recommend <a href="http://riot.im">riot.im</a> for IRC; it keeps everything persistent! or irccloud )</p>
<div class="message_embed"><a class="message_embed_image" href="http://riot.im" style="background-image: url(https://about.riot.im/images/opengraph.png)"></a><div class="data-container"><div class="message_embed_title"><a href="http://riot.im" title="Liberate your communication | Riot">Liberate your communication | Riot</a></div><div class="message_embed_description">Communicate the way you want with Riot - a universal secure chat app entirely under your control.</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201205480" name="201205480"><div>2020-06-17 21:52:39</div></a></div><div class="text"><p>cool, thanks.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367"></a><div class="content"><a class="author">Saurabh Nanda</a><div class="metadata"><a href="#201205498" name="201205498"><div>2020-06-17 21:52:51</div></a></div><div class="text"><p>let me read-up some more and think some more.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#201205535" name="201205535"><div>2020-06-17 21:53:14</div></a></div><div class="text"><p>the core reflex engine is not tied to web apps. it can be used in non-web contexts too, eg: <a href="https://github.com/reflex-frp/reflex-vty">https://github.com/reflex-frp/reflex-vty</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/reflex-frp/reflex-vty" style="background-image: url(https://avatars2.githubusercontent.com/u/11824260?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/reflex-frp/reflex-vty" title="reflex-frp/reflex-vty">reflex-frp/reflex-vty</a></div><div class="message_embed_description">Build terminal applications using functional reactive programming (FRP) with Reflex FRP. - reflex-frp/reflex-vty</div></div></div></div></div></div></div></div><div class="ui vertical footer segment"><a href="https://github.com/srid/zulip-archive">Powered by Haskell</a> | Questions? Contact <a href="https://www.srid.ca">srid</a></div></div></body></html>