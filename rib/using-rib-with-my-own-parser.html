<html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="so, for this project I am trying to build" name="description"><link href="https://funprog.srid.ca/rib/using-rib-with-my-own-parser.html" rel="canonical"><meta property="og:title" content="Using rib with my own parser - Rib"><meta property="og:site_name" content="Functional Programming Zulip Archive"><meta property="og:type" content="article"><meta property="og:article:section" content="Rib"><meta property="og:article:modified_time" content="2020-01-01T01:46:40Z"><meta property="og:article:published_time" content="2019-12-25T21:46:50Z"><title>Using rib with my own parser - Rib</title><style type="text/css">
div#thesite
{
  font-family   : "Open Sans", sans-serif;
  font-size     : 1em !important;
  margin-top    : 1em;
  margin-bottom : 1em;
}

div#thesite h1
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h2
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h3
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h4
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h5
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h6
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .ui.breadcrumb.rib .section
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .as-header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite code, pre, tt
{
  font-family : "SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace;
}

div#thesite .ui.breadcrumb.rib
{
  margin-bottom : 1em;
}



div#thesite .ui.comments.messages .comment .metadata a
{
  color : #808080;
}

div#thesite .ui.comments.messages .comment a.avatar img
{
  height : auto;
}

div#thesite .subtle
{
  color : #808080;
}


div#thesite .messages pre
{
  font-size : 85%;
  overflow  : auto;
  max-width : 100%;
}

div#thesite .messages .message_embed
{
  border-left  : solid 3px #808080;
  padding-left : 0.69999em;
}

div#thesite .messages .message_inline_image img
{
  max-width     : 100%;
  margin-bottom : 1em;
}


/* Generated with Clay, http://fvisser.nl/clay */</style><link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Open+Sans|Oswald&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto|Open+Sans&amp;display=swap" rel="stylesheet"></head><body><div id="thesite" class="ui text container"><div class="ui violet inverted top attached center aligned segment"><h1 class="ui huge header">Using rib with my own parser - Rib</h1></div><div class="ui attached segment"><div class="ui message"><p>Welcome to the Functional Programming Zulip Chat Archive. You can join the chat <a href="https://funprog.zulipchat.com">here</a>.</p></div><div class="ui breadcrumb rib"><a href="/" class="section">Home</a><i class="right angle icon divider"></i><a href="/rib/" class="section">#Rib</a><i class="right angle icon divider"></i><div class="active section">Using rib with my own parser</div></div><div class="ui comments messages"><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184232492" name="184232492"><div>2019-12-25 21:46:50</div></a></div><div class="text"><p>so, for this project I am trying to build</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184232499" name="184232499"><div>2019-12-25 21:47:19</div></a></div><div class="text"><p>it does seem like asciidoc is unsuitable, it doesnt have a good way to "embed" xml tags</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184232501" name="184232501"><div>2019-12-25 21:47:55</div></a></div><div class="text"><p>which is fine, i can just use my own xml thing anyway</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184232591" name="184232591"><div>2019-12-25 21:50:18</div></a></div><div class="text"><p>I could do like <code>+++&lt;my-tag&gt;+++</code>,  have some other content, and end it with <code>+++&lt;/my-tag&gt;+++</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184232593" name="184232593"><div>2019-12-25 21:50:24</div></a></div><div class="text"><p>but that just seems horrible</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184232793" name="184232793"><div>2019-12-25 21:59:53</div></a></div><div class="text"><p>I find asciidoc's built-in syntax to be good enough. Is there anything you plan to define in XML that is not possible to do in asciidoc?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184232843" name="184232843"><div>2019-12-25 22:00:54</div></a></div><div class="text"><p>The other shortcoming of asciidoc is you won't get a Haskell parsed data-type, if we shell-out to its ruby html generator</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184232851" name="184232851"><div>2019-12-25 22:01:37</div></a></div><div class="text"><p>Alternatively: perhaps asciidoc can be included in your xml markup?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184232881" name="184232881"><div>2019-12-25 22:02:03</div></a></div><div class="text"><p>So parts of your xml doc gets parsed with asciidoc, while you retain control over the rest of it</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184233131" name="184233131"><div>2019-12-25 22:11:51</div></a></div><div class="text"><p>yeah, this is kindof what I was thinking of</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184233204" name="184233204"><div>2019-12-25 22:13:50</div></a></div><div class="text"><p>plain text can be treated as asciidoc or markdown</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184233245" name="184233245"><div>2019-12-25 22:14:09</div></a></div><div class="text"><p>its the way I have things working in pollen</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184238967" name="184238967"><div>2019-12-26 01:51:06</div></a></div><div class="text"><p>actually, now that I think about it, I <em>think</em> i don't have markdown w/ pollen, just some subset of things I want are built in to the markup (e.g. double newlines -&gt; paragraphs</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242141" name="184242141"><div>2019-12-26 03:50:01</div></a></div><div class="text"><p>So, as far as I can tell, I will have to modify rib itself, i can't just implement my own IsMarkup thing</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242185" name="184242185"><div>2019-12-26 03:50:51</div></a></div><div class="text"><p>Yes, but the only modification you need to do is to add a constructor to the <code>Markup</code> type. This is something we can obviate by improving the API.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242188" name="184242188"><div>2019-12-26 03:51:02</div></a></div><div class="text"><p>cool!</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242194" name="184242194"><div>2019-12-26 03:51:26</div></a></div><div class="text"><p>Would it be worth it for me to try to figure it out?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242195" name="184242195"><div>2019-12-26 03:51:29</div></a></div><div class="text"><p>Assuming you are using the <code>master</code> branch (and not one on Hackage)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242198" name="184242198"><div>2019-12-26 03:51:47</div></a></div><div class="text"><p>Sure; I'm here to help</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242238" name="184242238"><div>2019-12-26 03:52:08</div></a></div><div class="text"><p>This type basically <a href="https://github.com/srid/rib/blob/master/src/Rib/Markup.hs#L26-L28" target="_blank" title="https://github.com/srid/rib/blob/master/src/Rib/Markup.hs#L26-L28">https://github.com/srid/rib/blob/master/src/Rib/Markup.hs#L26-L28</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/rib/blob/master/src/Rib/Markup.hs#L26-L28" style="background-image: url(https://avatars2.githubusercontent.com/u/3998?s=400&amp;v=4)" target="_blank"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/rib/blob/master/src/Rib/Markup.hs#L26-L28" target="_blank" title="srid/rib">srid/rib</a></div><div class="message_embed_description">Haskell library for writing your own static site generator - srid/rib</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242239" name="184242239"><div>2019-12-26 03:52:30</div></a></div><div class="text"><p>You'd add a constructor like <code>Markup_MyXmlThingy :: Markup MyXmlDoc</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242243" name="184242243"><div>2019-12-26 03:52:45</div></a></div><div class="text"><p>(in addition to writing an instance for <code>IsMarkup MyXmlDoc</code>)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242292" name="184242292"><div>2019-12-26 03:54:25</div></a></div><div class="text"><p>See <a href="https://github.com/srid/rib/blob/master/src/Rib/Markup/MMark.hs" target="_blank" title="https://github.com/srid/rib/blob/master/src/Rib/Markup/MMark.hs">https://github.com/srid/rib/blob/master/src/Rib/Markup/MMark.hs</a> for an example. That adds <code>mmark</code> support.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/rib/blob/master/src/Rib/Markup/MMark.hs" style="background-image: url(https://avatars2.githubusercontent.com/u/3998?s=400&amp;v=4)" target="_blank"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/rib/blob/master/src/Rib/Markup/MMark.hs" target="_blank" title="srid/rib">srid/rib</a></div><div class="message_embed_description">Haskell library for writing your own static site generator - srid/rib</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242301" name="184242301"><div>2019-12-26 03:55:21</div></a></div><div class="text"><p>Tomorrow I'll figure out if there is a way to obviate it. But meanwhile you may just modify rib ...</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242347" name="184242347"><div>2019-12-26 03:56:18</div></a></div><div class="text"><p>The only reason the <code>Markup doc</code> type exists is to build the patterns dict for passing to <code>buildHtmlMulti</code>.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242357" name="184242357"><div>2019-12-26 03:57:05</div></a></div><div class="text"><p>well what I meant was figuring out how to get rid of it</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242358" name="184242358"><div>2019-12-26 03:57:08</div></a></div><div class="text"><div class="codehilite"><pre><span></span>        Rib.buildHtmlMulti patterns $
          renderPage . Page_Doc
    -- File patterns to build, using the associated markup parser
    patterns =
      Map.fromList
        [ ([relfile|*.md|], Some Rib.Markup_MMark)
        ]
</pre></div>


<p>That tells the function, "yea, build *.md files using this markup parser"</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242359" name="184242359"><div>2019-12-26 03:57:13</div></a></div><div class="text"><p>(the need to modify RIB itself)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242361" name="184242361"><div>2019-12-26 03:57:27</div></a></div><div class="text"><p>sure</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242363" name="184242363"><div>2019-12-26 03:57:54</div></a></div><div class="text"><p><span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242402" name="184242402"><div>2019-12-26 03:58:12</div></a></div><div class="text"><p>id def prefer to adoid having my own fork for long</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242407" name="184242407"><div>2019-12-26 03:58:58</div></a></div><div class="text"><p>question <span class="user-mention" data-user-id="251311">@Sridhar Ratnakumar</span> does the desire I am describing ring true for you too? (that is, writing in an extensible markup language)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242413" name="184242413"><div>2019-12-26 03:59:05</div></a></div><div class="text"><p>Perhaps <code>buildHtmlMulti</code> can take the IsMarkup constraint, and then you call it multiple times, one for each markup type:</p>
<div class="codehilite"><pre><span></span>mdPages &lt;- buildHtmlMulti @MMark [relfile|*.md] ...
xmlPages &lt;- buildHtmlMulti @MyXmlType [relfile|*.xml] ...
let allPages = mdPages &lt;&gt; xmlPages
</pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242414" name="184242414"><div>2019-12-26 03:59:08</div></a></div><div class="text"><p>its weird to me that it seems like most people do not care about it</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242419" name="184242419"><div>2019-12-26 03:59:32</div></a></div><div class="text"><p>im not sure if i'm just a weirdo, or if its like people never think about it, or what</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242426" name="184242426"><div>2019-12-26 03:59:45</div></a></div><div class="text"><p>yea thats kinda what I was thinking</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242479" name="184242479"><div>2019-12-26 04:00:08</div></a></div><div class="text"><p>I've thought about something like xml. Or yaml. Or even dhall ... as representation of structured data (if not text).</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242484" name="184242484"><div>2019-12-26 04:00:28</div></a></div><div class="text"><p>For example, <code>links.dhall</code> - which gets processed and rendered into a page of links.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242485" name="184242485"><div>2019-12-26 04:00:31</div></a></div><div class="text"><p>really the reason I like xml over those options is that i think its a bit more flexible</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242488" name="184242488"><div>2019-12-26 04:00:42</div></a></div><div class="text"><p>like, xml already supports e.g. CDATA</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242489" name="184242489"><div>2019-12-26 04:00:48</div></a></div><div class="text"><p>If i want to embed something funky, its there</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242490" name="184242490"><div>2019-12-26 04:00:51</div></a></div><div class="text"><p>but yeah i'm with you</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242496" name="184242496"><div>2019-12-26 04:01:05</div></a></div><div class="text"><p>I just wouldn't want to use xml for formatting text content.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242498" name="184242498"><div>2019-12-26 04:01:11</div></a></div><div class="text"><p>same</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242499" name="184242499"><div>2019-12-26 04:01:15</div></a></div><div class="text"><p>But for structured data, it is fine.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242500" name="184242500"><div>2019-12-26 04:01:36</div></a></div><div class="text"><p>One of these days I want to add dhall support.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242540" name="184242540"><div>2019-12-26 04:02:04</div></a></div><div class="text"><p>i mean, something like adding <code>*bold*</code> to the xml processing  would go a really long away</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242546" name="184242546"><div>2019-12-26 04:02:43</div></a></div><div class="text"><p>during development of rib you may find <code>nix-shell --run ghcid</code> to be handy.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242547" name="184242547"><div>2019-12-26 04:02:44</div></a></div><div class="text"><p>text separated by a blank line to mean new paragraph, etc</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242552" name="184242552"><div>2019-12-26 04:03:01</div></a></div><div class="text"><p>cool</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242602" name="184242602"><div>2019-12-26 04:04:06</div></a></div><div class="text"><p>And to test your library changes, you can clone <a href="https://github.com/srid/rib-sample" target="_blank" title="https://github.com/srid/rib-sample">https://github.com/srid/rib-sample</a> and run <code>nix-shell --arg rib /path/to/your/rib --run 'ghcid -T ":main serve -p 9876"'</code> (spins up <a href="http://localhost:9876" target="_blank" title="http://localhost:9876">http://localhost:9876</a>). though you'd have to re-run the command after changing rib library.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/rib-sample" style="background-image: url(https://avatars2.githubusercontent.com/u/3998?s=400&amp;v=4)" target="_blank"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/rib-sample" target="_blank" title="srid/rib-sample">srid/rib-sample</a></div><div class="message_embed_description">Sample site for the Rib static site generator. Contribute to srid/rib-sample development by creating an account on GitHub.</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242605" name="184242605"><div>2019-12-26 04:04:57</div></a></div><div class="text"><p>would it be appropriate to add as ection to the readme</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242613" name="184242613"><div>2019-12-26 04:05:07</div></a></div><div class="text"><p>for "developing rib"</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242614" name="184242614"><div>2019-12-26 04:05:10</div></a></div><div class="text"><p>ya, good idea</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242618" name="184242618"><div>2019-12-26 04:05:19</div></a></div><div class="text"><p>i almost always do that</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242620" name="184242620"><div>2019-12-26 04:05:25</div></a></div><div class="text"><p>like for my own stuff</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242621" name="184242621"><div>2019-12-26 04:05:31</div></a></div><div class="text"><p>because i freaking forget which version of a command works</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242623" name="184242623"><div>2019-12-26 04:05:44</div></a></div><div class="text"><p>for some reason i have a very hard time figuring out the right way to make ghcid do what I want it to do</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242624" name="184242624"><div>2019-12-26 04:06:00</div></a></div><div class="text"><p>i almost never have to configure ghcid.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242663" name="184242663"><div>2019-12-26 04:06:08</div></a></div><div class="text"><p>defaults work fine for me</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242666" name="184242666"><div>2019-12-26 04:06:27</div></a></div><div class="text"><p>ah</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242667" name="184242667"><div>2019-12-26 04:06:31</div></a></div><div class="text"><p>except for the <code>-T</code> argument, which is kind of needed if you also want to run the program in addition to compiling it</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242669" name="184242669"><div>2019-12-26 04:06:58</div></a></div><div class="text"><p><code>ghcid -T "blah"</code> will basically evaluate "blah" in the ghci repl it launches</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242674" name="184242674"><div>2019-12-26 04:07:06</div></a></div><div class="text"><p>(right after every successful compile)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242675" name="184242675"><div>2019-12-26 04:07:13</div></a></div><div class="text"><p>liek i had to do this to make the tests run</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242677" name="184242677"><div>2019-12-26 04:07:14</div></a></div><div class="text"><p>ghcid -c 'stack ghci joelmccracken-hs:joelmccracken-hs-test' --test 'Main.main'</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242682" name="184242682"><div>2019-12-26 04:07:39</div></a></div><div class="text"><p>in this repo <a href="https://gitlab.com/JoelMcCracken/joelmccracken-hs" target="_blank" title="https://gitlab.com/JoelMcCracken/joelmccracken-hs">https://gitlab.com/JoelMcCracken/joelmccracken-hs</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://gitlab.com/JoelMcCracken/joelmccracken-hs" style="background-image: url(https://assets.gitlab-static.net/assets/gitlab_logo-7ae504fe4f68fdebb3c2034e36621930cd36ea87924c11ff65dbcb8ed50dca58.png)" target="_blank"></a><div class="data-container"><div class="message_embed_title"><a href="https://gitlab.com/JoelMcCracken/joelmccracken-hs" target="_blank" title="Sign in">Sign in</a></div><div class="message_embed_description">GitLab.com</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242687" name="184242687"><div>2019-12-26 04:08:01</div></a></div><div class="text"><p>(this is where I was spiking out the xml processing for my xml version to validate i have a path forward)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242724" name="184242724"><div>2019-12-26 04:08:31</div></a></div><div class="text"><p>you could just put those CLI in <code>scripts/myscript</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242731" name="184242731"><div>2019-12-26 04:09:07</div></a></div><div class="text"><p>btw, development stuff may instead be added to <a href="https://github.com/srid/rib/blob/master/CONTRIBUTING.md" target="_blank" title="https://github.com/srid/rib/blob/master/CONTRIBUTING.md">https://github.com/srid/rib/blob/master/CONTRIBUTING.md</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/rib/blob/master/CONTRIBUTING.md" style="background-image: url(https://avatars2.githubusercontent.com/u/3998?s=400&amp;v=4)" target="_blank"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/rib/blob/master/CONTRIBUTING.md" target="_blank" title="srid/rib">srid/rib</a></div><div class="message_embed_description">Haskell library for writing your own static site generator - srid/rib</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242732" name="184242732"><div>2019-12-26 04:09:22</div></a></div><div class="text"><p>feel free to open a PR, otherwise i'll add it tomorrow</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242922" name="184242922"><div>2019-12-26 04:15:37</div></a></div><div class="text"><p>ok</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242925" name="184242925"><div>2019-12-26 04:15:48</div></a></div><div class="text"><p>i probably wont start tonight, about to go to bed</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242952" name="184242952"><div>2019-12-26 04:16:02</div></a></div><div class="text"><p>and i am going to be afk for a few days</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242966" name="184242966"><div>2019-12-26 04:16:11</div></a></div><div class="text"><p>but i might be hacking on it</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184242967" name="184242967"><div>2019-12-26 04:16:12</div></a></div><div class="text"><p>family time</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184242971" name="184242971"><div>2019-12-26 04:16:40</div></a></div><div class="text"><p>oh yea, merry christmas! :D</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184243018" name="184243018"><div>2019-12-26 04:18:10</div></a></div><div class="text"><p>ha ty, i dont celebrate it but we are going to get together as family</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184399641" name="184399641"><div>2019-12-29 01:45:05</div></a></div><div class="text"><p>Looks like <code>Data.Some</code> and <code>Data.Proxy</code> is coming in handy to achieve this (eliminating need to modify rib)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184400101" name="184400101"><div>2019-12-29 02:02:48</div></a></div><div class="text"><p>I'm wondering if the 'meta' from <code>Document meta</code> should be discarded, for simplicity.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184400186" name="184400186"><div>2019-12-29 02:05:16</div></a></div><div class="text"><p><span class="user-mention" data-user-id="252949">@Joel McCracken</span> If you are curious, in particular this commit: <a href="https://github.com/srid/rib/pull/65/commits/4f42517abb6d244e51013644cb09a571341c77e7" target="_blank" title="https://github.com/srid/rib/pull/65/commits/4f42517abb6d244e51013644cb09a571341c77e7">https://github.com/srid/rib/pull/65/commits/4f42517abb6d244e51013644cb09a571341c77e7</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/rib/pull/65/commits/4f42517abb6d244e51013644cb09a571341c77e7" style="background-image: url(https://avatars2.githubusercontent.com/u/3998?s=400&amp;v=4)" target="_blank"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/rib/pull/65/commits/4f42517abb6d244e51013644cb09a571341c77e7" target="_blank" title="Use Some &amp; Proxy for markup customization by srid · Pull Request #65 · srid/rib">Use Some &amp; Proxy for markup customization by srid · Pull Request #65 · srid/rib</a></div><div class="message_embed_description">Fixes #62
todo

 Simplify API, lest user has to use Some too much?
 Test with rib-sample in a branch</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184404055" name="184404055"><div>2019-12-29 04:13:28</div></a></div><div class="text"><p>Actually there are some problems with this. I'll address them.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184430237" name="184430237"><div>2019-12-29 17:55:39</div></a></div><div class="text"><p>Looks to be like in the end <code>IsMarkup</code> type class will have only one method left, to parse the file into some type. That's greatly simplifying.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184439095" name="184439095"><div>2019-12-29 22:34:26</div></a></div><div class="text"><p>w00t! got dhall version working. both markdown and dhall at same time, without having to change rib</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184440202" name="184440202"><div>2019-12-29 23:09:07</div></a></div><div class="text"><p>so its interesting, I really don't know if a "metas" section is necessary</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184440207" name="184440207"><div>2019-12-29 23:09:20</div></a></div><div class="text"><p>meta is gone in the latest PR</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184440209" name="184440209"><div>2019-12-29 23:09:34</div></a></div><div class="text"><p><a href="https://github.com/srid/rib/pull/65" target="_blank" title="https://github.com/srid/rib/pull/65">https://github.com/srid/rib/pull/65</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/rib/pull/65" style="background-image: url(https://avatars2.githubusercontent.com/u/3998?s=400&amp;v=4)" target="_blank"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/rib/pull/65" target="_blank" title="Refactor API, so users can define their own markup types by srid · Pull Request #65 · srid/rib">Refactor API, so users can define their own markup types by srid · Pull Request #65 · srid/rib</a></div><div class="message_embed_description">Fixes #62
Still a WIP

 Simplify API, lest user has to use Some too much?
 Test with rib-sample in a branch</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184440210" name="184440210"><div>2019-12-29 23:09:36</div></a></div><div class="text"><p>it <em>is</em> necessary if 1) you need some kind of meta support and 2) your markup doesnt support some kind of metas</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184440212" name="184440212"><div>2019-12-29 23:09:39</div></a></div><div class="text"><p>nice</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184440223" name="184440223"><div>2019-12-29 23:10:01</div></a></div><div class="text"><p>instead I exposed metadata functions from MMark.hs and Pandoc.hs that the user can explicitly call if they need to extract meta</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184440262" name="184440262"><div>2019-12-29 23:10:37</div></a></div><div class="text"><p>excellent</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184440264" name="184440264"><div>2019-12-29 23:10:40</div></a></div><div class="text"><p>yeah, that sounds good</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184440265" name="184440265"><div>2019-12-29 23:10:48</div></a></div><div class="text"><p>but how do you handle like</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184440267" name="184440267"><div>2019-12-29 23:10:57</div></a></div><div class="text"><p>I'm wondering if I can do away with the type class itself, and instead expect just a function <code>Text -&gt; IO a</code> :-)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184440281" name="184440281"><div>2019-12-29 23:11:21</div></a></div><div class="text"><p>possibly? hard to say per se</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184440284" name="184440284"><div>2019-12-29 23:11:35</div></a></div><div class="text"><p>I'm not sure yet; still exploring in code ...</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184440286" name="184440286"><div>2019-12-29 23:11:43</div></a></div><div class="text"><p>if it were me, given your stated goal, i think what I would do is make handy, discrete functions</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184440287" name="184440287"><div>2019-12-29 23:11:52</div></a></div><div class="text"><p>that can be combined arbitrarily</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184440288" name="184440288"><div>2019-12-29 23:11:58</div></a></div><div class="text"><p>not saying you aren't doing that</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184440333" name="184440333"><div>2019-12-29 23:12:31</div></a></div><div class="text"><p>The document type now looks like this:</p>
<div class="codehilite"><pre><span></span><span class="kr">data</span> <span class="kt">Document</span> <span class="n">repr</span>
  <span class="ow">=</span> <span class="kt">Document</span>
      <span class="p">{</span> <span class="c1">-- | Path to the document; relative to the source directory.</span>
        <span class="n">_document_path</span> <span class="ow">::</span> <span class="kt">Path</span> <span class="kt">Rel</span> <span class="kt">File</span><span class="p">,</span>
        <span class="c1">-- | Parsed representation of the document.</span>
        <span class="n">_document_val</span> <span class="ow">::</span> <span class="n">repr</span>
      <span class="p">}</span>
  <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Generic</span><span class="p">,</span> <span class="kt">Functor</span><span class="p">)</span>
</pre></div>


<p>Basically a tuple of filepath and parsed structure. That's the minimum rib will need to pass over to the user.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184440336" name="184440336"><div>2019-12-29 23:12:35</div></a></div><div class="text"><p>just like i feel like I am not sure what probelm that typeclass solves</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184440337" name="184440337"><div>2019-12-29 23:12:37</div></a></div><div class="text"><p>if that makes sense</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184440339" name="184440339"><div>2019-12-29 23:12:50</div></a></div><div class="text"><p>ahh nice</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184440348" name="184440348"><div>2019-12-29 23:13:13</div></a></div><div class="text"><p>And type class's responsibility has been reduced to ... basically creating this Document value. That's all it essentially does.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184440349" name="184440349"><div>2019-12-29 23:13:35</div></a></div><div class="text"><p>Well , it's a learning process for me - rib being my first haskell library :-D so I'm not surprised to begin from a place of overengineering.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184440350" name="184440350"><div>2019-12-29 23:13:36</div></a></div><div class="text"><p>yea</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184440355" name="184440355"><div>2019-12-29 23:13:50</div></a></div><div class="text"><p>haha</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184440354" name="184440354"><div>2019-12-29 23:13:50</div></a></div><div class="text"><p>no worires man! its better than my first attempt would be, for sure</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184440413" name="184440413"><div>2019-12-29 23:14:10</div></a></div><div class="text"><p>anywya, in your case, it would be <code>Document MyXmlType</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184440452" name="184440452"><div>2019-12-29 23:15:03</div></a></div><div class="text"><p>yea</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184440557" name="184440557"><div>2019-12-29 23:18:43</div></a></div><div class="text"><p>replacing type class with something like: </p>
<div class="codehilite"><pre><span></span><span class="kr">type</span> <span class="kt">MarkupParser</span> <span class="n">a</span> <span class="ow">=</span> <span class="n">forall</span> <span class="n">m</span> <span class="n">b</span><span class="o">.</span> <span class="kt">MonadIO</span> <span class="n">m</span> <span class="ow">=&gt;</span> <span class="kt">Path</span> <span class="n">b</span> <span class="kt">File</span> <span class="ow">-&gt;</span> <span class="n">m</span> <span class="p">(</span><span class="kt">Either</span> <span class="kt">Text</span> <span class="n">a</span><span class="p">)</span>
</pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184440682" name="184440682"><div>2019-12-29 23:22:12</div></a></div><div class="text"><p>wow it actually worked haha</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184440857" name="184440857"><div>2019-12-29 23:27:03</div></a></div><div class="text"><p>okay, so the shake function will looke like this:</p>
<div class="codehilite"><pre><span></span>buildHtmlMulti patterns myMarkupParser myPageBuilder
</pre></div>


<p>patterns, input function, output function. that's it</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184441346" name="184441346"><div>2019-12-29 23:38:07</div></a></div><div class="text"><p>It's gone now: <a href="https://github.com/srid/rib/pull/65/commits/89f4843676dbf0f10a8e773534761785a814a74f" target="_blank" title="https://github.com/srid/rib/pull/65/commits/89f4843676dbf0f10a8e773534761785a814a74f">https://github.com/srid/rib/pull/65/commits/89f4843676dbf0f10a8e773534761785a814a74f</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/rib/pull/65/commits/89f4843676dbf0f10a8e773534761785a814a74f" style="background-image: url(https://avatars2.githubusercontent.com/u/3998?s=400&amp;v=4)" target="_blank"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/rib/pull/65/commits/89f4843676dbf0f10a8e773534761785a814a74f" target="_blank" title="Refactor API, so users can define their own markup types by srid · Pull Request #65 · srid/rib">Refactor API, so users can define their own markup types by srid · Pull Request #65 · srid/rib</a></div><div class="message_embed_description">Fixes #62
Still a WIP

 Simplify API, lest user has to use Some too much?
 Test with rib-sample in a branch</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184442392" name="184442392"><div>2019-12-30 00:13:06</div></a></div><div class="text"><p>do you think its stableenough to develop against? i fetched your branch</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184443646" name="184443646"><div>2019-12-30 00:58:53</div></a></div><div class="text"><p>I think it is nearly done. What do you think of the API? Looking for some final tweaks before I merge.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184443654" name="184443654"><div>2019-12-30 00:59:42</div></a></div><div class="text"><p>(One last thing to do before I merge the PR is to update rib-sample)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184443932" name="184443932"><div>2019-12-30 01:08:36</div></a></div><div class="text"><p>I don't like "Rib.Markup". Dhall is not a markup. So I'm gonna rename it to something more general. Since there is now <code>Rib.Source</code> (renamed from 'Document', as 'source' reflects its nature more precisely), I'll try Rib.Parser</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184444888" name="184444888"><div>2019-12-30 01:40:43</div></a></div><div class="text"><p>Okay, branch is stable. Going to test for bugs. Then merge. Here's the user-facing upgrade path you can expect: <a href="https://github.com/srid/rib-sample/pull/4/files" target="_blank" title="https://github.com/srid/rib-sample/pull/4/files">https://github.com/srid/rib-sample/pull/4/files</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/rib-sample/pull/4/files" style="background-image: url(https://avatars2.githubusercontent.com/u/3998?s=400&amp;v=4)" target="_blank"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/rib-sample/pull/4/files" target="_blank" title="Upgrade to Rib's API refactor (removal of type class, etc.) by srid · Pull Request #4 · srid/rib-sample">Upgrade to Rib's API refactor (removal of type class, etc.) by srid · Pull Request #4 · srid/rib-sample</a></div><div class="message_embed_description">For srid/rib#65</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184444903" name="184444903"><div>2019-12-30 01:41:40</div></a></div><div class="text"><p>In that PR, notice the use of <code>M.parseIO</code>. That's where you would inject your Xml parser function.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184445320" name="184445320"><div>2019-12-30 01:54:15</div></a></div><div class="text"><p><span class="user-mention" data-user-id="252949">@Joel McCracken</span> Everything merged to master!</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184553907" name="184553907"><div>2019-12-31 17:03:30</div></a></div><div class="text"><p><span class="user-mention" data-user-id="252949">@Joel McCracken</span> When you get to play with it, I'd be interested in hearing your feedback regarding the <code>SourceReader</code> type. Whether it does what you want re: your xml parsing. Personally I just found that I needed to switch from IO to shake's Action monad, when working with dhall parsing, so I am proposing this change: <a href="https://github.com/srid/rib/pull/69" target="_blank" title="https://github.com/srid/rib/pull/69">https://github.com/srid/rib/pull/69</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/rib/pull/69" style="background-image: url(https://avatars2.githubusercontent.com/u/3998?s=400&amp;v=4)" target="_blank"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/rib/pull/69" target="_blank" title="Make SourceReader a Shake Action by srid · Pull Request #69 · srid/rib">Make SourceReader a Shake Action by srid · Pull Request #69 · srid/rib</a></div><div class="message_embed_description">This will allow us to do Shake-y things in our readers. For example,
parsing our Dhall files may require need&#39;ing its dependent .dhall
files, doing which ensures that when those files change ri...</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/45175015b9eb3dd3f6c740b3fe920fed"></a><div class="content"><a class="author">Joel McCracken</a><div class="metadata"><a href="#184554005" name="184554005"><div>2019-12-31 17:05:04</div></a></div><div class="text"><p>I'm going to work with this today, at least I am planning on it. I'll let you know when I do</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184575286" name="184575286"><div>2020-01-01 01:20:19</div></a></div><div class="text"><p>I merged this PR.  Shouldn't be huge change in the user code. Just replace <code>IO a</code> with <code>Action a</code> in your reader function. And prepend all IO functions with <code>liftIO</code>. Prefer <code>readFile'</code> (from <code>import Development.Shake</code>) when reading some file, as it will track the dependency automatically.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184576281" name="184576281"><div>2020-01-01 01:46:22</div></a></div><div class="text"><p>Here's what adding Dhall parser support to a rib-based static website currently looks like :-) <a href="https://github.com/srid/website/pull/6/files" target="_blank" title="https://github.com/srid/website/pull/6/files">https://github.com/srid/website/pull/6/files</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/website/pull/6/files" style="background-image: url(https://avatars2.githubusercontent.com/u/3998?s=400&amp;v=4)" target="_blank"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/website/pull/6/files" target="_blank" title="Add links list, using Dhall by srid · Pull Request #6 · srid/website">Add links list, using Dhall by srid · Pull Request #6 · srid/website</a></div><div class="message_embed_description">cf. srid/rib#64</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#184576292" name="184576292"><div>2020-01-01 01:46:40</div></a></div><div class="text"><p>I think I'm gonna add that <code>parse</code> function into <code>Rib.Parser.Dhall</code></p></div></div></div></div></div><div class="ui vertical footer segment"><a href="https://github.com/srid/zulip-archive">Powered by Haskell</a> | Questions? Contact <a href="https://www.srid.ca">srid</a></div></div></body></html>