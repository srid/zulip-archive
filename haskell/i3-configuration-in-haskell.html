<html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="Idea for a fun project, if you use i3 in particular. Write a way to configure i3 that is fully type-checked. Eg. as Haskell code (or Dhall) that compiles to the i3 configuration file. Kind of like xmonad, but compiles to conf file instead of executable. Bonus points for IDE support via Language Serv" name="description"><link href="https://funprog.srid.ca/haskell/i3-configuration-in-haskell.html" rel="canonical"><meta property="og:title" content="i3 configuration in Haskell - Haskell"><meta property="og:site_name" content="Functional Programming Zulip Archive"><meta property="og:type" content="article"><meta property="og:article:section" content="Haskell"><meta property="og:article:modified_time" content="2020-11-28T03:25:41Z"><meta property="og:article:published_time" content="2020-11-22T16:41:49Z"><meta property="og:image" content="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"><title>i3 configuration in Haskell - Haskell</title><style type="text/css">
div#thesite
{
  font-family   : "Open Sans", sans-serif;
  font-size     : 1em !important;
  margin-top    : 1em;
  margin-bottom : 1em;
}

div#thesite h1
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h2
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h3
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h4
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h5
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h6
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .ui.breadcrumb.rib .section
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .as-header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite code, pre, tt
{
  font-family : "SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace;
}

div#thesite .ui.breadcrumb.rib
{
  margin-bottom : 1em;
}



div#thesite .ui.comments.messages .comment .metadata a
{
  color : #808080;
}

div#thesite .ui.comments.messages .comment a.avatar img
{
  height : auto;
}

div#thesite .subtle
{
  color : #808080;
}


div#thesite .messages pre
{
  font-size : 85%;
  overflow  : auto;
  max-width : 100%;
}

div#thesite .messages .message_embed
{
  border-left  : solid 3px #808080;
  padding-left : 0.69999em;
}

div#thesite .messages .message_inline_image img
{
  max-width     : 100%;
  margin-bottom : 1em;
}


/* Generated with Clay, http://fvisser.nl/clay */</style><link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Open+Sans|Oswald&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto|Open+Sans&amp;display=swap" rel="stylesheet"></head><body><div id="thesite" class="ui text container"><div class="ui violet inverted top attached center aligned segment"><h1 class="ui huge header">i3 configuration in Haskell - Haskell</h1></div><div class="ui attached segment"><div class="ui message"><p>Welcome to the Functional Programming Zulip Chat Archive. You can join the chat <a href="https://funprog.zulipchat.com">here</a>.</p></div><div class="ui breadcrumb rib"><a href="/" class="section">Home</a><i class="right angle icon divider"></i><a href="/haskell/" class="section">#Haskell</a><i class="right angle icon divider"></i><div class="active section">i3 configuration in Haskell</div></div><div class="ui comments messages"><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#217559069" name="217559069"><div>2020-11-22 16:41:49</div></a></div><div class="text"><p>Idea for a fun project, if you use <code>i3</code> in particular. Write a way to configure i3 that is fully type-checked. Eg. as Haskell code (or Dhall) that compiles to the i3 configuration file. Kind of like xmonad, but compiles to conf file instead of executable. Bonus points for IDE support via Language Server Protocol (autocomplete, etc.); well, if we use Haskell that's automatically ensured by haskell-language-server?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/24b62e7b62bbbc0f4f0617b5ccd66e6f8fe784f6?version=2"></a><div class="content"><a class="author">tristanC</a><div class="metadata"><a href="#217564485" name="217564485"><div>2020-11-22 18:58:39</div></a></div><div class="text"><p>Dhall also features a LSP implementation that can provides autocompletion, and it is working quite well without any configuration.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?version=2"></a><div class="content"><a class="author">Bolt</a><div class="metadata"><a href="#217568204" name="217568204"><div>2020-11-22 20:25:02</div></a></div><div class="text"><p>That would be indeed a interesting project</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#217574960" name="217574960"><div>2020-11-22 23:01:14</div></a></div><div class="text"><p>There is a 4 years old attempt here: <a href="https://github.com/vlad-shatskyi/i3wm-config-haskell">https://github.com/vlad-shatskyi/i3wm-config-haskell</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/vlad-shatskyi/i3wm-config-haskell" style="background-image: url(https://avatars2.githubusercontent.com/u/188928?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/vlad-shatskyi/i3wm-config-haskell" title="vlad-shatskyi/i3wm-config-haskell">vlad-shatskyi/i3wm-config-haskell</a></div><div class="message_embed_description">A DSL for writing type-safe and convenient i3 configs. - vlad-shatskyi/i3wm-config-haskell</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#217574965" name="217574965"><div>2020-11-22 23:01:25</div></a></div><div class="text"><p>Can we free monads (polysemy) to define this DSL?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#217575142" name="217575142"><div>2020-11-22 23:04:30</div></a></div><div class="text"><p>If we have a library/app like this, we can extend it further by enabling people to write "plugins" in Haskell.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#217575153" name="217575153"><div>2020-11-22 23:04:55</div></a></div><div class="text"><p>Actually, that can also happen independent (at runtime) via <a href="https://github.com/leshow/i3ipc#readme">https://github.com/leshow/i3ipc#readme</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/leshow/i3ipc#readme" style="background-image: url(https://avatars3.githubusercontent.com/u/1128302?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/leshow/i3ipc#readme" title="leshow/i3ipc">leshow/i3ipc</a></div><div class="message_embed_description">Types and bindings for communicating with i3 in Haskell - leshow/i3ipc</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/6993700afed2401966615bcf17c6e94c"></a><div class="content"><a class="author">Kampouse</a><div class="metadata"><a href="#217619324" name="217619324"><div>2020-11-23 12:01:47</div></a></div><div class="text"><p>Why would one bind i3 when there xmonad <span aria-label="flushed" class="emoji emoji-1f633" role="img" title="flushed">:flushed:</span></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#217679973" name="217679973"><div>2020-11-23 20:38:28</div></a></div><div class="text"><p>Last I tried xmonad was as a Haskell n00b. I couldn't figure out flexible colums layout like you can do in i3. Maybe I should give it another try.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#217680011" name="217680011"><div>2020-11-23 20:38:59</div></a></div><div class="text"><p>btw, whatever happened to <a href="https://github.com/waymonad/waymonad">https://github.com/waymonad/waymonad</a> ? seems like inactive for a year</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/waymonad/waymonad" style="background-image: url(https://avatars3.githubusercontent.com/u/37510258?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/waymonad/waymonad" title="waymonad/waymonad">waymonad/waymonad</a></div><div class="message_embed_description">A wayland compositor based on ideas from and inspired by xmonad - waymonad/waymonad</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/6993700afed2401966615bcf17c6e94c"></a><div class="content"><a class="author">Kampouse</a><div class="metadata"><a href="#217759624" name="217759624"><div>2020-11-24 14:20:58</div></a></div><div class="text"><p>Abandonned i guess <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span>‍♂️</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/6993700afed2401966615bcf17c6e94c"></a><div class="content"><a class="author">Kampouse</a><div class="metadata"><a href="#217759784" name="217759784"><div>2020-11-24 14:22:05</div></a></div><div class="text"><p>Am probably one of the person that know the least haskell and manage to make work Xmonad <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#217764224" name="217764224"><div>2020-11-24 14:56:06</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="251311">Sridhar Ratnakumar</span> <a href="#narrow/stream/201385-Haskell/topic/i3.20configuration.20in.20Haskell/near/217679973">said</a>:</p>
<blockquote>
<p>Last I tried xmonad was as a Haskell n00b. I couldn't figure out flexible colums layout like you can do in i3. Maybe I should give it another try.</p>
</blockquote>
<p>I found <a href="https://unix.stackexchange.com/questions/48679/how-do-i-enable-a-three-column-layout-in-xmonad">https://unix.stackexchange.com/questions/48679/how-do-i-enable-a-three-column-layout-in-xmonad</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://unix.stackexchange.com/questions/48679/how-do-i-enable-a-three-column-layout-in-xmonad" style="background-image: url(https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png?v=32fb07f7ce26)"></a><div class="data-container"><div class="message_embed_title"><a href="https://unix.stackexchange.com/questions/48679/how-do-i-enable-a-three-column-layout-in-xmonad" title="How do I enable a three column layout in XMonad?">How do I enable a three column layout in XMonad?</a></div><div class="message_embed_description">I'm a Haskell and XMonad beginner. I'm trying to set up my tiling layout to allow three side by side columns (so that I can have three simultaneous tall and thin Vim instances for coding, per works...</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#217764383" name="217764383"><div>2020-11-24 14:57:24</div></a></div><div class="text"><p>BTW, how does XMonad work actually? <code>xmonad.hs</code> is the WM itself, or it's used by XMonad to load config and custom features in some way?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/67dba8dccee74946586f0fa81945a7ce22dc273b?version=2"></a><div class="content"><a class="author">Mats Rauhala</a><div class="metadata"><a href="#217765225" name="217765225"><div>2020-11-24 15:03:05</div></a></div><div class="text"><p>xmonad.hs:</p>
<div class="codehilite"><pre><span></span><code>main :: IO ()
main = xmonad defaultXConfig{...}
</code></pre></div>
<p>so it's the WM itself, taking a configuration value</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#217787253" name="217787253"><div>2020-11-24 17:31:59</div></a></div><div class="text"><p><span class="user-mention" data-user-id="225127">@TheMatten</span> Just 3? Not 4? In i3 you hit <code>Ctrl+h</code> and it opens the new windows across horizontally. No limits to number of columns or rows, hence "flexible".  But I'll give xmonad another try, now that I'm comfortable with Haskell; it probably will require substantial Haskell code to get it to do what I want.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#217787381" name="217787381"><div>2020-11-24 17:32:50</div></a></div><div class="text"><p>I also want to edit my xmonad configuration (xmonad.hs) using haskell-language-server for full IDE support. I smell an awesome blog post coming ...</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#217787432" name="217787432"><div>2020-11-24 17:33:12</div></a></div><div class="text"><p>"Edit your WM configuration with autocomplete, etc. Can your WM do this?"</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#217787963" name="217787963"><div>2020-11-24 17:37:08</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="251311">Sridhar Ratnakumar</span> <a href="#narrow/stream/201385-Haskell/topic/i3.20configuration.20in.20Haskell/near/217787253">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="225127">TheMatten</span> Just 3? Not 4? In i3 you hit <code>Ctrl+h</code> and it opens the new windows across horizontally. No limits to number of columns or rows, hence "flexible".  But I'll give xmonad another try, now that I'm comfortable with Haskell; it probably will require substantial Haskell code to get it to do what I want.</p>
</blockquote>
<p>I looked through <code>xmonad-contrib</code> and there seems to be one more layout - <a href="https://hackage.haskell.org/package/xmonad-contrib-0.16/docs/XMonad-Layout-MultiColumns.html">https://hackage.haskell.org/package/xmonad-contrib-0.16/docs/XMonad-Layout-MultiColumns.html</a></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#217937689" name="217937689"><div>2020-11-25 20:51:06</div></a></div><div class="text"><p><a href="https://twitter.com/sridca/status/1331701938556166150">https://twitter.com/sridca/status/1331701938556166150</a></p>
<div class="inline-preview-twitter"><div class="twitter-tweet"><a href="https://twitter.com/sridca/status/1331701938556166150"><img class="twitter-avatar" src="https://pbs.twimg.com/profile_images/1278707979462881280/piRvgOXO_normal.jpg"></a><p>Editing <a href="https://twitter.com/xmonad">@xmonad</a> "configuration" with full IDE support in <a href="https://twitter.com/code">@code</a> thanks to <a href="https://twitter.com/nixos_org">@nixos_org</a>, nix and haskell-language-server.

Can your window manager do this?

<a href="https://t.co/xOtcnmzq3b">https://github.com/srid/nix-config/tree/64e3d5de3383172e95b504dd8e410e62302f3632/nixos/xmonad-srid</a> <a href="https://t.co/bc2hrMfQYn">https://twitter.com/sridca/status/1331701938556166150/photo/1</a></p><span>- Devil May Care (@sridca)</span><div class="twitter-image"><a href="https://t.co/bc2hrMfQYn"><img src="https://pbs.twimg.com/media/EnsnfAGXUA4t6Ho.jpg:small"></a></div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#218027253" name="218027253"><div>2020-11-26 18:04:34</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="364360">Kampouse</span> <a href="#narrow/stream/201385-Haskell/topic/i3.20configuration.20in.20Haskell/near/217619324">said</a>:</p>
<blockquote>
<p>Why would one bind i3 when there xmonad <span aria-label="flushed" class="emoji emoji-1f633" role="img" title="flushed">:flushed:</span></p>
</blockquote>
<p>Thanks for the nudge; I'm now a proud Xmonader <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>
<p><a href="https://www.srid.ca/xmonad-conf-ide.html">https://www.srid.ca/xmonad-conf-ide.html</a></p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/6993700afed2401966615bcf17c6e94c"></a><div class="content"><a class="author">Kampouse</a><div class="metadata"><a href="#218144875" name="218144875"><div>2020-11-28 03:25:41</div></a></div><div class="text"><p><span aria-label="flushed" class="emoji emoji-1f633" role="img" title="flushed">:flushed:</span> sorry <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p></div></div></div></div></div><div class="ui vertical footer segment"><a href="https://github.com/srid/zulip-archive">Powered by Haskell</a> | Questions? Contact <a href="https://www.srid.ca">srid</a></div></div></body></html>