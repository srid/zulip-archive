<html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="How do type family promotions work? If I have F  :: Bool -&gt; Type, how can I fill a hole of type F b, or even F &#39;True for that matter? Concrete example
{-# LANGUAGE AllowAmbiguousTypes #-}
{-# LANGUAGE DataKinds #-}
{-# LANGUAGE GADTs #-}
{-# LANGUAGE PolyKinds #-}
{-# LANGUAGE TypeFamilies #-}

data" name="description"><link href="https://funprog.srid.ca/haskell/promoted-type-families.html" rel="canonical"><meta property="og:title" content="Promoted type families - Haskell"><meta property="og:site_name" content="Functional Programming Zulip Archive"><meta property="og:type" content="article"><meta property="og:article:section" content="Haskell"><meta property="og:article:modified_time" content="2021-03-30T12:57:26Z"><meta property="og:article:published_time" content="2021-03-30T10:57:53Z"><meta property="og:image" content="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"><title>Promoted type families - Haskell</title><style type="text/css">
div#thesite
{
  font-family   : "Open Sans", sans-serif;
  font-size     : 1em !important;
  margin-top    : 1em;
  margin-bottom : 1em;
}

div#thesite h1
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h2
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h3
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h4
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h5
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h6
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .ui.breadcrumb.rib .section
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .as-header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite code, pre, tt
{
  font-family : "SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace;
}

div#thesite .ui.breadcrumb.rib
{
  margin-bottom : 1em;
}



div#thesite .ui.comments.messages .comment .metadata a
{
  color : #808080;
}

div#thesite .ui.comments.messages .comment a.avatar img
{
  height : auto;
}

div#thesite .subtle
{
  color : #808080;
}


div#thesite .messages pre
{
  font-size : 85%;
  overflow  : auto;
  max-width : 100%;
}

div#thesite .messages .message_embed
{
  border-left  : solid 3px #808080;
  padding-left : 0.69999em;
}

div#thesite .messages .message_inline_image img
{
  max-width     : 100%;
  margin-bottom : 1em;
}


/* Generated with Clay, http://fvisser.nl/clay */</style><link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Open+Sans|Oswald&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto|Open+Sans&amp;display=swap" rel="stylesheet"></head><body><div id="thesite" class="ui text container"><div class="ui violet inverted top attached center aligned segment"><h1 class="ui huge header">Promoted type families - Haskell</h1></div><div class="ui attached segment"><div class="ui message"><p>Welcome to the Functional Programming Zulip Chat Archive. You can join the chat <a href="https://funprog.zulipchat.com">here</a>.</p></div><div class="ui breadcrumb rib"><a href="/" class="section">Home</a><i class="right angle icon divider"></i><a href="/haskell/" class="section">#Haskell</a><i class="right angle icon divider"></i><div class="active section">Promoted type families</div></div><div class="ui comments messages"><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232406528" name="232406528"><div>2021-03-30 10:57:53</div></a></div><div class="text"><p>How do type family promotions work? If I have <code>F  :: Bool -&gt; Type</code>, how can I fill a hole of type <code>F b</code>, or even <code>F 'True</code> for that matter? Concrete example</p>
<div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="cm">{-# LANGUAGE AllowAmbiguousTypes #-}</span>
<span class="cm">{-# LANGUAGE DataKinds #-}</span>
<span class="cm">{-# LANGUAGE GADTs #-}</span>
<span class="cm">{-# LANGUAGE PolyKinds #-}</span>
<span class="cm">{-# LANGUAGE TypeFamilies #-}</span>

<span class="kr">data</span> <span class="kt">Bla</span> <span class="p">(</span><span class="n">b</span> <span class="ow">::</span> <span class="kt">Bool</span><span class="p">)</span> <span class="ow">=</span> <span class="kt">Some</span> <span class="p">(</span><span class="kt">F</span> <span class="n">b</span><span class="p">)</span>

<span class="kr">type</span> <span class="kr">family</span> <span class="kt">F</span> <span class="p">(</span><span class="n">a</span> <span class="ow">::</span> <span class="kt">Bool</span><span class="p">)</span> <span class="kr">where</span>
  <span class="kt">F</span> <span class="kt">True</span> <span class="ow">=</span> <span class="kt">Int</span>
  <span class="kt">F</span> <span class="kt">False</span> <span class="ow">=</span> <span class="kt">Char</span>

<span class="kr">type</span> <span class="kr">family</span> <span class="kt">G</span> <span class="p">(</span><span class="n">b</span> <span class="ow">::</span> <span class="kt">Bool</span><span class="p">)</span> <span class="p">(</span><span class="n">a</span> <span class="ow">::</span> <span class="kt">F</span> <span class="n">b</span><span class="p">)</span> <span class="kr">where</span>
  <span class="kt">G</span> <span class="kt">True</span> <span class="o">&lt;</span><span class="n">what1</span><span class="o">&gt;</span> <span class="ow">=</span> <span class="kt">Int</span>

<span class="kr">data</span> <span class="kt">SBla</span> <span class="p">(</span><span class="n">a</span> <span class="ow">::</span> <span class="kt">F</span> <span class="n">b</span><span class="p">)</span> <span class="kr">where</span>
  <span class="kt">SSome</span> <span class="ow">::</span> <span class="kt">SBla</span> <span class="o">&lt;</span><span class="n">what2</span><span class="o">&gt;</span>
</code></pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232406599" name="232406599"><div>2021-03-30 10:58:20</div></a></div><div class="text"><p>what can I write in <code>&lt;what1&gt;</code> or in <code>&lt;what2&gt;</code>?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232406608" name="232406608"><div>2021-03-30 10:58:33</div></a></div><div class="text"><p>is there actually anything I can write there?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#232406769" name="232406769"><div>2021-03-30 11:00:11</div></a></div><div class="text"><p><code>Int</code> doesn't work?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232406910" name="232406910"><div>2021-03-30 11:01:30</div></a></div><div class="text"><p>ok so this is fine:</p>
<div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="cm">{-# LANGUAGE AllowAmbiguousTypes #-}</span>
<span class="cm">{-# LANGUAGE DataKinds #-}</span>
<span class="cm">{-# LANGUAGE GADTs #-}</span>
<span class="cm">{-# LANGUAGE PolyKinds #-}</span>
<span class="cm">{-# LANGUAGE TypeFamilies #-}</span>

<span class="kr">data</span> <span class="kt">Bla</span> <span class="p">(</span><span class="n">b</span> <span class="ow">::</span> <span class="kt">Bool</span><span class="p">)</span> <span class="ow">=</span> <span class="kt">Some</span> <span class="p">(</span><span class="kt">F</span> <span class="n">b</span><span class="p">)</span>

<span class="kr">data</span> <span class="kt">X</span> <span class="ow">=</span> <span class="kt">X</span>
<span class="kr">data</span> <span class="kt">Y</span> <span class="ow">=</span> <span class="kt">Y</span>

<span class="kr">type</span> <span class="kr">family</span> <span class="kt">F</span> <span class="p">(</span><span class="n">a</span> <span class="ow">::</span> <span class="kt">Bool</span><span class="p">)</span> <span class="kr">where</span>
  <span class="kt">F</span> <span class="kt">True</span> <span class="ow">=</span> <span class="kt">X</span>
  <span class="kt">F</span> <span class="kt">False</span> <span class="ow">=</span> <span class="kt">Y</span>

<span class="kr">type</span> <span class="kr">family</span> <span class="kt">G</span> <span class="p">(</span><span class="n">b</span> <span class="ow">::</span> <span class="kt">Bool</span><span class="p">)</span> <span class="p">(</span><span class="n">a</span> <span class="ow">::</span> <span class="kt">F</span> <span class="n">b</span><span class="p">)</span> <span class="kr">where</span>
  <span class="kt">G</span> <span class="kt">True</span> <span class="kt">'X</span> <span class="ow">=</span> <span class="kt">Int</span>

<span class="kr">data</span> <span class="kt">SBla</span> <span class="p">(</span><span class="n">b</span> <span class="ow">::</span> <span class="kt">Bool</span><span class="p">)</span> <span class="p">(</span><span class="n">a</span> <span class="ow">::</span> <span class="kt">F</span> <span class="n">b</span><span class="p">)</span> <span class="kr">where</span>
  <span class="kt">SSome</span> <span class="ow">::</span> <span class="kt">SBla</span> <span class="kt">'True</span> <span class="kt">'X</span>
</code></pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#232406915" name="232406915"><div>2021-03-30 11:01:35</div></a></div><div class="text"><p>nah don't make sene</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232406927" name="232406927"><div>2021-03-30 11:01:44</div></a></div><div class="text"><p>when I fix what <code>b</code> is</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232406929" name="232406929"><div>2021-03-30 11:01:46</div></a></div><div class="text"><p>however..</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#232407006" name="232407006"><div>2021-03-30 11:02:19</div></a></div><div class="text"><p>I can't imagine that it works any other way</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232407051" name="232407051"><div>2021-03-30 11:02:48</div></a></div><div class="text"><p>my real issue is when I try to parametrise over b</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232407054" name="232407054"><div>2021-03-30 11:02:49</div></a></div><div class="text"><p>something like</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232407056" name="232407056"><div>2021-03-30 11:02:53</div></a></div><div class="text"><div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="cm">{-# LANGUAGE AllowAmbiguousTypes #-}</span>
<span class="cm">{-# LANGUAGE DataKinds #-}</span>
<span class="cm">{-# LANGUAGE GADTs #-}</span>
<span class="cm">{-# LANGUAGE PolyKinds #-}</span>
<span class="cm">{-# LANGUAGE TypeFamilies #-}</span>

<span class="kr">data</span> <span class="kt">Bla</span> <span class="p">(</span><span class="n">b</span> <span class="ow">::</span> <span class="kt">Bool</span><span class="p">)</span> <span class="ow">=</span> <span class="kt">Some</span> <span class="p">(</span><span class="kt">F</span> <span class="n">b</span><span class="p">)</span>

<span class="kr">data</span> <span class="kt">X</span> <span class="ow">=</span> <span class="kt">X</span>

<span class="kr">data</span> <span class="kt">Y</span> <span class="ow">=</span> <span class="kt">Y</span>

<span class="kr">type</span> <span class="kr">family</span> <span class="kt">F</span> <span class="p">(</span><span class="n">a</span> <span class="ow">::</span> <span class="kt">Bool</span><span class="p">)</span> <span class="kr">where</span>
  <span class="kt">F</span> <span class="kt">True</span> <span class="ow">=</span> <span class="kt">X</span>
  <span class="kt">F</span> <span class="kt">False</span> <span class="ow">=</span> <span class="kt">Y</span>

<span class="kr">data</span> <span class="kt">SBla</span> <span class="p">(</span><span class="n">b</span> <span class="ow">::</span> <span class="kt">Bool</span><span class="p">)</span> <span class="p">(</span><span class="n">a</span> <span class="ow">::</span> <span class="kt">F</span> <span class="n">b</span><span class="p">)</span> <span class="kr">where</span>
  <span class="kt">SSome</span> <span class="ow">::</span> <span class="kt">SBool</span> <span class="n">b</span> <span class="ow">-&gt;</span> <span class="kt">SBla</span> <span class="n">b</span> <span class="p">(</span><span class="kt">'Some</span> <span class="p">(</span><span class="kt">F</span> <span class="n">b</span><span class="p">))</span>

<span class="kr">data</span> <span class="kt">SBool</span> <span class="p">(</span><span class="n">a</span> <span class="ow">::</span> <span class="kt">Bool</span><span class="p">)</span> <span class="kr">where</span>
  <span class="kt">STrue</span> <span class="ow">::</span> <span class="kt">SBool</span> <span class="kt">True</span>
  <span class="kt">SFalse</span> <span class="ow">::</span> <span class="kt">SBool</span> <span class="kt">False</span>
</code></pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232407115" name="232407115"><div>2021-03-30 11:03:25</div></a></div><div class="text"><div class="codehilite"><pre><span></span><code>tyfam.hs:18:31: error:
    • Expected kind ‘F b1’, but ‘F b’ has kind ‘*’
    • In the second argument of ‘SBla’, namely ‘(F b)’
      In the type ‘SBla b (F b)’
      In the definition of data constructor ‘SSome’
   |
18 |   SSome :: SBool b -&gt; SBla b (F b)
   |                               ^^^
</code></pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#232407184" name="232407184"><div>2021-03-30 11:04:04</div></a></div><div class="text"><p>why are you using the kind instead of <code>a</code>?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232407216" name="232407216"><div>2021-03-30 11:04:19</div></a></div><div class="text"><p>oops</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232407255" name="232407255"><div>2021-03-30 11:04:47</div></a></div><div class="text"><p>I've totally messed up</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232407257" name="232407257"><div>2021-03-30 11:04:48</div></a></div><div class="text"><p>sec</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232407314" name="232407314"><div>2021-03-30 11:05:20</div></a></div><div class="text"><p>although in essence, the error seems to be the same</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232407458" name="232407458"><div>2021-03-30 11:06:37</div></a></div><div class="text"><div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="cm">{-# LANGUAGE AllowAmbiguousTypes #-}</span>
<span class="cm">{-# LANGUAGE DataKinds #-}</span>
<span class="cm">{-# LANGUAGE GADTs #-}</span>
<span class="cm">{-# LANGUAGE PolyKinds #-}</span>
<span class="cm">{-# LANGUAGE TypeFamilies #-}</span>

<span class="kr">data</span> <span class="kt">Bla</span> <span class="p">(</span><span class="n">b</span> <span class="ow">::</span> <span class="kt">Bool</span><span class="p">)</span> <span class="ow">=</span> <span class="kt">Some</span> <span class="p">(</span><span class="kt">F</span> <span class="n">b</span><span class="p">)</span>

<span class="kr">data</span> <span class="kt">X</span> <span class="ow">=</span> <span class="kt">X</span>

<span class="kr">data</span> <span class="kt">Y</span> <span class="ow">=</span> <span class="kt">Y</span>

<span class="kr">type</span> <span class="kr">family</span> <span class="kt">F</span> <span class="p">(</span><span class="n">a</span> <span class="ow">::</span> <span class="kt">Bool</span><span class="p">)</span> <span class="kr">where</span>
  <span class="kt">F</span> <span class="kt">True</span> <span class="ow">=</span> <span class="kt">X</span>
  <span class="kt">F</span> <span class="kt">False</span> <span class="ow">=</span> <span class="kt">Y</span>

<span class="kr">data</span> <span class="kt">SBla</span> <span class="p">(</span><span class="n">b</span> <span class="ow">::</span> <span class="kt">Bool</span><span class="p">)</span> <span class="p">(</span><span class="n">a</span> <span class="ow">::</span> <span class="kt">Bla</span> <span class="n">b</span><span class="p">)</span> <span class="kr">where</span>
  <span class="kt">SSome</span> <span class="ow">::</span> <span class="kt">SBool</span> <span class="n">b</span> <span class="ow">-&gt;</span> <span class="kt">SBla</span> <span class="n">b</span> <span class="p">(</span><span class="kt">'Some</span> <span class="p">(</span><span class="kt">F</span> <span class="n">b</span><span class="p">))</span>

<span class="kr">data</span> <span class="kt">SBool</span> <span class="p">(</span><span class="n">a</span> <span class="ow">::</span> <span class="kt">Bool</span><span class="p">)</span> <span class="kr">where</span>
  <span class="kt">STrue</span> <span class="ow">::</span> <span class="kt">SBool</span> <span class="kt">True</span>
  <span class="kt">SFalse</span> <span class="ow">::</span> <span class="kt">SBool</span> <span class="kt">False</span>
</code></pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232407478" name="232407478"><div>2021-03-30 11:06:52</div></a></div><div class="text"><div class="codehilite"><pre><span></span><code>tyfam.hs:18:38: error:
    • Expected kind ‘F b1’, but ‘F b’ has kind ‘*’
    • In the first argument of ‘&#39;Some’, namely ‘(F b)’
      In the second argument of ‘SBla’, namely ‘(&#39;Some (F b))’
      In the type ‘SBla b (&#39;Some (F b))’
   |
18 |   SSome :: SBool b -&gt; SBla b (&#39;Some (F b))
   |                                      ^^^
</code></pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232407501" name="232407501"><div>2021-03-30 11:07:06</div></a></div><div class="text"><p>so what do you mean?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#232407639" name="232407639"><div>2021-03-30 11:08:30</div></a></div><div class="text"><p><code>Some (F b)</code> and <code>'Some (F b)</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#232407703" name="232407703"><div>2021-03-30 11:09:12</div></a></div><div class="text"><p>how does that work</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#232407836" name="232407836"><div>2021-03-30 11:10:15</div></a></div><div class="text"><p><code>Some</code> expects something of type <code>F b</code> and you're passing it the type <code>F b</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#232407861" name="232407861"><div>2021-03-30 11:10:30</div></a></div><div class="text"><p>it should be <code>'X</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#232407951" name="232407951"><div>2021-03-30 11:11:39</div></a></div><div class="text"><p><code>F (a :: Bool) :: Type</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#232408059" name="232408059"><div>2021-03-30 11:12:26</div></a></div><div class="text"><p><code>Bla 'True = Some X</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#232408100" name="232408100"><div>2021-03-30 11:12:58</div></a></div><div class="text"><p>nope also not, you cannot pass a type to <code>'Some</code> at all</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#232408121" name="232408121"><div>2021-03-30 11:13:10</div></a></div><div class="text"><p>it must be the value <code>X</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232414696" name="232414696"><div>2021-03-30 12:15:21</div></a></div><div class="text"><p>but I can't know of which type I need to give a value</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232414707" name="232414707"><div>2021-03-30 12:15:25</div></a></div><div class="text"><p>because the type family is stuck</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232414723" name="232414723"><div>2021-03-30 12:15:33</div></a></div><div class="text"><p>so I guess  i need a type family</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232414732" name="232414732"><div>2021-03-30 12:15:39</div></a></div><div class="text"><p>that analyses b</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232414739" name="232414739"><div>2021-03-30 12:15:43</div></a></div><div class="text"><p>and produces the correct value</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232414759" name="232414759"><div>2021-03-30 12:15:51</div></a></div><div class="text"><p>good! I'll try it out in a bit</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232414775" name="232414775"><div>2021-03-30 12:15:56</div></a></div><div class="text"><p>although the solution kind of sucks</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#232414963" name="232414963"><div>2021-03-30 12:17:22</div></a></div><div class="text"><p>well at that point you can't give a value at all</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#232414976" name="232414976"><div>2021-03-30 12:17:34</div></a></div><div class="text"><p>since you're using a promoted constructor</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#232415107" name="232415107"><div>2021-03-30 12:18:34</div></a></div><div class="text"><p>in a type</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232420174" name="232420174"><div>2021-03-30 12:57:15</div></a></div><div class="text"><p>I can, it's fine</p>
<div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="kr">type</span> <span class="kr">family</span> <span class="kt">F'</span> <span class="p">(</span><span class="n">a</span> <span class="ow">::</span> <span class="kt">Bool</span><span class="p">)</span> <span class="ow">::</span> <span class="kt">F</span> <span class="n">a</span> <span class="kr">where</span>
  <span class="kt">F'</span> <span class="kt">True</span> <span class="ow">=</span> <span class="kt">'X</span>
  <span class="kt">F'</span> <span class="kt">False</span> <span class="ow">=</span> <span class="kt">'Y</span>

<span class="kr">data</span> <span class="kt">SBla</span> <span class="p">(</span><span class="n">b</span> <span class="ow">::</span> <span class="kt">Bool</span><span class="p">)</span> <span class="p">(</span><span class="n">a</span> <span class="ow">::</span> <span class="kt">Bla</span> <span class="n">b</span><span class="p">)</span> <span class="kr">where</span>
  <span class="kt">SSome</span> <span class="ow">::</span> <span class="kt">SBool</span> <span class="n">b</span> <span class="ow">-&gt;</span> <span class="kt">SBla</span> <span class="n">b</span> <span class="p">(</span><span class="kt">'Some</span> <span class="p">(</span><span class="kt">F'</span> <span class="n">b</span><span class="p">))</span>
</code></pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#232420197" name="232420197"><div>2021-03-30 12:57:26</div></a></div><div class="text"><p>just annoying</p></div></div></div></div></div><div class="ui vertical footer segment"><a href="https://github.com/srid/zulip-archive">Powered by Haskell</a> | Questions? Contact <a href="https://www.srid.ca">srid</a></div></div></body></html>