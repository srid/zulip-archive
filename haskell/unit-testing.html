<html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="Hello guys!
Could you, please, share your thoughts how you would go about unit testing the following code.
It has interpreters for making http GET and POST requests. The implementation has internal state,
that stores cookies between requests, as well as adds a constant user agent string to all reque" name="description"><link href="https://funprog.srid.ca/haskell/unit-testing.html" rel="canonical"><meta property="og:title" content="Unit Testing - Haskell"><meta property="og:site_name" content="Functional Programming Zulip Archive"><meta property="og:type" content="article"><meta property="og:article:section" content="Haskell"><meta property="og:article:modified_time" content="2020-12-13T09:04:43Z"><meta property="og:article:published_time" content="2020-12-13T09:04:43Z"><meta property="og:image" content="https://secure.gravatar.com/avatar/d2db3d03d695bf8ed6212f413d1f44b3?d=identicon&amp;version=1"><title>Unit Testing - Haskell</title><style type="text/css">
div#thesite
{
  font-family   : "Open Sans", sans-serif;
  font-size     : 1em !important;
  margin-top    : 1em;
  margin-bottom : 1em;
}

div#thesite h1
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h2
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h3
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h4
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h5
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h6
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .ui.breadcrumb.rib .section
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .as-header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite code, pre, tt
{
  font-family : "SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace;
}

div#thesite .ui.breadcrumb.rib
{
  margin-bottom : 1em;
}



div#thesite .ui.comments.messages .comment .metadata a
{
  color : #808080;
}

div#thesite .ui.comments.messages .comment a.avatar img
{
  height : auto;
}

div#thesite .subtle
{
  color : #808080;
}


div#thesite .messages pre
{
  font-size : 85%;
  overflow  : auto;
  max-width : 100%;
}

div#thesite .messages .message_embed
{
  border-left  : solid 3px #808080;
  padding-left : 0.69999em;
}

div#thesite .messages .message_inline_image img
{
  max-width     : 100%;
  margin-bottom : 1em;
}


/* Generated with Clay, http://fvisser.nl/clay */</style><link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Open+Sans|Oswald&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto|Open+Sans&amp;display=swap" rel="stylesheet"></head><body><div id="thesite" class="ui text container"><div class="ui violet inverted top attached center aligned segment"><h1 class="ui huge header">Unit Testing - Haskell</h1></div><div class="ui attached segment"><div class="ui message"><p>Welcome to the Functional Programming Zulip Chat Archive. You can join the chat <a href="https://funprog.zulipchat.com">here</a>.</p></div><div class="ui breadcrumb rib"><a href="/" class="section">Home</a><i class="right angle icon divider"></i><a href="/haskell/" class="section">#Haskell</a><i class="right angle icon divider"></i><div class="active section">Unit Testing</div></div><div class="ui comments messages"><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/d2db3d03d695bf8ed6212f413d1f44b3?d=identicon&amp;version=1"></a><div class="content"><a class="author">Martins</a><div class="metadata"><a href="#219752522" name="219752522"><div>2020-12-13 09:04:43</div></a></div><div class="text"><p>Hello guys!</p>
<p>Could you, please, share your thoughts how you would go about <strong>unit testing</strong> the following code.<br>
It has interpreters for making http <em>GET</em> and <em>POST</em> requests. The implementation has internal state,<br>
that stores cookies between requests, as well as adds a constant user agent string to all requests.</p>
<p><a href="https://gist.github.com/martinserts/d206b7778f3a4f4782dcf16077d4b794">https://gist.github.com/martinserts/d206b7778f3a4f4782dcf16077d4b794</a></p>
<p>I would like to test at least the following scenarios:</p>
<ol>
<li>Requests are delegated to <em>Network.HTTP.Req</em>.</li>
<li>Cookies are retained between multiple requests.</li>
<li>Outgoing requests contain our custom user agent string</li>
</ol>
<p>In <strong>Scala</strong>, I would use a <em>mocking framework</em> such as <strong>mockito,</strong> and verify outgoing calls.<br>
In <strong>Haskell</strong> it's probably much different.</p>
<p>May be you could share some Haskell projects with exemplary unit testing that I could learn from?</p>
<div class="message_embed"><a class="message_embed_image" href="https://gist.github.com/martinserts/d206b7778f3a4f4782dcf16077d4b794" style="background-image: url(https://github.githubassets.com/images/modules/gists/gist-og-image.png)"></a><div class="data-container"><div class="message_embed_title"><a href="https://gist.github.com/martinserts/d206b7778f3a4f4782dcf16077d4b794" title="HttpClient.hs">HttpClient.hs</a></div><div class="message_embed_description">GitHub Gist: instantly share code, notes, and snippets.</div></div></div></div></div></div></div></div><div class="ui vertical footer segment"><a href="https://github.com/srid/zulip-archive">Powered by Haskell</a> | Questions? Contact <a href="https://www.srid.ca">srid</a></div></div></body></html>