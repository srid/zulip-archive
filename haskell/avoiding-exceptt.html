<html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="What are the alternatives to ExceptT (https://www.fpcomplete.com/blog/2017/06/readert-design-pattern/ doesn&#39;t list any)? I do like being able to short circuit with throwError and friends, however I&#39;m open to changing how I do control flow for IO computations where one needs to do a bunch of checks b" name="description"><link href="https://funprog.srid.ca/haskell/avoiding-exceptt.html" rel="canonical"><meta property="og:title" content="Avoiding ExceptT - Haskell"><meta property="og:site_name" content="Functional Programming Zulip Archive"><meta property="og:type" content="article"><meta property="og:article:section" content="Haskell"><meta property="og:article:modified_time" content="2020-11-06T21:34:01Z"><meta property="og:article:published_time" content="2020-11-06T21:03:29Z"><title>Avoiding ExceptT - Haskell</title><style type="text/css">
div#thesite
{
  font-family   : "Open Sans", sans-serif;
  font-size     : 1em !important;
  margin-top    : 1em;
  margin-bottom : 1em;
}

div#thesite h1
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h2
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h3
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h4
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h5
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h6
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .ui.breadcrumb.rib .section
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .as-header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite code, pre, tt
{
  font-family : "SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace;
}

div#thesite .ui.breadcrumb.rib
{
  margin-bottom : 1em;
}



div#thesite .ui.comments.messages .comment .metadata a
{
  color : #808080;
}

div#thesite .ui.comments.messages .comment a.avatar img
{
  height : auto;
}

div#thesite .subtle
{
  color : #808080;
}


div#thesite .messages pre
{
  font-size : 85%;
  overflow  : auto;
  max-width : 100%;
}

div#thesite .messages .message_embed
{
  border-left  : solid 3px #808080;
  padding-left : 0.69999em;
}

div#thesite .messages .message_inline_image img
{
  max-width     : 100%;
  margin-bottom : 1em;
}


/* Generated with Clay, http://fvisser.nl/clay */</style><link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Open+Sans|Oswald&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto|Open+Sans&amp;display=swap" rel="stylesheet"></head><body><div id="thesite" class="ui text container"><div class="ui violet inverted top attached center aligned segment"><h1 class="ui huge header">Avoiding ExceptT - Haskell</h1></div><div class="ui attached segment"><div class="ui message"><p>Welcome to the Functional Programming Zulip Chat Archive. You can join the chat <a href="https://funprog.zulipchat.com">here</a>.</p></div><div class="ui breadcrumb rib"><a href="/" class="section">Home</a><i class="right angle icon divider"></i><a href="/haskell/" class="section">#Haskell</a><i class="right angle icon divider"></i><div class="active section">Avoiding ExceptT</div></div><div class="ui comments messages"><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/753f1ed8a3523d8eda77225f71d65cee"></a><div class="content"><a class="author">Adam Flott</a><div class="metadata"><a href="#215903644" name="215903644"><div>2020-11-06 21:03:29</div></a></div><div class="text"><p>What are the alternatives to <code>ExceptT</code> (<a href="https://www.fpcomplete.com/blog/2017/06/readert-design-pattern/">https://www.fpcomplete.com/blog/2017/06/readert-design-pattern/</a> doesn't list any)? I do like being able to short circuit with <code>throwError</code> and friends, however I'm open to changing how I do control flow for IO computations where one needs to do a bunch of checks before anything can happen (e.g. check env var exists, etc)</p>
<div class="message_embed"><a class="message_embed_image" href="https://www.fpcomplete.com/blog/2017/06/readert-design-pattern/" style="background-image: url(https://www.fpcomplete.com/images/footer-logo.png)"></a><div class="data-container"><div class="message_embed_title"><a href="https://www.fpcomplete.com/blog/2017/06/readert-design-pattern/" title="The ReaderT Design Pattern">The ReaderT Design Pattern</a></div><div class="message_embed_description">Haskell isn't usually a language known for C++-style design patterns. Here's one counter-example, showing how to structure your applications.</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/753f1ed8a3523d8eda77225f71d65cee"></a><div class="content"><a class="author">Adam Flott</a><div class="metadata"><a href="#215903751" name="215903751"><div>2020-11-06 21:04:16</div></a></div><div class="text"><p>I do find it odd that relude exports ExceptT but not throwError, but maybe I'm missing something</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#215904553" name="215904553"><div>2020-11-06 21:10:45</div></a></div><div class="text"><p>what are your requirements?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#215904678" name="215904678"><div>2020-11-06 21:11:46</div></a></div><div class="text"><p>if all your checks are "before anything can happen", then wouldn't you need it at all?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/753f1ed8a3523d8eda77225f71d65cee"></a><div class="content"><a class="author">Adam Flott</a><div class="metadata"><a href="#215904967" name="215904967"><div>2020-11-06 21:14:21</div></a></div><div class="text"><p>Breaking out of the computation at any point. I do a lot of IO and already using a ReaderT/StateT stack, looking for a good way to have a return (from imperative-land) like mechanism for terminating early</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#215905204" name="215905204"><div>2020-11-06 21:16:41</div></a></div><div class="text"><p>do you know for which aspects of <code>ExceptT</code> you're trying to find alternatives?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/753f1ed8a3523d8eda77225f71d65cee"></a><div class="content"><a class="author">Adam Flott</a><div class="metadata"><a href="#215905567" name="215905567"><div>2020-11-06 21:20:34</div></a></div><div class="text"><div class="codehilite"><pre><span></span><code>f = do
    x &lt;- someIOf1
    whenLeft x (\err -&gt; leave err)
    y &lt;- someIOf2
    whenNothing y (leave NotFound)
   ....
</code></pre></div>
<p>where <code>leave</code> terminates early</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#215906019" name="215906019"><div>2020-11-06 21:25:29</div></a></div><div class="text"><p>I'd say that <code>ExceptT</code> is such a basic encoding of this pattern that there is little that gives you the same semantics with a significantly different implementation. Maybe <code>Cont</code> can provide something similar, but it is vastly more powerful.</p>
<p>and downwards, there's using <code>Either</code> directly or just returning <code>()</code> if no output is expected.</p>
<p>Do you see a problem with <code>ExceptT</code> or are you just wondering?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/753f1ed8a3523d8eda77225f71d65cee"></a><div class="content"><a class="author">Adam Flott</a><div class="metadata"><a href="#215906214" name="215906214"><div>2020-11-06 21:27:33</div></a></div><div class="text"><p>Wondering, I'm happy to use <code>ExceptT</code> just wanted more options/someone who's dived into the topic more to say "use this for x and y reasons".  Ultimately, trying to find good ways to present code to imperative-based readers</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#215906293" name="215906293"><div>2020-11-06 21:28:16</div></a></div><div class="text"><p>then I'd say that you're pretty safe with <code>ExceptT</code>! unless you want to throw exceptions <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/753f1ed8a3523d8eda77225f71d65cee"></a><div class="content"><a class="author">Adam Flott</a><div class="metadata"><a href="#215906378" name="215906378"><div>2020-11-06 21:29:23</div></a></div><div class="text"><p>And by that do  you mean the warning from <a href="http://hackage.haskell.org/package/mtl-2.2.2/docs/Control-Monad-Except.html">http://hackage.haskell.org/package/mtl-2.2.2/docs/Control-Monad-Except.html</a> ?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#215906482" name="215906482"><div>2020-11-06 21:30:07</div></a></div><div class="text"><p>yes. are you unfamiliar?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/753f1ed8a3523d8eda77225f71d65cee"></a><div class="content"><a class="author">Adam Flott</a><div class="metadata"><a href="#215906701" name="215906701"><div>2020-11-06 21:32:32</div></a></div><div class="text"><p>Ah ok, then a quick glance at the source says why. My brain parses that as "don't throw exceptions from something named except(ion)" which causes confusion. But, naming is hard!</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#215906773" name="215906773"><div>2020-11-06 21:33:18</div></a></div><div class="text"><p>ah no, I just implicitly assumed that you wouldn't want to use the runtime system's untyped exception feature!</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?version=4"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#215906838" name="215906838"><div>2020-11-06 21:34:01</div></a></div><div class="text"><p>although if you are 100% certain that all your exceptions should end the program, there's probably nothing wrong with using them.</p></div></div></div></div></div><div class="ui vertical footer segment"><a href="https://github.com/srid/zulip-archive">Powered by Haskell</a> | Questions? Contact <a href="https://www.srid.ca">srid</a></div></div></body></html>