<html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="looking pretty good so far for me, my nix project with 20 cradles seems to work better now" name="description"><link href="https://funprog.srid.ca/haskell/ghcide-0-3-0-release.html" rel="canonical"><meta property="og:title" content="ghcide 0.3.0 release! - Haskell"><meta property="og:site_name" content="Functional Programming Zulip Archive"><meta property="og:type" content="article"><meta property="og:article:section" content="Haskell"><meta property="og:article:modified_time" content="2020-09-04T19:36:53Z"><meta property="og:article:published_time" content="2020-09-03T00:10:17Z"><meta property="og:image" content="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?version=5"><title>ghcide 0.3.0 release! - Haskell</title><style type="text/css">
div#thesite
{
  font-family   : "Open Sans", sans-serif;
  font-size     : 1em !important;
  margin-top    : 1em;
  margin-bottom : 1em;
}

div#thesite h1
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h2
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h3
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h4
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h5
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h6
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .ui.breadcrumb.rib .section
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .as-header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite code, pre, tt
{
  font-family : "SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace;
}

div#thesite .ui.breadcrumb.rib
{
  margin-bottom : 1em;
}



div#thesite .ui.comments.messages .comment .metadata a
{
  color : #808080;
}

div#thesite .ui.comments.messages .comment a.avatar img
{
  height : auto;
}

div#thesite .subtle
{
  color : #808080;
}


div#thesite .messages pre
{
  font-size : 85%;
  overflow  : auto;
  max-width : 100%;
}

div#thesite .messages .message_embed
{
  border-left  : solid 3px #808080;
  padding-left : 0.69999em;
}

div#thesite .messages .message_inline_image img
{
  max-width     : 100%;
  margin-bottom : 1em;
}


/* Generated with Clay, http://fvisser.nl/clay */</style><link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Open+Sans|Oswald&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto|Open+Sans&amp;display=swap" rel="stylesheet"></head><body><div id="thesite" class="ui text container"><div class="ui violet inverted top attached center aligned segment"><h1 class="ui huge header">ghcide 0.3.0 release! - Haskell</h1></div><div class="ui attached segment"><div class="ui message"><p>Welcome to the Functional Programming Zulip Chat Archive. You can join the chat <a href="https://funprog.zulipchat.com">here</a>.</p></div><div class="ui breadcrumb rib"><a href="/" class="section">Home</a><i class="right angle icon divider"></i><a href="/haskell/" class="section">#Haskell</a><i class="right angle icon divider"></i><div class="active section">ghcide 0.3.0 release!</div></div><div class="ui comments messages"><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?version=5"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#208905379" name="208905379"><div>2020-09-03 00:10:17</div></a></div><div class="text"><p>looking pretty good so far for me, my nix project with 20 cradles seems to work better now</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#208919463" name="208919463"><div>2020-09-03 04:22:46</div></a></div><div class="text"><p>how do you install ghcide normally? nixpkgs?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?version=5"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#208945646" name="208945646"><div>2020-09-03 10:12:10</div></a></div><div class="text"><p>I think it's a safe bet nowadays, though I track master in my projects' ghc overlays mostly</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#208947556" name="208947556"><div>2020-09-03 10:34:17</div></a></div><div class="text"><p>I do <code>stack install</code> from their git repo, with the appropriate yaml<br>
it's "dirty" but I haven't had any issues</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?version=5"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#208947591" name="208947591"><div>2020-09-03 10:34:49</div></a></div><div class="text"><p>dirty is maybe a bit harsh.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?version=5"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#208947644" name="208947644"><div>2020-09-03 10:35:26</div></a></div><div class="text"><p>though it means that you can only use one ghc version for all projects, right?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#208950750" name="208950750"><div>2020-09-03 11:09:25</div></a></div><div class="text"><p>yup ;/ or rather I recompile it when I work on a project with a different ghc</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#208950765" name="208950765"><div>2020-09-03 11:09:33</div></a></div><div class="text"><p>you've set up your editor to call nix to get ghcide?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?version=5"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#208950929" name="208950929"><div>2020-09-03 11:11:12</div></a></div><div class="text"><p>yup, like this:</p>
<div class="codehilite"><pre><span></span><code><span class="ch">#!/usr/bin/env zsh</span>

<span class="k">if</span> <span class="o">[[</span> -f <span class="nv">$PWD</span>/default.nix <span class="o">]]</span>
<span class="k">then</span>
  nix-shell --run <span class="s2">&quot;systemd-run --user --scope -p MemoryLimit=15G ghcide </span><span class="nv">$@</span><span class="s2">&quot;</span>
<span class="k">else</span>
  <span class="nb">exec</span> ghcide <span class="nv">$@</span>
<span class="k">fi</span>
</code></pre></div>


<p>never mind the systemd part <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> I then put this executable into the language server config</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?version=5"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#208951147" name="208951147"><div>2020-09-03 11:13:27</div></a></div><div class="text"><p>FTR, my ghcide derivation in my personal nix-project lib:</p>
<p><a href="https://github.com/tek/tryp-hs/blob/master/ghcide.nix">https://github.com/tek/tryp-hs/blob/master/ghcide.nix</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/tek/tryp-hs/blob/master/ghcide.nix" style="background-image: url(https://avatars0.githubusercontent.com/u/2632?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/tek/tryp-hs/blob/master/ghcide.nix" title="tek/tryp-hs">tek/tryp-hs</a></div><div class="message_embed_description">Development utilities for Haskell projects with Nix build - tek/tryp-hs</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?version=5"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#208975750" name="208975750"><div>2020-09-03 14:30:24</div></a></div><div class="text"><p>maybe I'm just so glad that it works at all again in my env, but the typechecking response seems to be much more immediate now. <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#208976489" name="208976489"><div>2020-09-03 14:34:28</div></a></div><div class="text"><p>there do seem to be some performance improvements, but I can't tell if they are supposed to make it much faster</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?version=5"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#208976624" name="208976624"><div>2020-09-03 14:35:16</div></a></div><div class="text"><p>you mean that there are PRs included in the release with the express intent to improve performance?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#208976735" name="208976735"><div>2020-09-03 14:35:52</div></a></div><div class="text"><p>yeah exactly</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?version=5"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#208976748" name="208976748"><div>2020-09-03 14:35:57</div></a></div><div class="text"><p>in any case, I just assume that the bad performance before was also an effect of my convoluted build setup</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#208976802" name="208976802"><div>2020-09-03 14:36:08</div></a></div><div class="text"><div class="codehilite"><pre><span></span><code>Performance improvements for GetSpanInfo (#681) - (Pepe Iborra)
Fix regression in getSpanInfoRule (#622) - (Pepe Iborra)
</code></pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?version=5"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#209086591" name="209086591"><div>2020-09-04 12:18:45</div></a></div><div class="text"><p>ok, the greatest relief compared to when it kinda used to work for me is that code actions seem to be immediate now – before I had to wait for up to 15 seconds (the neovim lsc timing out twice) for it to act. after I did that once it used to become immediate (something like a cache warmup), but after a few changes it reset again.</p>
<p>now to check the memory footprint – it used to grow up to 30G resident on larger projects. so far it seems better, 5G for a while now</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?version=5"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#209131961" name="209131961"><div>2020-09-04 19:22:53</div></a></div><div class="text"><p>oh god it's so nice</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#209132998" name="209132998"><div>2020-09-04 19:34:32</div></a></div><div class="text"><p>HLS 0.4.0 was also released yesterday</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?version=5"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#209133189" name="209133189"><div>2020-09-04 19:36:53</div></a></div><div class="text"><p>haven't tried it, does it make sense to switch?</p></div></div></div></div></div><div class="ui vertical footer segment"><a href="https://github.com/srid/zulip-archive">Powered by Haskell</a> | Questions? Contact <a href="https://www.srid.ca">srid</a></div></div></body></html>