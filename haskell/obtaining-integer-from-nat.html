<html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="Is there a way to obtain the equivalent Integer from a Nat type?" name="description"><link href="https://funprog.srid.ca/haskell/obtaining-integer-from-nat.html" rel="canonical"><meta property="og:title" content="Obtaining Integer from Nat - Haskell"><meta property="og:site_name" content="Functional Programming Zulip Archive"><meta property="og:type" content="article"><meta property="og:article:section" content="Haskell"><meta property="og:article:modified_time" content="2019-11-28T14:59:46Z"><meta property="og:article:published_time" content="2019-11-24T16:39:44Z"><meta property="og:image" content="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?x=x&amp;version=2"><title>Obtaining Integer from Nat - Haskell</title><style type="text/css">
div#thesite
{
  font-family   : "Open Sans", sans-serif;
  font-size     : 1em !important;
  margin-top    : 1em;
  margin-bottom : 1em;
}

div#thesite h1
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h2
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h3
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h4
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h5
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h6
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .ui.breadcrumb.rib .section
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .as-header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite code, pre, tt
{
  font-family : "SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace;
}

div#thesite .ui.breadcrumb.rib
{
  margin-bottom : 1em;
}



div#thesite .ui.comments.messages .comment .metadata a
{
  color : #808080;
}

div#thesite .ui.comments.messages .comment a.avatar img
{
  height : auto;
}

div#thesite .subtle
{
  color : #808080;
}


div#thesite .messages pre
{
  font-size : 85%;
  overflow  : auto;
  max-width : 100%;
}

div#thesite .messages .message_embed
{
  border-left  : solid 3px #808080;
  padding-left : 0.69999em;
}

div#thesite .messages .message_inline_image img
{
  max-width     : 100%;
  margin-bottom : 1em;
}


/* Generated with Clay, http://fvisser.nl/clay */</style><link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Open+Sans|Oswald&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto|Open+Sans&amp;display=swap" rel="stylesheet"></head><body><div id="thesite" class="ui text container"><div class="ui violet inverted top attached center aligned segment"><h1 class="ui huge header">Obtaining Integer from Nat - Haskell</h1></div><div class="ui attached segment"><div class="ui message"><p>Welcome to the Functional Programming Zulip Chat Archive. You can join the chat <a href="https://funprog.zulipchat.com">here</a>.</p></div><div class="ui breadcrumb rib"><a href="/" class="section">Home</a><i class="right angle icon divider"></i><a href="/haskell/" class="section">#Haskell</a><i class="right angle icon divider"></i><div class="active section">Obtaining Integer from Nat</div></div><div class="ui comments messages"><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?x=x&amp;version=2"></a><div class="content"><a class="author">Bolt</a><div class="metadata"><a href="#181767671" name="181767671"><div>2019-11-24 16:39:44</div></a></div><div class="text"><p>Is there a way to obtain the equivalent <code>Integer</code> from a <code>Nat</code> type?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?x=x&amp;version=2"></a><div class="content"><a class="author">Bolt</a><div class="metadata"><a href="#181767743" name="181767743"><div>2019-11-24 16:40:44</div></a></div><div class="text"><p>like</p>
<div class="codehilite"><pre><span></span><span class="nf">f</span> <span class="ow">::</span> <span class="kt">T</span> <span class="n">n</span>
<span class="nf">f</span> <span class="ow">=</span> <span class="n">n</span>
</pre></div>


<p>where <code>n</code> is of kind <code>Nat</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?x=x&amp;version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#181767758" name="181767758"><div>2019-11-24 16:41:32</div></a></div><div class="text"><p><span class="user-mention" data-user-id="250742">@Bolt</span>  <a href="https://www.stackage.org/haddock/lts-14.15/base-4.12.0.0/GHC-TypeLits.html#v:natVal" target="_blank" title="https://www.stackage.org/haddock/lts-14.15/base-4.12.0.0/GHC-TypeLits.html#v:natVal">https://www.stackage.org/haddock/lts-14.15/base-4.12.0.0/GHC-TypeLits.html#v:natVal</a></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?x=x&amp;version=2"></a><div class="content"><a class="author">Bolt</a><div class="metadata"><a href="#181767765" name="181767765"><div>2019-11-24 16:41:59</div></a></div><div class="text"><p>awesome!!</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?x=x&amp;version=2"></a><div class="content"><a class="author">Bolt</a><div class="metadata"><a href="#181768465" name="181768465"><div>2019-11-24 17:00:15</div></a></div><div class="text"><p>I'm having this error </p>
<div class="codehilite"><pre><span></span><span class="kt">Could</span> <span class="n">not</span> <span class="n">deduce</span> <span class="p">(</span><span class="kt">KnownNat</span> <span class="n">n0</span><span class="p">)</span> <span class="n">arising</span> <span class="n">from</span> <span class="n">a</span> <span class="n">use</span> <span class="kr">of</span> <span class="err">‘</span><span class="n">natVal</span><span class="err">’</span>
</pre></div>


<p>What I have</p>
<div class="codehilite"><pre><span></span><span class="kr">data</span> <span class="kt">T</span> <span class="p">(</span><span class="n">n</span> <span class="ow">::</span> <span class="kt">Nat</span><span class="p">)</span> <span class="ow">=</span> <span class="kt">T</span> <span class="n">n</span>

<span class="nf">f</span> <span class="ow">::</span> <span class="kt">T</span> <span class="n">n</span> <span class="ow">-&gt;</span> <span class="kt">Integer</span>
<span class="nf">f</span> <span class="kr">_</span> <span class="ow">=</span> <span class="n">natVal</span> <span class="p">(</span><span class="kt">Proxy</span> <span class="ow">::</span> <span class="kt">Proxy</span> <span class="n">n</span><span class="p">)</span>
</pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?x=x&amp;version=2"></a><div class="content"><a class="author">Bolt</a><div class="metadata"><a href="#181768480" name="181768480"><div>2019-11-24 17:00:43</div></a></div><div class="text"><p>I've tried enabling RankNTypes and using forall but no success</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?x=x&amp;version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#181768510" name="181768510"><div>2019-11-24 17:01:50</div></a></div><div class="text"><div class="codehilite"><pre><span></span><span class="nf">f</span> <span class="ow">::</span> <span class="kt">KnownNat</span> <span class="n">n</span> <span class="ow">=&gt;</span> <span class="kt">T</span> <span class="n">n</span> <span class="ow">-&gt;</span> <span class="kt">Integer</span>
</pre></div>


<p>"If I know which <code>n</code> it is, I can give you <code>Integer</code> based on it <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span> "</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?x=x&amp;version=2"></a><div class="content"><a class="author">Bolt</a><div class="metadata"><a href="#181768571" name="181768571"><div>2019-11-24 17:03:23</div></a></div><div class="text"><p>already tried that <span aria-label="confused" class="emoji emoji-1f615" role="img" title="confused">:confused:</span></p>
<div class="codehilite"><pre><span></span><span class="kt">Could</span> <span class="n">not</span> <span class="n">deduce</span> <span class="p">(</span><span class="kt">KnownNat</span> <span class="n">n0</span><span class="p">)</span> <span class="n">arising</span> <span class="n">from</span> <span class="n">a</span> <span class="n">use</span> <span class="kr">of</span> <span class="err">‘</span><span class="n">natVal</span><span class="err">’</span>
      <span class="n">from</span> <span class="n">the</span> <span class="n">context</span><span class="kt">:</span> <span class="kt">KnownNat</span> <span class="n">n</span>
</pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?x=x&amp;version=2"></a><div class="content"><a class="author">Bolt</a><div class="metadata"><a href="#181768579" name="181768579"><div>2019-11-24 17:03:52</div></a></div><div class="text"><p>I've enabled ScopedTypeVariables</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?x=x&amp;version=2"></a><div class="content"><a class="author">Bolt</a><div class="metadata"><a href="#181768583" name="181768583"><div>2019-11-24 17:04:01</div></a></div><div class="text"><p>Still the same error</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?x=x&amp;version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#181768645" name="181768645"><div>2019-11-24 17:05:13</div></a></div><div class="text"><p>Do you have <code>forall</code>?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?x=x&amp;version=2"></a><div class="content"><a class="author">Bolt</a><div class="metadata"><a href="#181768651" name="181768651"><div>2019-11-24 17:05:27</div></a></div><div class="text"><p>Okay nailed it!</p>
<div class="codehilite"><pre><span></span><span class="nf">f</span> <span class="ow">::</span> <span class="n">forall</span> <span class="p">(</span><span class="n">n</span> <span class="ow">::</span> <span class="kt">Nat</span><span class="p">)</span> <span class="o">.</span> <span class="kt">T</span> <span class="n">n</span> <span class="ow">-&gt;</span> <span class="kt">Integer</span>
<span class="nf">f</span> <span class="kr">_</span> <span class="ow">=</span> <span class="n">natVal</span> <span class="p">(</span><span class="kt">Proxy</span> <span class="ow">::</span> <span class="kt">Proxy</span> <span class="n">n</span><span class="p">)</span>
</pre></div>


<p>Needed to specify the kind</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?x=x&amp;version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#181768655" name="181768655"><div>2019-11-24 17:05:51</div></a></div><div class="text"><p>I guess <code>forall n. </code> will work as well</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?x=x&amp;version=2"></a><div class="content"><a class="author">Bolt</a><div class="metadata"><a href="#181768783" name="181768783"><div>2019-11-24 17:08:50</div></a></div><div class="text"><p>It doesn't <span aria-label="frown" class="emoji emoji-1f641" role="img" title="frown">:frown:</span></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?x=x&amp;version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#181768795" name="181768795"><div>2019-11-24 17:09:22</div></a></div><div class="text"><p>With <code>PolyKinds</code> then? <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?x=x&amp;version=2"></a><div class="content"><a class="author">Bolt</a><div class="metadata"><a href="#181768867" name="181768867"><div>2019-11-24 17:11:19</div></a></div><div class="text"><p>Have them enabled <span aria-label="confused" class="emoji emoji-1f615" role="img" title="confused">:confused:</span></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?x=x&amp;version=2"></a><div class="content"><a class="author">Bolt</a><div class="metadata"><a href="#181768939" name="181768939"><div>2019-11-24 17:13:18</div></a></div><div class="text"><p>Well actually it works now <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?x=x&amp;version=2"></a><div class="content"><a class="author">Bolt</a><div class="metadata"><a href="#181768943" name="181768943"><div>2019-11-24 17:13:29</div></a></div><div class="text"><p>I removed polykinds</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?x=x&amp;version=2"></a><div class="content"><a class="author">Bolt</a><div class="metadata"><a href="#182050240" name="182050240"><div>2019-11-27 19:18:51</div></a></div><div class="text"><p>Is it possible to get function argument types in scope and constraint them? Everytime I try to do that the compiler infers different variable types in the RHS</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/ff257a6548bf89508a0a7fb6bc2833ea7aa7bf20?x=x&amp;version=3"></a><div class="content"><a class="author">Jack Henahan</a><div class="metadata"><a href="#182050464" name="182050464"><div>2019-11-27 19:21:41</div></a></div><div class="text"><p><code>ScopedTypeVariables</code>?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/ff257a6548bf89508a0a7fb6bc2833ea7aa7bf20?x=x&amp;version=3"></a><div class="content"><a class="author">Jack Henahan</a><div class="metadata"><a href="#182050482" name="182050482"><div>2019-11-27 19:22:01</div></a></div><div class="text"><p>Seeing what you're trying to do might be helpful, too.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?x=x&amp;version=2"></a><div class="content"><a class="author">Bolt</a><div class="metadata"><a href="#182050809" name="182050809"><div>2019-11-27 19:25:14</div></a></div><div class="text"><div class="codehilite"><pre><span></span><span class="nf">abide</span> <span class="ow">::</span> <span class="kt">Matrix</span> <span class="n">e</span> <span class="n">n</span> <span class="n">m</span> <span class="ow">-&gt;</span> <span class="kt">Matrix</span> <span class="n">e</span> <span class="n">n</span> <span class="n">m</span>
<span class="nf">abide</span> <span class="p">(</span><span class="kt">One</span> <span class="n">e</span><span class="p">)</span> <span class="ow">=</span> <span class="kt">One</span> <span class="n">e</span>
<span class="nf">abide</span> <span class="p">(</span><span class="kt">Split</span> <span class="p">(</span><span class="kt">Junc</span> <span class="n">a</span> <span class="n">b</span><span class="p">)</span> <span class="p">(</span><span class="kt">Junc</span> <span class="n">c</span> <span class="n">d</span><span class="p">))</span> <span class="ow">=</span> <span class="kt">Junc</span> <span class="p">(</span><span class="kt">Split</span> <span class="n">a</span> <span class="n">c</span><span class="p">)</span> <span class="p">(</span><span class="kt">Split</span> <span class="n">b</span> <span class="n">d</span><span class="p">)</span>
<span class="nf">abide</span> <span class="p">(</span><span class="kt">Junc</span> <span class="p">(</span><span class="kt">Split</span> <span class="n">a</span> <span class="n">c</span><span class="p">)</span> <span class="p">(</span><span class="kt">Split</span> <span class="n">b</span> <span class="n">d</span><span class="p">))</span> <span class="ow">=</span> <span class="kt">Split</span> <span class="p">(</span><span class="kt">Junc</span> <span class="n">a</span> <span class="n">b</span><span class="p">)</span> <span class="p">(</span><span class="kt">Junc</span> <span class="n">c</span> <span class="n">d</span><span class="p">)</span>
</pre></div>


<p>Here the compiler complains about not being able to infer certain type constraints</p>
<div class="codehilite"><pre><span></span><span class="kt">Could</span> <span class="n">not</span> <span class="n">deduce</span><span class="kt">:</span> <span class="n">n3</span> <span class="o">~</span> <span class="n">n2</span>
      <span class="n">from</span> <span class="n">the</span> <span class="n">context</span><span class="kt">:</span> <span class="p">(</span><span class="n">n</span> <span class="o">~</span> <span class="p">(</span><span class="n">m1</span> <span class="o">+</span> <span class="n">n1</span><span class="p">),</span> <span class="kt">ValidDimensions</span> <span class="n">m1</span> <span class="n">n1</span><span class="p">,</span> <span class="kt">NonZero</span> <span class="n">m</span><span class="p">)</span>
        <span class="n">bound</span> <span class="n">by</span> <span class="n">a</span> <span class="n">pattern</span> <span class="n">with</span> <span class="n">constructor</span><span class="kt">:</span>
                   <span class="kt">Junc</span> <span class="ow">::</span> <span class="n">forall</span> <span class="p">(</span><span class="n">m</span> <span class="ow">::</span> <span class="kt">Nat</span><span class="p">)</span> <span class="p">(</span><span class="n">n</span> <span class="ow">::</span> <span class="kt">Nat</span><span class="p">)</span> <span class="p">(</span><span class="n">p</span> <span class="ow">::</span> <span class="kt">Nat</span><span class="p">)</span> <span class="n">e</span><span class="o">.</span>
                           <span class="p">(</span><span class="kt">ValidDimensions</span> <span class="n">m</span> <span class="n">n</span><span class="p">,</span> <span class="kt">NonZero</span> <span class="n">p</span><span class="p">)</span> <span class="ow">=&gt;</span>
                           <span class="kt">Matrix</span> <span class="n">e</span> <span class="n">m</span> <span class="n">p</span> <span class="ow">-&gt;</span> <span class="kt">Matrix</span> <span class="n">e</span> <span class="n">n</span> <span class="n">p</span> <span class="ow">-&gt;</span> <span class="kt">Matrix</span> <span class="n">e</span> <span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="n">n</span><span class="p">)</span> <span class="n">p</span><span class="p">,</span>
                 <span class="kr">in</span> <span class="n">an</span> <span class="n">equation</span> <span class="n">for</span> <span class="err">‘</span><span class="n">abide</span><span class="err">’</span>
        <span class="n">at</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">bolt</span><span class="o">/</span><span class="kt">Desktop</span><span class="o">/</span><span class="kt">Bolt</span><span class="o">/</span><span class="kt">UMinho</span><span class="o">/</span><span class="mi">5</span><span class="err">º</span><span class="kt">Ano</span><span class="o">/</span><span class="kt">Tese</span><span class="o">/</span><span class="kt">Playground</span><span class="o">/</span><span class="kt">LAoP</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="kt">Matrix</span><span class="o">.</span><span class="n">hs</span><span class="kt">:</span><span class="mi">329</span><span class="kt">:</span><span class="mi">8</span><span class="o">-</span><span class="mi">35</span>
      <span class="n">or</span> <span class="n">from</span><span class="kt">:</span> <span class="p">(</span><span class="n">m</span> <span class="o">~</span> <span class="p">(</span><span class="n">m2</span> <span class="o">+</span> <span class="n">n2</span><span class="p">),</span> <span class="kt">ValidDimensions</span> <span class="n">m2</span> <span class="n">n2</span><span class="p">,</span> <span class="kt">NonZero</span> <span class="n">m1</span><span class="p">)</span>
        <span class="n">bound</span> <span class="n">by</span> <span class="n">a</span> <span class="n">pattern</span> <span class="n">with</span> <span class="n">constructor</span><span class="kt">:</span>
                   <span class="kt">Split</span> <span class="ow">::</span> <span class="n">forall</span> <span class="p">(</span><span class="n">m</span> <span class="ow">::</span> <span class="kt">Nat</span><span class="p">)</span> <span class="p">(</span><span class="n">n</span> <span class="ow">::</span> <span class="kt">Nat</span><span class="p">)</span> <span class="p">(</span><span class="n">p</span> <span class="ow">::</span> <span class="kt">Nat</span><span class="p">)</span> <span class="n">e</span><span class="o">.</span>
                            <span class="p">(</span><span class="kt">ValidDimensions</span> <span class="n">m</span> <span class="n">n</span><span class="p">,</span> <span class="kt">NonZero</span> <span class="n">p</span><span class="p">)</span> <span class="ow">=&gt;</span>
                            <span class="kt">Matrix</span> <span class="n">e</span> <span class="n">p</span> <span class="n">m</span> <span class="ow">-&gt;</span> <span class="kt">Matrix</span> <span class="n">e</span> <span class="n">p</span> <span class="n">n</span> <span class="ow">-&gt;</span> <span class="kt">Matrix</span> <span class="n">e</span> <span class="n">p</span> <span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="n">n</span><span class="p">),</span>
                 <span class="kr">in</span> <span class="n">an</span> <span class="n">equation</span> <span class="n">for</span> <span class="err">‘</span><span class="n">abide</span><span class="err">’</span>
        <span class="n">at</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">bolt</span><span class="o">/</span><span class="kt">Desktop</span><span class="o">/</span><span class="kt">Bolt</span><span class="o">/</span><span class="kt">UMinho</span><span class="o">/</span><span class="mi">5</span><span class="err">º</span><span class="kt">Ano</span><span class="o">/</span><span class="kt">Tese</span><span class="o">/</span><span class="kt">Playground</span><span class="o">/</span><span class="kt">LAoP</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="kt">Matrix</span><span class="o">.</span><span class="n">hs</span><span class="kt">:</span><span class="mi">329</span><span class="kt">:</span><span class="mi">14</span><span class="o">-</span><span class="mi">22</span>
      <span class="n">or</span> <span class="n">from</span><span class="kt">:</span> <span class="p">(</span><span class="n">m</span> <span class="o">~</span> <span class="p">(</span><span class="n">m3</span> <span class="o">+</span> <span class="n">n3</span><span class="p">),</span> <span class="kt">ValidDimensions</span> <span class="n">m3</span> <span class="n">n3</span><span class="p">,</span> <span class="kt">NonZero</span> <span class="n">n1</span><span class="p">)</span>
        <span class="n">bound</span> <span class="n">by</span> <span class="n">a</span> <span class="n">pattern</span> <span class="n">with</span> <span class="n">constructor</span><span class="kt">:</span>
                   <span class="kt">Split</span> <span class="ow">::</span> <span class="n">forall</span> <span class="p">(</span><span class="n">m</span> <span class="ow">::</span> <span class="kt">Nat</span><span class="p">)</span> <span class="p">(</span><span class="n">n</span> <span class="ow">::</span> <span class="kt">Nat</span><span class="p">)</span> <span class="p">(</span><span class="n">p</span> <span class="ow">::</span> <span class="kt">Nat</span><span class="p">)</span> <span class="n">e</span><span class="o">.</span>
                            <span class="p">(</span><span class="kt">ValidDimensions</span> <span class="n">m</span> <span class="n">n</span><span class="p">,</span> <span class="kt">NonZero</span> <span class="n">p</span><span class="p">)</span> <span class="ow">=&gt;</span>
                            <span class="kt">Matrix</span> <span class="n">e</span> <span class="n">p</span> <span class="n">m</span> <span class="ow">-&gt;</span> <span class="kt">Matrix</span> <span class="n">e</span> <span class="n">p</span> <span class="n">n</span> <span class="ow">-&gt;</span> <span class="kt">Matrix</span> <span class="n">e</span> <span class="n">p</span> <span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="n">n</span><span class="p">),</span>
                 <span class="kr">in</span> <span class="n">an</span> <span class="n">equation</span> <span class="n">for</span> <span class="err">‘</span><span class="n">abide</span><span class="err">’</span>
        <span class="n">at</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">bolt</span><span class="o">/</span><span class="kt">Desktop</span><span class="o">/</span><span class="kt">Bolt</span><span class="o">/</span><span class="kt">UMinho</span><span class="o">/</span><span class="mi">5</span><span class="err">º</span><span class="kt">Ano</span><span class="o">/</span><span class="kt">Tese</span><span class="o">/</span><span class="kt">Playground</span><span class="o">/</span><span class="kt">LAoP</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="kt">Matrix</span><span class="o">.</span><span class="n">hs</span><span class="kt">:</span><span class="mi">329</span><span class="kt">:</span><span class="mi">26</span><span class="o">-</span><span class="mi">34</span>
      <span class="err">‘</span><span class="n">n3</span><span class="err">’</span> <span class="n">is</span> <span class="n">a</span> <span class="n">rigid</span> <span class="kr">type</span> <span class="n">variable</span> <span class="n">bound</span> <span class="n">by</span>
        <span class="n">a</span> <span class="n">pattern</span> <span class="n">with</span> <span class="n">constructor</span><span class="kt">:</span>
          <span class="kt">Split</span> <span class="ow">::</span> <span class="n">forall</span> <span class="p">(</span><span class="n">m</span> <span class="ow">::</span> <span class="kt">Nat</span><span class="p">)</span> <span class="p">(</span><span class="n">n</span> <span class="ow">::</span> <span class="kt">Nat</span><span class="p">)</span> <span class="p">(</span><span class="n">p</span> <span class="ow">::</span> <span class="kt">Nat</span><span class="p">)</span> <span class="n">e</span><span class="o">.</span>
                   <span class="p">(</span><span class="kt">ValidDimensions</span> <span class="n">m</span> <span class="n">n</span><span class="p">,</span> <span class="kt">NonZero</span> <span class="n">p</span><span class="p">)</span> <span class="ow">=&gt;</span>
                   <span class="kt">Matrix</span> <span class="n">e</span> <span class="n">p</span> <span class="n">m</span> <span class="ow">-&gt;</span> <span class="kt">Matrix</span> <span class="n">e</span> <span class="n">p</span> <span class="n">n</span> <span class="ow">-&gt;</span> <span class="kt">Matrix</span> <span class="n">e</span> <span class="n">p</span> <span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="n">n</span><span class="p">),</span>
        <span class="kr">in</span> <span class="n">an</span> <span class="n">equation</span> <span class="n">for</span> <span class="err">‘</span><span class="n">abide</span><span class="err">’</span>
        <span class="n">at</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">bolt</span><span class="o">/</span><span class="kt">Desktop</span><span class="o">/</span><span class="kt">Bolt</span><span class="o">/</span><span class="kt">UMinho</span><span class="o">/</span><span class="mi">5</span><span class="err">º</span><span class="kt">Ano</span><span class="o">/</span><span class="kt">Tese</span><span class="o">/</span><span class="kt">Playground</span><span class="o">/</span><span class="kt">LAoP</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="kt">Matrix</span><span class="o">.</span><span class="n">hs</span><span class="kt">:</span><span class="mi">329</span><span class="kt">:</span><span class="mi">26</span><span class="o">-</span><span class="mi">34</span>
      <span class="err">‘</span><span class="n">n2</span><span class="err">’</span> <span class="n">is</span> <span class="n">a</span> <span class="n">rigid</span> <span class="kr">type</span> <span class="n">variable</span> <span class="n">bound</span> <span class="n">by</span>
        <span class="n">a</span> <span class="n">pattern</span> <span class="n">with</span> <span class="n">constructor</span><span class="kt">:</span>
          <span class="kt">Split</span> <span class="ow">::</span> <span class="n">forall</span> <span class="p">(</span><span class="n">m</span> <span class="ow">::</span> <span class="kt">Nat</span><span class="p">)</span> <span class="p">(</span><span class="n">n</span> <span class="ow">::</span> <span class="kt">Nat</span><span class="p">)</span> <span class="p">(</span><span class="n">p</span> <span class="ow">::</span> <span class="kt">Nat</span><span class="p">)</span> <span class="n">e</span><span class="o">.</span>
                   <span class="p">(</span><span class="kt">ValidDimensions</span> <span class="n">m</span> <span class="n">n</span><span class="p">,</span> <span class="kt">NonZero</span> <span class="n">p</span><span class="p">)</span> <span class="ow">=&gt;</span>
                   <span class="kt">Matrix</span> <span class="n">e</span> <span class="n">p</span> <span class="n">m</span> <span class="ow">-&gt;</span> <span class="kt">Matrix</span> <span class="n">e</span> <span class="n">p</span> <span class="n">n</span> <span class="ow">-&gt;</span> <span class="kt">Matrix</span> <span class="n">e</span> <span class="n">p</span> <span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="n">n</span><span class="p">),</span>
        <span class="kr">in</span> <span class="n">an</span> <span class="n">equation</span> <span class="n">for</span> <span class="err">‘</span><span class="n">abide</span><span class="err">’</span>
        <span class="n">at</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">bolt</span><span class="o">/</span><span class="kt">Desktop</span><span class="o">/</span><span class="kt">Bolt</span><span class="o">/</span><span class="kt">UMinho</span><span class="o">/</span><span class="mi">5</span><span class="err">º</span><span class="kt">Ano</span><span class="o">/</span><span class="kt">Tese</span><span class="o">/</span><span class="kt">Playground</span><span class="o">/</span><span class="kt">LAoP</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="kt">Matrix</span><span class="o">.</span><span class="n">hs</span><span class="kt">:</span><span class="mi">329</span><span class="kt">:</span><span class="mi">14</span><span class="o">-</span><span class="mi">22</span>
      <span class="kt">Expected</span> <span class="kr">type</span><span class="kt">:</span> <span class="kt">Matrix</span> <span class="n">e</span> <span class="n">n1</span> <span class="n">n2</span>
        <span class="kt">Actual</span> <span class="kr">type</span><span class="kt">:</span> <span class="kt">Matrix</span> <span class="n">e</span> <span class="n">n1</span> <span class="n">n3</span>
    <span class="err">•</span> <span class="kt">In</span> <span class="n">the</span> <span class="n">second</span> <span class="n">argument</span> <span class="kr">of</span> <span class="err">‘</span><span class="kt">Junc</span><span class="err">’</span><span class="p">,</span> <span class="n">namely</span> <span class="err">‘</span><span class="n">d</span><span class="err">’</span>
      <span class="kt">In</span> <span class="n">the</span> <span class="n">second</span> <span class="n">argument</span> <span class="kr">of</span> <span class="err">‘</span><span class="kt">Split</span><span class="err">’</span><span class="p">,</span> <span class="n">namely</span> <span class="err">‘</span><span class="p">(</span><span class="kt">Junc</span> <span class="n">c</span> <span class="n">d</span><span class="p">)</span><span class="err">’</span>
      <span class="kt">In</span> <span class="n">the</span> <span class="n">expression</span><span class="kt">:</span> <span class="kt">Split</span> <span class="p">(</span><span class="kt">Junc</span> <span class="n">a</span> <span class="n">b</span><span class="p">)</span> <span class="p">(</span><span class="kt">Junc</span> <span class="n">c</span> <span class="n">d</span><span class="p">)</span>
    <span class="err">•</span> <span class="kt">Relevant</span> <span class="n">bindings</span> <span class="n">include</span>
        <span class="n">d</span> <span class="ow">::</span> <span class="kt">Matrix</span> <span class="n">e</span> <span class="n">n1</span> <span class="n">n3</span>
        <span class="n">c</span> <span class="ow">::</span> <span class="kt">Matrix</span> <span class="n">e</span> <span class="n">m1</span> <span class="n">n2</span>
</pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?x=x&amp;version=2"></a><div class="content"><a class="author">Bolt</a><div class="metadata"><a href="#182051147" name="182051147"><div>2019-11-27 19:28:51</div></a></div><div class="text"><p>I have <code>ScopedTypeVariables</code> enabled, and already tried to do something like</p>
<div class="codehilite"><pre><span></span><span class="nf">abide</span> <span class="p">(</span><span class="kt">Split</span> <span class="p">(</span><span class="kt">Junc</span> <span class="p">(</span><span class="n">a</span> <span class="ow">::</span> <span class="kt">Matrix</span> <span class="n">e</span> <span class="n">ca</span> <span class="n">ra</span><span class="p">)</span> <span class="n">b</span><span class="p">)</span> <span class="p">(</span><span class="kt">Junc</span> <span class="n">c</span> <span class="n">d</span><span class="p">))</span> <span class="ow">=</span> <span class="kt">Junc</span> <span class="p">(</span><span class="kt">Split</span> <span class="n">a</span> <span class="n">c</span><span class="p">)</span> <span class="p">(</span><span class="kt">Split</span> <span class="n">b</span> <span class="n">d</span><span class="p">)</span>
</pre></div>


<p>and use <code>ca</code> and <code>ra</code> but on the RHS the compiler infers other type names for <code>a</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/ff257a6548bf89508a0a7fb6bc2833ea7aa7bf20?x=x&amp;version=3"></a><div class="content"><a class="author">Jack Henahan</a><div class="metadata"><a href="#182052042" name="182052042"><div>2019-11-27 19:40:02</div></a></div><div class="text"><p>I think you'll need to do  <code>forall n m. Matrix e n m -&gt; Matrix e n m</code> to make it believe that they're the same <code>n</code> and <code>m</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?x=x&amp;version=2"></a><div class="content"><a class="author">Bolt</a><div class="metadata"><a href="#182061001" name="182061001"><div>2019-11-27 21:41:45</div></a></div><div class="text"><p>it doesn't work unfortunately <span aria-label="frown" class="emoji emoji-1f641" role="img" title="frown">:frown:</span></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/ff257a6548bf89508a0a7fb6bc2833ea7aa7bf20?x=x&amp;version=3"></a><div class="content"><a class="author">Jack Henahan</a><div class="metadata"><a href="#182069042" name="182069042"><div>2019-11-27 23:41:43</div></a></div><div class="text"><p>Oh, I see, there's Nat math going on. I've totally forgotten what the dumb thing you have to do is to make GHC okay with that</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/ff257a6548bf89508a0a7fb6bc2833ea7aa7bf20?x=x&amp;version=3"></a><div class="content"><a class="author">Jack Henahan</a><div class="metadata"><a href="#182069375" name="182069375"><div>2019-11-27 23:45:14</div></a></div><div class="text"><p><a href="https://stackoverflow.com/a/50788119" target="_blank" title="https://stackoverflow.com/a/50788119">https://stackoverflow.com/a/50788119</a> might have some thoughts</p>
<div class="message_embed"><a class="message_embed_image" href="https://stackoverflow.com/a/50788119" style="background-image: url(https://cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon@2.png?v=73d79a89bded)" target="_blank"></a><div class="data-container"><div class="message_embed_title"><a href="https://stackoverflow.com/a/50788119" target="_blank" title="Proving commutativity of type level addition of natural numbers">Proving commutativity of type level addition of natural numbers</a></div><div class="message_embed_description">I'm playing around with what tools haskell offers for dependently typed programming. I have promoted a GADT representing natural numbers to the kind level and made a type family for addition of nat...</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?x=x&amp;version=2"></a><div class="content"><a class="author">Bolt</a><div class="metadata"><a href="#182070126" name="182070126"><div>2019-11-27 23:59:54</div></a></div><div class="text"><p>damn that's messed up <span aria-label="frown" class="emoji emoji-1f641" role="img" title="frown">:frown:</span> I don't think I need to prove any property I just need to get the constraints right, and I can't because GHC doesn't let me tell him the names for the type variables</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/ff257a6548bf89508a0a7fb6bc2833ea7aa7bf20?x=x&amp;version=3"></a><div class="content"><a class="author">Jack Henahan</a><div class="metadata"><a href="#182071234" name="182071234"><div>2019-11-28 00:18:11</div></a></div><div class="text"><p>Maybe you need KnownNat constraints? I'm just throwing stuff at the wall, at this point</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?x=x&amp;version=2"></a><div class="content"><a class="author">Bolt</a><div class="metadata"><a href="#182104107" name="182104107"><div>2019-11-28 12:20:26</div></a></div><div class="text"><p>I have this:</p>
<div class="codehilite"><pre><span></span><span class="nf">abide</span> <span class="ow">::</span> <span class="n">forall</span> <span class="n">n</span> <span class="n">m</span> <span class="n">e</span> <span class="o">.</span> <span class="kt">Matrix</span> <span class="n">n</span> <span class="n">m</span> <span class="n">e</span> <span class="ow">-&gt;</span> <span class="kt">Matrix</span> <span class="n">n</span> <span class="n">m</span> <span class="n">e</span>
<span class="nf">abide</span> <span class="p">(</span><span class="kt">Junc</span> <span class="p">(</span><span class="kt">Split</span> <span class="n">a</span> <span class="n">c</span><span class="p">)</span> <span class="p">(</span><span class="kt">Split</span> <span class="n">b</span> <span class="n">d</span><span class="p">))</span> <span class="ow">=</span> <span class="kt">Split</span> <span class="p">(</span><span class="kt">Junc</span> <span class="n">a</span> <span class="n">b</span><span class="p">)</span> <span class="p">(</span><span class="kt">Junc</span> <span class="n">c</span> <span class="n">d</span><span class="p">)</span>
</pre></div>


<p>And GHC complains about not being able to infer the constraints on the types of <code>a b c d</code>... And I'm not able to bring the types of <code>a b c d</code> into scope so I can give the compiler the constraints it wants.. is there any way to do this?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3d24a4100b3eab34d8ce3059d789c543?d=identicon&amp;version=1"></a><div class="content"><a class="author">Sandy Maguire</a><div class="metadata"><a href="#182113082" name="182113082"><div>2019-11-28 14:30:45</div></a></div><div class="text"><p><span class="user-mention" data-user-id="250742">@Bolt</span> most of the strategy here is having a rough idea of what's going wrong and throwing things at GHC until something works</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3d24a4100b3eab34d8ce3059d789c543?d=identicon&amp;version=1"></a><div class="content"><a class="author">Sandy Maguire</a><div class="metadata"><a href="#182113087" name="182113087"><div>2019-11-28 14:30:54</div></a></div><div class="text"><p>which is to say people probably can't answer this for you without all of the code</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3d24a4100b3eab34d8ce3059d789c543?d=identicon&amp;version=1"></a><div class="content"><a class="author">Sandy Maguire</a><div class="metadata"><a href="#182113116" name="182113116"><div>2019-11-28 14:31:25</div></a></div><div class="text"><p>my guess is you're running up against the noninjectivity of +</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3d24a4100b3eab34d8ce3059d789c543?d=identicon&amp;version=1"></a><div class="content"><a class="author">Sandy Maguire</a><div class="metadata"><a href="#182113130" name="182113130"><div>2019-11-28 14:31:50</div></a></div><div class="text"><p>even though you know <code>m</code> and <code>n</code> are each the sum of two things, you don't know which  things</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3d24a4100b3eab34d8ce3059d789c543?d=identicon&amp;version=1"></a><div class="content"><a class="author">Sandy Maguire</a><div class="metadata"><a href="#182113192" name="182113192"><div>2019-11-28 14:32:28</div></a></div><div class="text"><p>which is to say if i know <code>m + n = 15</code> there are infinite solutions for m and n</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3d24a4100b3eab34d8ce3059d789c543?d=identicon&amp;version=1"></a><div class="content"><a class="author">Sandy Maguire</a><div class="metadata"><a href="#182113240" name="182113240"><div>2019-11-28 14:33:20</div></a></div><div class="text"><p>the solution is to store <code>Proxy m</code> and <code>Proxy n</code> inside the constructors for <code>Split</code> and <code>Junc</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3d24a4100b3eab34d8ce3059d789c543?d=identicon&amp;version=1"></a><div class="content"><a class="author">Sandy Maguire</a><div class="metadata"><a href="#182113259" name="182113259"><div>2019-11-28 14:33:44</div></a></div><div class="text"><p>for bonus points add <code>KnownNat</code> constraints in there</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3d24a4100b3eab34d8ce3059d789c543?d=identicon&amp;version=1"></a><div class="content"><a class="author">Sandy Maguire</a><div class="metadata"><a href="#182113314" name="182113314"><div>2019-11-28 14:34:15</div></a></div><div class="text"><p>then you can pattern match on <code>Split</code>, pull out the relevant proxies, and rebuild <code>Junc</code> with them</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3d24a4100b3eab34d8ce3059d789c543?d=identicon&amp;version=1"></a><div class="content"><a class="author">Sandy Maguire</a><div class="metadata"><a href="#182113326" name="182113326"><div>2019-11-28 14:34:28</div></a></div><div class="text"><p>which is a proof to GHC that these things have the same size you said they did</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?x=x&amp;version=2"></a><div class="content"><a class="author">Bolt</a><div class="metadata"><a href="#182114942" name="182114942"><div>2019-11-28 14:59:40</div></a></div><div class="text"><p>Interesting but that way the constructors will be a bit bloated <span aria-label="confused" class="emoji emoji-1f615" role="img" title="confused">:confused:</span> I'll try it!</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/068f19d948936a41dcd13e340bacb9344e28944c?x=x&amp;version=2"></a><div class="content"><a class="author">Bolt</a><div class="metadata"><a href="#182114953" name="182114953"><div>2019-11-28 14:59:46</div></a></div><div class="text"><p>Thanks !!</p></div></div></div></div></div><div class="ui vertical footer segment"><a href="https://github.com/srid/zulip-archive">Powered by Haskell</a></div></div></body></html>