<html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="Functor won&#39;t work, but I&#39;m looking for something that is more ... general than functor? Basically:
hmap :: (a -&gt; b) -&gt; f a -&gt; f b
hmap :: (a -&gt; b) -&gt; f a a -&gt; f b b
hmap :: (a -&gt; b) -&gt; f (g a) (h a) -&gt; f (g b) (g b)
hmap :: (a -&gt; b) -&gt; f (g a) -&gt; f (g a)
...



Does such a thing already exist?" name="description"><link href="https://funprog.srid.ca/haskell/transforming-an-inner-type.html" rel="canonical"><meta property="og:title" content="Transforming an inner type - Haskell"><meta property="og:site_name" content="Functional Programming Zulip Archive"><meta property="og:type" content="article"><meta property="og:article:section" content="Haskell"><meta property="og:article:modified_time" content="2020-04-22T22:49:50Z"><meta property="og:article:published_time" content="2020-04-22T21:57:51Z"><meta property="og:image" content="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"><title>Transforming an inner type - Haskell</title><style type="text/css">
div#thesite
{
  font-family   : "Open Sans", sans-serif;
  font-size     : 1em !important;
  margin-top    : 1em;
  margin-bottom : 1em;
}

div#thesite h1
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h2
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h3
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h4
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h5
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h6
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .ui.breadcrumb.rib .section
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .as-header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite code, pre, tt
{
  font-family : "SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace;
}

div#thesite .ui.breadcrumb.rib
{
  margin-bottom : 1em;
}



div#thesite .ui.comments.messages .comment .metadata a
{
  color : #808080;
}

div#thesite .ui.comments.messages .comment a.avatar img
{
  height : auto;
}

div#thesite .subtle
{
  color : #808080;
}


div#thesite .messages pre
{
  font-size : 85%;
  overflow  : auto;
  max-width : 100%;
}

div#thesite .messages .message_embed
{
  border-left  : solid 3px #808080;
  padding-left : 0.69999em;
}

div#thesite .messages .message_inline_image img
{
  max-width     : 100%;
  margin-bottom : 1em;
}


/* Generated with Clay, http://fvisser.nl/clay */</style><link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Open+Sans|Oswald&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto|Open+Sans&amp;display=swap" rel="stylesheet"></head><body><div id="thesite" class="ui text container"><div class="ui violet inverted top attached center aligned segment"><h1 class="ui huge header">Transforming an inner type - Haskell</h1></div><div class="ui attached segment"><div class="ui message"><p>Welcome to the Functional Programming Zulip Chat Archive. You can join the chat <a href="https://funprog.zulipchat.com">here</a>.</p></div><div class="ui breadcrumb rib"><a href="/" class="section">Home</a><i class="right angle icon divider"></i><a href="/haskell/" class="section">#Haskell</a><i class="right angle icon divider"></i><div class="active section">Transforming an inner type</div></div><div class="ui comments messages"><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194996295" name="194996295"><div>2020-04-22 21:57:51</div></a></div><div class="text"><p><code>Functor</code> won't work, but I'm looking for something that is more ... general than functor? Basically:</p>
<div class="codehilite"><pre><span></span><span class="nf">hmap</span> <span class="ow">::</span> <span class="p">(</span><span class="n">a</span> <span class="ow">-&gt;</span> <span class="n">b</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="n">f</span> <span class="n">a</span> <span class="ow">-&gt;</span> <span class="n">f</span> <span class="n">b</span>
<span class="nf">hmap</span> <span class="ow">::</span> <span class="p">(</span><span class="n">a</span> <span class="ow">-&gt;</span> <span class="n">b</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="n">f</span> <span class="n">a</span> <span class="n">a</span> <span class="ow">-&gt;</span> <span class="n">f</span> <span class="n">b</span> <span class="n">b</span>
<span class="nf">hmap</span> <span class="ow">::</span> <span class="p">(</span><span class="n">a</span> <span class="ow">-&gt;</span> <span class="n">b</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="n">f</span> <span class="p">(</span><span class="n">g</span> <span class="n">a</span><span class="p">)</span> <span class="p">(</span><span class="n">h</span> <span class="n">a</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="n">f</span> <span class="p">(</span><span class="n">g</span> <span class="n">b</span><span class="p">)</span> <span class="p">(</span><span class="n">g</span> <span class="n">b</span><span class="p">)</span>
<span class="nf">hmap</span> <span class="ow">::</span> <span class="p">(</span><span class="n">a</span> <span class="ow">-&gt;</span> <span class="n">b</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="n">f</span> <span class="p">(</span><span class="n">g</span> <span class="n">a</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="n">f</span> <span class="p">(</span><span class="n">g</span> <span class="n">a</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>


<p>Does such a thing already exist?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/520889f20a2c66a8f4bd5be6f37d2923?d=identicon&amp;version=1"></a><div class="content"><a class="author">Asad Saeeduddin</a><div class="metadata"><a href="#194996360" name="194996360"><div>2020-04-22 21:58:24</div></a></div><div class="text"><p>All of these are just <code>Functor</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/520889f20a2c66a8f4bd5be6f37d2923?d=identicon&amp;version=1"></a><div class="content"><a class="author">Asad Saeeduddin</a><div class="metadata"><a href="#194996372" name="194996372"><div>2020-04-22 21:58:37</div></a></div><div class="text"><p>it's just a pain in the ass in Haskell to witness this <code>Functor</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194996461" name="194996461"><div>2020-04-22 21:59:36</div></a></div><div class="text"><p>What I want:</p>
<div class="codehilite"><pre><span></span><span class="o">&gt;</span> <span class="n">hmap</span> <span class="n">show</span> <span class="p">(</span><span class="kt">Maybe</span> <span class="mi">2</span><span class="p">)</span>
<span class="kt">Maybe</span> <span class="s">&quot;2&quot;</span>

<span class="o">&gt;</span> <span class="n">hmap</span> <span class="n">show</span> <span class="p">(</span><span class="kt">Either</span> <span class="p">[</span><span class="kt">Maybe</span> <span class="mi">2</span><span class="p">]</span> <span class="p">(</span><span class="kt">Maybe</span> <span class="mi">3</span><span class="p">))</span>
<span class="kt">Either</span> <span class="p">[</span><span class="kt">Maybe</span> <span class="s">&quot;2&quot;</span><span class="p">]</span> <span class="p">(</span><span class="kt">Maybe</span> <span class="s">&quot;3&quot;</span><span class="p">)</span>
</pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194996485" name="194996485"><div>2020-04-22 21:59:56</div></a></div><div class="text"><p>If you <code>fmap</code> on Either, it is going to print: <code>Either [Maybe 2] "Maybe 3"</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/8ae3c3a98eb73541a0a410e92b025ebd?d=identicon&amp;version=1"></a><div class="content"><a class="author">Reed Mullanix</a><div class="metadata"><a href="#194996570" name="194996570"><div>2020-04-22 22:00:28</div></a></div><div class="text"><p>These are all Functors but not <code>Functor</code> if that makes sense</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194996606" name="194996606"><div>2020-04-22 22:00:51</div></a></div><div class="text"><p>Sure. How do I make it work in Haskell without having to write fmap snakes for each types?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/520889f20a2c66a8f4bd5be6f37d2923?d=identicon&amp;version=1"></a><div class="content"><a class="author">Asad Saeeduddin</a><div class="metadata"><a href="#194996609" name="194996609"><div>2020-04-22 22:00:53</div></a></div><div class="text"><p>Here is a number of newtypes:</p>
<div class="codehilite"><pre><span></span>newtype Join t a = Join (t a a)
newtype Compose f g a = Compose (f (g a))
newtype Inside t f g a = Inside (t (f a) (g a))
</pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/520889f20a2c66a8f4bd5be6f37d2923?d=identicon&amp;version=1"></a><div class="content"><a class="author">Asad Saeeduddin</a><div class="metadata"><a href="#194996643" name="194996643"><div>2020-04-22 22:01:07</div></a></div><div class="text"><p>all of these have <code>Functor</code> instances given suitable constraints</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/8ae3c3a98eb73541a0a410e92b025ebd?d=identicon&amp;version=1"></a><div class="content"><a class="author">Reed Mullanix</a><div class="metadata"><a href="#194996662" name="194996662"><div>2020-04-22 22:01:22</div></a></div><div class="text"><p>You gotta either scrap them typeclasses or pile up the newtypes</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194996666" name="194996666"><div>2020-04-22 22:01:28</div></a></div><div class="text"><p>Hmm</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/8ae3c3a98eb73541a0a410e92b025ebd?d=identicon&amp;version=1"></a><div class="content"><a class="author">Reed Mullanix</a><div class="metadata"><a href="#194996678" name="194996678"><div>2020-04-22 22:01:39</div></a></div><div class="text"><p>It's a pain :(</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/520889f20a2c66a8f4bd5be6f37d2923?d=identicon&amp;version=1"></a><div class="content"><a class="author">Asad Saeeduddin</a><div class="metadata"><a href="#194996681" name="194996681"><div>2020-04-22 22:01:41</div></a></div><div class="text"><p>all of your hmaps come down to applying a bunch of tedious newtypes, then using <code>fmap</code>, then removing all the newtypes</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#194996752" name="194996752"><div>2020-04-22 22:02:24</div></a></div><div class="text"><p><code>ApplyingVia</code> would be amazing here</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/8ae3c3a98eb73541a0a410e92b025ebd?d=identicon&amp;version=1"></a><div class="content"><a class="author">Reed Mullanix</a><div class="metadata"><a href="#194996776" name="194996776"><div>2020-04-22 22:02:44</div></a></div><div class="text"><p>More generally,  <code>ApplyingVia</code> would be amazing</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#194996785" name="194996785"><div>2020-04-22 22:02:50</div></a></div><div class="text"><p>well not "amazing", but light years ahead of all the manual newtypes</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194996790" name="194996790"><div>2020-04-22 22:02:58</div></a></div><div class="text"><p>This would be nice:</p>
<div class="codehilite"><pre><span></span>hmap :: Generic opaque =&gt; (a -&gt; b) -&gt; &lt;opaque container containing a&#39;s&gt; -&gt; &lt;same container, but a replaced by b&gt;

hmap @Int show (Either (Just 2) Nothing))
</pre></div>


<p>Couldn't such a function be made possible via <code>Generics</code>? /cc <span class="user-mention" data-user-id="225127">@TheMatten</span></p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/520889f20a2c66a8f4bd5be6f37d2923?d=identicon&amp;version=1"></a><div class="content"><a class="author">Asad Saeeduddin</a><div class="metadata"><a href="#194996820" name="194996820"><div>2020-04-22 22:03:28</div></a></div><div class="text"><p>Personally I think ApplyingVia would just be another kludge on a big tower of kludges</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/8ae3c3a98eb73541a0a410e92b025ebd?d=identicon&amp;version=1"></a><div class="content"><a class="author">Reed Mullanix</a><div class="metadata"><a href="#194996911" name="194996911"><div>2020-04-22 22:04:18</div></a></div><div class="text"><p>Well, yes</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/8ae3c3a98eb73541a0a410e92b025ebd?d=identicon&amp;version=1"></a><div class="content"><a class="author">Reed Mullanix</a><div class="metadata"><a href="#194997064" name="194997064"><div>2020-04-22 22:06:27</div></a></div><div class="text"><p>SYTC does have it's own problems, even though it is better in quite a few ways</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/8ae3c3a98eb73541a0a410e92b025ebd?d=identicon&amp;version=1"></a><div class="content"><a class="author">Reed Mullanix</a><div class="metadata"><a href="#194997272" name="194997272"><div>2020-04-22 22:08:33</div></a></div><div class="text"><p>Instead of a newtype explosion you can have these really long chains of functions manipulating records when things could just "work"</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3d24a4100b3eab34d8ce3059d789c543?d=identicon&amp;version=1"></a><div class="content"><a class="author">Sandy Maguire</a><div class="metadata"><a href="#194997347" name="194997347"><div>2020-04-22 22:09:49</div></a></div><div class="text"><p><span class="user-mention" data-user-id="251311">@Sridhar Ratnakumar</span> you can write that function sortaaaaaaaaa</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/520889f20a2c66a8f4bd5be6f37d2923?d=identicon&amp;version=1"></a><div class="content"><a class="author">Asad Saeeduddin</a><div class="metadata"><a href="#194997423" name="194997423"><div>2020-04-22 22:10:14</div></a></div><div class="text"><p>The thing about functional programming is that it's about programming with long chains of functions</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/520889f20a2c66a8f4bd5be6f37d2923?d=identicon&amp;version=1"></a><div class="content"><a class="author">Asad Saeeduddin</a><div class="metadata"><a href="#194997425" name="194997425"><div>2020-04-22 22:10:18</div></a></div><div class="text"><p>that's sort of its specialty</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/520889f20a2c66a8f4bd5be6f37d2923?d=identicon&amp;version=1"></a><div class="content"><a class="author">Asad Saeeduddin</a><div class="metadata"><a href="#194997444" name="194997444"><div>2020-04-22 22:10:35</div></a></div><div class="text"><p>so you can always factor them out or import them from libraries or build them up in convenient ways</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/8ae3c3a98eb73541a0a410e92b025ebd?d=identicon&amp;version=1"></a><div class="content"><a class="author">Reed Mullanix</a><div class="metadata"><a href="#194997495" name="194997495"><div>2020-04-22 22:11:04</div></a></div><div class="text"><p>Really what you need is some sort of type-directed term generation tool... <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/8ae3c3a98eb73541a0a410e92b025ebd?d=identicon&amp;version=1"></a><div class="content"><a class="author">Reed Mullanix</a><div class="metadata"><a href="#194997552" name="194997552"><div>2020-04-22 22:11:32</div></a></div><div class="text"><p>A set of tactics if you will</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3d24a4100b3eab34d8ce3059d789c543?d=identicon&amp;version=1"></a><div class="content"><a class="author">Sandy Maguire</a><div class="metadata"><a href="#194997662" name="194997662"><div>2020-04-22 22:12:38</div></a></div><div class="text"><p>i wrote a janky ass generic bitraversable instance the other day</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3d24a4100b3eab34d8ce3059d789c543?d=identicon&amp;version=1"></a><div class="content"><a class="author">Sandy Maguire</a><div class="metadata"><a href="#194997671" name="194997671"><div>2020-04-22 22:12:43</div></a></div><div class="text"><p>one that does exactly this thing you want, srid</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3d24a4100b3eab34d8ce3059d789c543?d=identicon&amp;version=1"></a><div class="content"><a class="author">Sandy Maguire</a><div class="metadata"><a href="#194997735" name="194997735"><div>2020-04-22 22:13:36</div></a></div><div class="text"><p>but it's disgusting as all hell <a href="https://github.com/isovector/hs2/blob/master/hs2-types/src/Hs2/Types/Loc.hs#L50-L138" title="https://github.com/isovector/hs2/blob/master/hs2-types/src/Hs2/Types/Loc.hs#L50-L138">https://github.com/isovector/hs2/blob/master/hs2-types/src/Hs2/Types/Loc.hs#L50-L138</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/isovector/hs2/blob/master/hs2-types/src/Hs2/Types/Loc.hs#L50-L138" style="background-image: url(https://avatars3.githubusercontent.com/u/307223?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/isovector/hs2/blob/master/hs2-types/src/Hs2/Types/Loc.hs#L50-L138" title="isovector/hs2">isovector/hs2</a></div><div class="message_embed_description">a new, WIP Haskell compiler. Contribute to isovector/hs2 development by creating an account on GitHub.</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/520889f20a2c66a8f4bd5be6f37d2923?d=identicon&amp;version=1"></a><div class="content"><a class="author">Asad Saeeduddin</a><div class="metadata"><a href="#194997744" name="194997744"><div>2020-04-22 22:13:40</div></a></div><div class="text"><p><span class="user-mention" data-user-id="251311">@Sridhar Ratnakumar</span> <code>&lt;opaque container containing a&gt;</code>s is <code>Functor</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/8ae3c3a98eb73541a0a410e92b025ebd?d=identicon&amp;version=1"></a><div class="content"><a class="author">Reed Mullanix</a><div class="metadata"><a href="#194997829" name="194997829"><div>2020-04-22 22:14:31</div></a></div><div class="text"><p>BTW, <span class="user-mention" data-user-id="225136">@Asad Saeeduddin</span>  <a href="https://agda.readthedocs.io/en/v2.6.1/language/implicit-arguments.html?highlight=tactics#tactic-arguments" title="https://agda.readthedocs.io/en/v2.6.1/language/implicit-arguments.html?highlight=tactics#tactic-arguments">https://agda.readthedocs.io/en/v2.6.1/language/implicit-arguments.html?highlight=tactics#tactic-arguments</a> might interest you as a point in the design space</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/8ae3c3a98eb73541a0a410e92b025ebd?d=identicon&amp;version=1"></a><div class="content"><a class="author">Reed Mullanix</a><div class="metadata"><a href="#194997884" name="194997884"><div>2020-04-22 22:15:22</div></a></div><div class="text"><p>The actual implementation is very rough, but the idea is super solid IMO</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/520889f20a2c66a8f4bd5be6f37d2923?d=identicon&amp;version=1"></a><div class="content"><a class="author">Asad Saeeduddin</a><div class="metadata"><a href="#194998015" name="194998015"><div>2020-04-22 22:16:55</div></a></div><div class="text"><p><span class="user-mention" data-user-id="250923">@Reed Mullanix</span> I think getting something to generate terms for you is more or less an orthogonal problem to the one of typeclasses not being first class. Type directed term generation is useful in contexts outside of typeclass dictionaries, and first class typeclass dictionaries are useful in contexts where they can't be generated from the types. There is a big overlap, but I think forcing one thing to be tied to another limits the utility of the resulting solution for both use cases</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/520889f20a2c66a8f4bd5be6f37d2923?d=identicon&amp;version=1"></a><div class="content"><a class="author">Asad Saeeduddin</a><div class="metadata"><a href="#194998028" name="194998028"><div>2020-04-22 22:17:08</div></a></div><div class="text"><p>I'll check it out, thanks</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/8ae3c3a98eb73541a0a410e92b025ebd?d=identicon&amp;version=1"></a><div class="content"><a class="author">Reed Mullanix</a><div class="metadata"><a href="#194998145" name="194998145"><div>2020-04-22 22:18:49</div></a></div><div class="text"><p>To clarify, I am 100% on board with 1st class dictionaries, to the point of getting rid of typeclasses altogether and just using implicits</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/8ae3c3a98eb73541a0a410e92b025ebd?d=identicon&amp;version=1"></a><div class="content"><a class="author">Reed Mullanix</a><div class="metadata"><a href="#194998286" name="194998286"><div>2020-04-22 22:20:34</div></a></div><div class="text"><p>The only reason people use typeclasses is for the automatic instance search, so if you add that, may as well make it programmable!</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#194998364" name="194998364"><div>2020-04-22 22:21:21</div></a></div><div class="text"><p>well apart from the "automatic instance search", there's also the "single instance" thing :(</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/8ae3c3a98eb73541a0a410e92b025ebd?d=identicon&amp;version=1"></a><div class="content"><a class="author">Reed Mullanix</a><div class="metadata"><a href="#194998389" name="194998389"><div>2020-04-22 22:21:48</div></a></div><div class="text"><p>That is just a constraint on the search though!</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#194998447" name="194998447"><div>2020-04-22 22:22:03</div></a></div><div class="text"><p>for <code>Set</code>s and <code>Map</code>s you would want it to be active</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#194998450" name="194998450"><div>2020-04-22 22:22:07</div></a></div><div class="text"><p>but not for <code>Monoid</code>s</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#194998497" name="194998497"><div>2020-04-22 22:22:44</div></a></div><div class="text"><p>is this explored somewhere?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/3d24a4100b3eab34d8ce3059d789c543?d=identicon&amp;version=1"></a><div class="content"><a class="author">Sandy Maguire</a><div class="metadata"><a href="#194998542" name="194998542"><div>2020-04-22 22:23:23</div></a></div><div class="text"><p><span class="user-mention" data-user-id="251311">@Sridhar Ratnakumar</span> another solution is this <a href="https://wiki.haskell.org/Scrap_your_boilerplate#fmap" title="https://wiki.haskell.org/Scrap_your_boilerplate#fmap">https://wiki.haskell.org/Scrap_your_boilerplate#fmap</a></p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950?d=identicon&amp;version=1"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#195000668" name="195000668"><div>2020-04-22 22:49:50</div></a></div><div class="text"><p>(of note: yes, it is explored - this is exactly what <a href="https://agda.readthedocs.io/en/v2.6.1/language/instance-arguments.html" title="https://agda.readthedocs.io/en/v2.6.1/language/instance-arguments.html">instance arguments</a> are in agda)</p></div></div></div></div></div><div class="ui vertical footer segment"><a href="https://github.com/srid/zulip-archive">Powered by Haskell</a> | Questions? Contact <a href="https://www.srid.ca">srid</a></div></div></body></html>