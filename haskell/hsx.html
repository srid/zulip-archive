<html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="@Sridhar Ratnakumar  I just found https://github.com/seereason/hsx2hs and I wonder whether it couldn&#39;t make inline HTML is something like Reflex much more readable
seereason/hsx2hsLiteral XML syntax in Haskell source code. Contribute to seereason/hsx2hs development by creating an account on GitHub." name="description"><link href="https://funprog.srid.ca/haskell/hsx.html" rel="canonical"><meta property="og:title" content="HSX - Haskell"><meta property="og:site_name" content="Functional Programming Zulip Archive"><meta property="og:type" content="article"><meta property="og:article:section" content="Haskell"><meta property="og:article:modified_time" content="2020-09-21T17:44:22Z"><meta property="og:article:published_time" content="2020-09-19T18:17:56Z"><meta property="og:image" content="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"><title>HSX - Haskell</title><style type="text/css">
div#thesite
{
  font-family   : "Open Sans", sans-serif;
  font-size     : 1em !important;
  margin-top    : 1em;
  margin-bottom : 1em;
}

div#thesite h1
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h2
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h3
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h4
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h5
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h6
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .ui.breadcrumb.rib .section
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .as-header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite code, pre, tt
{
  font-family : "SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace;
}

div#thesite .ui.breadcrumb.rib
{
  margin-bottom : 1em;
}



div#thesite .ui.comments.messages .comment .metadata a
{
  color : #808080;
}

div#thesite .ui.comments.messages .comment a.avatar img
{
  height : auto;
}

div#thesite .subtle
{
  color : #808080;
}


div#thesite .messages pre
{
  font-size : 85%;
  overflow  : auto;
  max-width : 100%;
}

div#thesite .messages .message_embed
{
  border-left  : solid 3px #808080;
  padding-left : 0.69999em;
}

div#thesite .messages .message_inline_image img
{
  max-width     : 100%;
  margin-bottom : 1em;
}


/* Generated with Clay, http://fvisser.nl/clay */</style><link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Open+Sans|Oswald&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto|Open+Sans&amp;display=swap" rel="stylesheet"></head><body><div id="thesite" class="ui text container"><div class="ui violet inverted top attached center aligned segment"><h1 class="ui huge header">HSX - Haskell</h1></div><div class="ui attached segment"><div class="ui message"><p>Welcome to the Functional Programming Zulip Chat Archive. You can join the chat <a href="https://funprog.zulipchat.com">here</a>.</p></div><div class="ui breadcrumb rib"><a href="/" class="section">Home</a><i class="right angle icon divider"></i><a href="/haskell/" class="section">#Haskell</a><i class="right angle icon divider"></i><div class="active section">HSX</div></div><div class="ui comments messages"><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#210627761" name="210627761"><div>2020-09-19 18:17:56</div></a></div><div class="text"><p><span class="user-mention" data-user-id="251311">@Sridhar Ratnakumar</span>  I just found <a href="https://github.com/seereason/hsx2hs">https://github.com/seereason/hsx2hs</a> and I wonder whether it couldn't make inline HTML is something like Reflex much more readable</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/seereason/hsx2hs" style="background-image: url(https://avatars3.githubusercontent.com/u/8678098?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/seereason/hsx2hs" title="seereason/hsx2hs">seereason/hsx2hs</a></div><div class="message_embed_description">Literal XML syntax in Haskell source code. Contribute to seereason/hsx2hs development by creating an account on GitHub.</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#210628064" name="210628064"><div>2020-09-19 18:23:30</div></a></div><div class="text"><p>Random example with hypothetical translation (that parses):</p>
<div class="codehilite"><pre><span></span><code><span class="nf">app</span> <span class="ow">=</span> <span class="n">divClass</span> <span class="s">&quot;container&quot;</span> <span class="o">$</span> <span class="kr">do</span>
  <span class="n">el</span> <span class="s">&quot;br&quot;</span> <span class="n">blank</span>
  <span class="n">elAttr</span> <span class="s">&quot;h1&quot;</span> <span class="p">(</span><span class="s">&quot;style&quot;</span> <span class="o">=:</span> <span class="s">&quot;text-align: center&quot;</span><span class="p">)</span> <span class="o">$</span> <span class="n">text</span> <span class="s">&quot;PEG SOLITAIRE&quot;</span>
  <span class="n">el</span> <span class="s">&quot;div&quot;</span> <span class="o">$</span> <span class="kr">do</span>
    <span class="n">el</span> <span class="s">&quot;br&quot;</span> <span class="n">blank</span>
    <span class="n">el</span> <span class="s">&quot;div&quot;</span> <span class="o">$</span> <span class="kr">do</span>
      <span class="n">rec</span>
        <span class="n">gs</span>  <span class="ow">&lt;-</span> <span class="n">foldDyn</span> <span class="n">move</span> <span class="n">initialState</span> <span class="n">pos</span>
        <span class="n">pos</span> <span class="ow">&lt;-</span> <span class="n">mkBoard</span> <span class="n">gs</span>
        <span class="n">elAttr</span> <span class="s">&quot;h3&quot;</span> <span class="p">(</span><span class="s">&quot;style&quot;</span> <span class="o">=:</span> <span class="s">&quot;text-align: center&quot;</span><span class="p">)</span> <span class="o">$</span>
          <span class="n">dynText</span> <span class="o">$</span> <span class="n">fmap</span> <span class="p">(</span><span class="nf">\</span><span class="n">g</span> <span class="ow">-&gt;</span> <span class="s">&quot;Score: &quot;</span> <span class="o">&lt;&gt;</span> <span class="p">(</span><span class="kt">T</span><span class="o">.</span><span class="n">pack</span> <span class="o">.</span> <span class="n">show</span> <span class="o">.</span> <span class="n">score</span><span class="p">)</span> <span class="n">g</span><span class="p">)</span> <span class="n">gs</span>
      <span class="n">return</span> <span class="nb">()</span>

<span class="nf">app</span> <span class="ow">=</span> <span class="o">&lt;</span><span class="n">container</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">br</span> <span class="o">/&gt;</span>
  <span class="o">&lt;</span><span class="n">h1</span> <span class="n">style</span><span class="ow">=</span><span class="s">&quot;text-align: center&quot;</span><span class="o">&gt;</span><span class="kt">PEG</span> <span class="kt">SOLITAIRE</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">br</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;&lt;%</span> <span class="kr">do</span>
      <span class="n">rec</span>
        <span class="n">gs</span>  <span class="ow">&lt;-</span> <span class="n">foldDyn</span> <span class="n">move</span> <span class="n">initialState</span> <span class="n">pos</span>
        <span class="n">pos</span> <span class="ow">&lt;-</span> <span class="n">mkBoard</span> <span class="n">gs</span>
        <span class="o">&lt;</span><span class="n">h3</span> <span class="n">style</span><span class="ow">=</span><span class="s">&quot;text-align: center&quot;</span><span class="o">&gt;</span>
          <span class="o">&lt;%</span> <span class="n">dynText</span> <span class="o">$</span> <span class="n">fmap</span> <span class="p">(</span><span class="nf">\</span><span class="n">g</span> <span class="ow">-&gt;</span> <span class="s">&quot;Score: &quot;</span> <span class="o">&lt;&gt;</span> <span class="p">(</span><span class="kt">T</span><span class="o">.</span><span class="n">pack</span> <span class="o">.</span> <span class="n">show</span> <span class="o">.</span> <span class="n">score</span><span class="p">)</span> <span class="n">g</span><span class="p">)</span> <span class="n">gs</span> <span class="o">%&gt;</span>
        <span class="o">&lt;/</span><span class="n">h3</span><span class="o">&gt;</span>
      <span class="n">return</span> <span class="nb">()</span>
    <span class="o">%&gt;&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">container</span><span class="o">&gt;</span>
</code></pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#210628183" name="210628183"><div>2020-09-19 18:25:51</div></a></div><div class="text"><p>I runs on <code>haskell-source-exts</code> and so it may not support all extensions and HS syntax quirks, but I would have no problem moving few problematic definitions around to get this syntax working</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=3"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#210628381" name="210628381"><div>2020-09-19 18:29:36</div></a></div><div class="text"><p><span class="user-mention" data-user-id="225127">@TheMatten</span> readable for designers?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#210628764" name="210628764"><div>2020-09-19 18:36:32</div></a></div><div class="text"><p>I just find it less cluttered compared to <code>el..</code>, quotes, parens and several operators in normal syntax - but it may be personal taste after all <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=3"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#210628825" name="210628825"><div>2020-09-19 18:38:03</div></a></div><div class="text"><p>I can see it being useful for allowing <em>end-users</em> to customize the HTML, but that will require compiling (generated) Haskell code on every change - which is not totaly impractical, as we can ship <code>ghc</code> with neuron. :-)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=3"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#210628877" name="210628877"><div>2020-09-19 18:38:56</div></a></div><div class="text"><p>I'm of course thinking of <a href="https://github.com/srid/neuron/issues/253">https://github.com/srid/neuron/issues/253</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/neuron/issues/253" style="background-image: url(https://avatars2.githubusercontent.com/u/3998?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/neuron/issues/253" title="Full themes support 路 Issue #253 路 srid/neuron">Full themes support 路 Issue #253 路 srid/neuron</a></div><div class="message_embed_description">What we have right now is the ability to override color schemes. It would be nice to also be able to override HTML layout and CSS styles. Since neuron uses reflex-dom for HTML and clay for CSS, a t...</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#210629009" name="210629009"><div>2020-09-19 18:41:50</div></a></div><div class="text"><p>I mean, HS often makes in-language data construction pretty terse, it's just that there still seems to be some space for improvement<br>
<code>hsx2hs</code> seems to be quick, so I guess it won't make that much difference<br>
Oh, I didn't really think of possibility of using this as markup in <code>neuron</code>, but that sounds interesting too <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/520889f20a2c66a8f4bd5be6f37d2923"></a><div class="content"><a class="author">Asad Saeeduddin</a><div class="metadata"><a href="#210769872" name="210769872"><div>2020-09-21 17:02:07</div></a></div><div class="text"><p><span class="user-mention" data-user-id="225127">@TheMatten</span> In PureScript I ended up making a few infix operators for building up vdom elements from plain functions and records etc. Here's some examples of what it looks like:</p>
<div class="codehilite"><pre><span></span><code>  in R.section
     |= { className: &quot;todoapp&quot; }
     |&lt; [ hdr
        , veil $ R.section
          |= { className: &quot;main&quot; }
          |&lt; [ tgl
             , tds
             ]
        , veil $ ftr
        ]
     &lt;&gt; dbg
</code></pre></div>


<div class="codehilite"><pre><span></span><code>R.ul
     |= { className: &quot;filters&quot; }
     |&lt; [ R.li |~ all |- a All
        , R.li |~ act |- a Active
        , R.li |~ com |- a Completed
        ]
</code></pre></div>


<div class="codehilite"><pre><span></span><code>  in R.footer
     |= { className: &quot;footer&quot; }
     |&lt; [ R.span
          |= { className: &quot;todo-count&quot; }
          |- count
        , fltrs
        , veil
          $ clear
            |= { className: &quot;clear-completed&quot; }
            |- R.text &quot;Clear completed&quot;
        ]
</code></pre></div>


<div class="codehilite"><pre><span></span><code>  in R.header
     |= { className: &quot;header&quot; }
     |&lt; [ R.h1 |- R.text &quot;todos&quot;
        , inp |~ key $ { className: &quot;new-todo&quot;, placeholder: &quot;What needs to be done?&quot; }
        ]
</code></pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#210775473" name="210775473"><div>2020-09-21 17:44:22</div></a></div><div class="text"><p>Oh, that's nice<br>
I ended up using qualified do (in PS too):</p>
<div class="codehilite"><pre><span></span><code>  <span class="kt">I</span><span class="o">.</span><span class="n">input</span> <span class="kt">O</span><span class="o">.</span><span class="kr">do</span>
    <span class="kt">I</span><span class="o">.</span><span class="n">ref</span> <span class="n">input</span>
    <span class="kt">I</span><span class="o">.</span><span class="n">placeholder</span> <span class="s">&quot;Type something&quot;</span>
    <span class="kt">I</span><span class="o">.</span><span class="n">errorD</span> <span class="o">$</span> <span class="kt">String</span><span class="o">.</span><span class="n">contains</span> <span class="p">(</span><span class="kt">String</span><span class="o">.</span><span class="kt">Pattern</span> <span class="s">&quot;e&quot;</span><span class="p">)</span> <span class="o">&lt;$&gt;</span> <span class="kt">R</span><span class="o">.</span><span class="n">value</span> <span class="n">input</span>
</code></pre></div></div></div></div></div></div><div class="ui vertical footer segment"><a href="https://github.com/srid/zulip-archive">Powered by Haskell</a> | Questions? Contact <a href="https://www.srid.ca">srid</a></div></div></body></html>