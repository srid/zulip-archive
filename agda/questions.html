<html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="Hi, beginner here working through PLFA. Would anyone be able to help provide an intuition on why function extensionality is not provable from within Agda. I’ve heard that it is possible with cubical agda - but i don’t have a good grasp on what that is yet. I’ve also heard agda’s type system describe" name="description"><link href="https://funprog.srid.ca/agda/questions.html" rel="canonical"><meta property="og:title" content="Questions - Agda"><meta property="og:site_name" content="Functional Programming Zulip Archive"><meta property="og:type" content="article"><meta property="og:article:section" content="Agda"><meta property="og:article:modified_time" content="2022-03-13T17:37:06Z"><meta property="og:article:published_time" content="2022-03-12T08:33:21Z"><title>Questions - Agda</title><style type="text/css">
div#thesite
{
  font-family   : "Open Sans", sans-serif;
  font-size     : 1em !important;
  margin-top    : 1em;
  margin-bottom : 1em;
}

div#thesite h1
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h2
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h3
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h4
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h5
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h6
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .ui.breadcrumb.rib .section
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .as-header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite code, pre, tt
{
  font-family : "SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace;
}

div#thesite .ui.breadcrumb.rib
{
  margin-bottom : 1em;
}



div#thesite .ui.comments.messages .comment .metadata a
{
  color : #808080;
}

div#thesite .ui.comments.messages .comment a.avatar img
{
  height : auto;
}

div#thesite .subtle
{
  color : #808080;
}


div#thesite .messages pre
{
  font-size : 85%;
  overflow  : auto;
  max-width : 100%;
}

div#thesite .messages .message_embed
{
  border-left  : solid 3px #808080;
  padding-left : 0.69999em;
}

div#thesite .messages .message_inline_image img
{
  max-width     : 100%;
  margin-bottom : 1em;
}


/* Generated with Clay, http://fvisser.nl/clay */</style><link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Open+Sans|Oswald&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto|Open+Sans&amp;display=swap" rel="stylesheet"></head><body><div id="thesite" class="ui text container"><div class="ui violet inverted top attached center aligned segment"><h1 class="ui huge header">Questions - Agda</h1></div><div class="ui attached segment"><div class="ui message"><p>Welcome to the Functional Programming Zulip Chat Archive. You can join the chat <a href="https://funprog.zulipchat.com">here</a>.</p></div><div class="ui breadcrumb rib"><a href="/" class="section">Home</a><i class="right angle icon divider"></i><a href="/agda/" class="section">#Agda</a><i class="right angle icon divider"></i><div class="active section">Questions</div></div><div class="ui comments messages"><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/1b1e7d93a8d5196263cbc98f4afa3c28"></a><div class="content"><a class="author">Sam Toth</a><div class="metadata"><a href="#275085093" name="275085093"><div>2022-03-12 08:33:21</div></a></div><div class="text"><p>Hi, beginner here working through PLFA. Would anyone be able to help provide an intuition on why function extensionality is not provable from within Agda. I’ve heard that it is possible with cubical agda - but i don’t have a good grasp on what that is yet. I’ve also heard agda’s type system described as intentional whereas others are extensional. Does this have anything to do with function extensionality or are they unrelated?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#275089625" name="275089625"><div>2022-03-12 10:31:06</div></a></div><div class="text"><p>it's "not true" in a sense - the traditional thing called equality in agda is "it's actually the 'same' thing", while that's not necessarily true for two functions that match pointwise</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#275089627" name="275089627"><div>2022-03-12 10:31:15</div></a></div><div class="text"><p>e.g. one function could have an entirely different algorithm</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#275089629" name="275089629"><div>2022-03-12 10:31:21</div></a></div><div class="text"><p>so they're not really "the same" as "programs"</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#275089676" name="275089676"><div>2022-03-12 10:32:11</div></a></div><div class="text"><p>I'm not familiar with path equality, and don't know what it means there (and why you can use it with cubical)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/1114fd8de67671f83d3a3ef7594b1950"></a><div class="content"><a class="author">Georgi Lyubenov // googleson78</a><div class="metadata"><a href="#275089754" name="275089754"><div>2022-03-12 10:34:33</div></a></div><div class="text"><p>I'm not sure about this, but if we want to be more precise, I'd wager that for two functions to be "the same" in vanilla agda (e.g. you can write <code>refl : f == g</code>) they need to have the same case/decision tree</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/1b1e7d93a8d5196263cbc98f4afa3c28"></a><div class="content"><a class="author">Sam Toth</a><div class="metadata"><a href="#275165515" name="275165515"><div>2022-03-13 17:29:23</div></a></div><div class="text"><p>Ahh okay that makes sense. I guess for things to be able to be refl  they need to have the same normal form - and since you cant pattern match/ deconstruct functions you can't build up any kind of proof to assert this. From a logical point of view I can see that just because two functions give the same result pointwise - to say that they are equal as a result is 'just like an opinion... man' </p>
<p>doing some testing in agda</p>
<div class="codehilite" data-code-language="Agda"><pre><span></span><code><span class="w">  </span><span class="nf">_+l_</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>ℕ<span class="w"> </span><span class="ow">→</span><span class="w"> </span>ℕ<span class="w"> </span><span class="ow">→</span><span class="w"> </span>ℕ<span class="w"></span>
<span class="w">  </span>zero<span class="w"> </span>+l<span class="w"> </span>b<span class="w"> </span><span class="ow">=</span><span class="w"> </span>b<span class="w"></span>
<span class="w">  </span>suc<span class="w"> </span>a<span class="w"> </span>+l<span class="w"> </span>b<span class="w"> </span><span class="ow">=</span><span class="w"> </span>suc<span class="w"> </span><span class="o">(</span>a<span class="w"> </span>+l<span class="w"> </span>b<span class="o">)</span><span class="w"></span>

<span class="w">  </span><span class="nf">_+r_</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>ℕ<span class="w"> </span><span class="ow">→</span><span class="w"> </span>ℕ<span class="w"> </span><span class="ow">→</span><span class="w"> </span>ℕ<span class="w"></span>
<span class="w">  </span>a<span class="w"> </span>+r<span class="w"> </span>zero<span class="w"> </span><span class="ow">=</span><span class="w"> </span>a<span class="w"></span>
<span class="w">  </span>a<span class="w"> </span>+r<span class="w"> </span>suc<span class="w"> </span>b<span class="w"> </span><span class="ow">=</span><span class="w"> </span>suc<span class="w"> </span><span class="o">(</span>a<span class="w"> </span>+r<span class="w"> </span>b<span class="o">)</span><span class="w"></span>


<span class="w">  </span><span class="nf">same</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>_+l_<span class="w"> </span>≡<span class="w"> </span>_+r_<span class="w"></span>
<span class="w">  </span>same<span class="w"> </span><span class="ow">=</span><span class="w">  </span>refl<span class="w">    </span><span class="c1">-- does not type check</span><span class="w"></span>

<span class="w">  </span><span class="nf">_+l'_</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>ℕ<span class="w"> </span><span class="ow">→</span><span class="w"> </span>ℕ<span class="w"> </span><span class="ow">→</span><span class="w"> </span>ℕ<span class="w"></span>
<span class="w">  </span>zero<span class="w"> </span>+l'<span class="w"> </span>b<span class="w"> </span><span class="ow">=</span><span class="w"> </span>b<span class="w"></span>
<span class="w">  </span>suc<span class="w"> </span>a<span class="w"> </span>+l'<span class="w"> </span>b<span class="w"> </span><span class="ow">=</span><span class="w"> </span>suc<span class="w"> </span><span class="o">(</span>a<span class="w"> </span>+l'<span class="w"> </span>b<span class="o">)</span><span class="w"></span>

<span class="w">  </span><span class="nf">same2</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>_+l_<span class="w"> </span>≡<span class="w"> </span>_+l'_<span class="w"></span>
<span class="w">  </span>same2<span class="w"> </span><span class="ow">=</span><span class="w">  </span>refl<span class="w">    </span><span class="c1">--  doesn't type check - but feels like it should</span><span class="w"></span>

<span class="w">   </span><span class="nf">id</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span><span class="ow">∀</span><span class="w"> </span><span class="o">{</span>A<span class="w"> </span><span class="ow">:</span><span class="w"> </span><span class="kt">Set</span><span class="o">}</span><span class="w"> </span><span class="ow">→</span><span class="w"> </span>A<span class="w"> </span><span class="ow">→</span><span class="w"> </span>A<span class="w"></span>
<span class="w">  </span>id<span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="ow">λ</span><span class="w"> </span>x<span class="w"> </span><span class="ow">→</span><span class="w"> </span>x<span class="w"></span>

<span class="w">  </span><span class="nf">id2</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span><span class="ow">∀</span><span class="w"> </span><span class="o">{</span>A<span class="w"> </span><span class="ow">:</span><span class="w"> </span><span class="kt">Set</span><span class="o">}</span><span class="w"> </span><span class="ow">→</span><span class="w"> </span>A<span class="w"> </span><span class="ow">→</span><span class="w"> </span>A<span class="w"></span>
<span class="w">  </span>id2<span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="ow">λ</span><span class="w"> </span>x<span class="w"> </span><span class="ow">→</span><span class="w"> </span>x<span class="w"></span>

<span class="w"> </span><span class="c1">-- Both of these type check</span><span class="w"></span>

<span class="w">  </span><span class="nf">test</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span><span class="ow">∀</span><span class="w"> </span><span class="o">{</span>A<span class="w"> </span><span class="ow">:</span><span class="w"> </span><span class="kt">Set</span><span class="o">}</span><span class="w"> </span><span class="ow">→</span><span class="w"> </span>id<span class="w"> </span><span class="o">{</span>A<span class="o">}</span><span class="w"> </span>≡<span class="w"> </span><span class="o">(</span><span class="ow">λ</span><span class="w"> </span>x<span class="w"> </span><span class="ow">→</span><span class="w"> </span>x<span class="o">)</span><span class="w"></span>
<span class="w">  </span>test<span class="w"> </span><span class="ow">=</span><span class="w"> </span>refl<span class="w"></span>

<span class="w">  </span><span class="nf">test2</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span><span class="ow">∀</span><span class="w"> </span><span class="o">{</span>A<span class="w"> </span><span class="ow">:</span><span class="w"> </span><span class="kt">Set</span><span class="o">}</span><span class="w"> </span><span class="ow">→</span><span class="w"> </span>id<span class="w"> </span><span class="o">{</span>A<span class="o">}</span><span class="w"> </span>≡<span class="w"> </span>id2<span class="w"> </span><span class="o">{</span>A<span class="o">}</span><span class="w"></span>
<span class="w">  </span>test2<span class="w"> </span><span class="ow">=</span><span class="w"> </span>refl<span class="w"></span>
</code></pre></div>
<p>I can understand why structurally  <code>+l</code> and <code>+r</code> are distinct but it seems odd that test and test2 with id functions type check but the <code>+l'</code> and <code>+l</code> don't.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://www.gravatar.com/avatar/1b1e7d93a8d5196263cbc98f4afa3c28"></a><div class="content"><a class="author">Sam Toth</a><div class="metadata"><a href="#275165852" name="275165852"><div>2022-03-13 17:37:06</div></a></div><div class="text"><p>Also from the book he says:  </p>
<blockquote>
<p>Postulating extensionality does not lead to difficulties, as it is known to be consistent with the theory that underlies Agda.</p>
</blockquote>
<p>It would be interesting to understand why this is true but I'm sure I would need to understand much more type theory before I could handle that  <span aria-label="confounded" class="emoji emoji-1f616" role="img" title="confounded">:confounded:</span></p></div></div></div></div></div><div class="ui vertical footer segment"><a href="https://github.com/srid/zulip-archive">Powered by Haskell</a> | Questions? Contact <a href="https://www.srid.ca">srid</a></div></div></body></html>