<html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="There was a pretty interesting addition to the Go generics discussion. I don&#39;t know if this is quite FP, but it does involve Philip Wadler, and type systems, so I thought it might interest people here.
the paper:
https://arxiv.org/abs/2005.11710
a talk on it by Philip Wadler:
YouTube - Phil Wadler: " name="description"><link href="https://funprog.srid.ca/general/featherweight-go.html" rel="canonical"><meta property="og:title" content="featherweight go - General"><meta property="og:site_name" content="Functional Programming Zulip Archive"><meta property="og:type" content="article"><meta property="og:article:section" content="General"><meta property="og:article:modified_time" content="2020-06-17T04:47:07Z"><meta property="og:article:published_time" content="2020-06-10T23:16:03Z"><meta property="og:image" content="https://secure.gravatar.com/avatar/2c3c795b7e14eeb6a5a5660a9c84593b?d=identicon&amp;version=1"><title>featherweight go - General</title><style type="text/css">
div#thesite
{
  font-family   : "Open Sans", sans-serif;
  font-size     : 1em !important;
  margin-top    : 1em;
  margin-bottom : 1em;
}

div#thesite h1
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h2
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h3
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h4
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h5
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h6
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .ui.breadcrumb.rib .section
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .as-header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite code, pre, tt
{
  font-family : "SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace;
}

div#thesite .ui.breadcrumb.rib
{
  margin-bottom : 1em;
}



div#thesite .ui.comments.messages .comment .metadata a
{
  color : #808080;
}

div#thesite .ui.comments.messages .comment a.avatar img
{
  height : auto;
}

div#thesite .subtle
{
  color : #808080;
}


div#thesite .messages pre
{
  font-size : 85%;
  overflow  : auto;
  max-width : 100%;
}

div#thesite .messages .message_embed
{
  border-left  : solid 3px #808080;
  padding-left : 0.69999em;
}

div#thesite .messages .message_inline_image img
{
  max-width     : 100%;
  margin-bottom : 1em;
}


/* Generated with Clay, http://fvisser.nl/clay */</style><link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Open+Sans|Oswald&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto|Open+Sans&amp;display=swap" rel="stylesheet"></head><body><div id="thesite" class="ui text container"><div class="ui violet inverted top attached center aligned segment"><h1 class="ui huge header">featherweight go - General</h1></div><div class="ui attached segment"><div class="ui message"><p>Welcome to the Functional Programming Zulip Chat Archive. You can join the chat <a href="https://funprog.zulipchat.com">here</a>.</p></div><div class="ui breadcrumb rib"><a href="/" class="section">Home</a><i class="right angle icon divider"></i><a href="/general/" class="section">#General</a><i class="right angle icon divider"></i><div class="active section">featherweight go</div></div><div class="ui comments messages"><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/2c3c795b7e14eeb6a5a5660a9c84593b?d=identicon&amp;version=1"></a><div class="content"><a class="author">Julian KG</a><div class="metadata"><a href="#200490079" name="200490079"><div>2020-06-10 23:16:03</div></a></div><div class="text"><p>There was a pretty interesting addition to the Go generics discussion. I don't know if this is quite FP, but it does involve Philip Wadler, and type systems, so I thought it might interest people here.</p>
<p>the paper:<br>
<a href="https://arxiv.org/abs/2005.11710">https://arxiv.org/abs/2005.11710</a></p>
<p>a talk on it by Philip Wadler:<br>
<a href="https://www.youtube.com/watch?v=Dq0WFigax_c">YouTube - Phil Wadler: Featherweight Go</a></p>
<p>One interesting result of this design is a unique kind of generic data structures. Because Go does not have ADTs it might seem like you can't ergonomically emulate types like <code>Maybe</code> and <code>List</code> but actually you can in a sort of way with this generics proposal. What you can do is specify an interface, and then implement the constructors as separate types that implement that interface.  for example you could have a struct Nil that contains no members, and a struct Cons that contains a member of type a, and a List a where List is an interface. One of the interesting outgrowths of this combined with Go's structural typing is that you define a bunch of types for free. For example I could create another struct that implements list called append, and it contains 2 List a. In Haskell if I have some code that uses lists and I realize I want to do something that uses a lot of appends, and that I should probably switch to a DList, it becomes a bit of a hassle. But in this version of Go it's not a problem.</p>
<div class="youtube-video message_inline_image"><a data-id="Dq0WFigax_c" href="https://www.youtube.com/watch?v=Dq0WFigax_c"><img src="https://i.ytimg.com/vi/Dq0WFigax_c/default.jpg"></a></div></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/4ba4faf2fc5818d37c0aed6acb5b69a2?d=identicon&amp;version=1"></a><div class="content"><a class="author">James King</a><div class="metadata"><a href="#200540791" name="200540791"><div>2020-06-11 13:03:53</div></a></div><div class="text"><p>In the talk he mentions the possibility of Haskell learning something from Go here -- a way out of the nominal structure of type classes would be my guess.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#200542279" name="200542279"><div>2020-06-11 13:16:50</div></a></div><div class="text"><p><span class="user-mention" data-user-id="250729">@James King</span> what does "nominal structure" mean?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/4ba4faf2fc5818d37c0aed6acb5b69a2?d=identicon&amp;version=1"></a><div class="content"><a class="author">James King</a><div class="metadata"><a href="#200542679" name="200542679"><div>2020-06-11 13:20:40</div></a></div><div class="text"><p><span class="user-mention" data-user-id="260881">@Torsten Schmits</span> that two types are equivalent or sub-types of one another by explicit declarations; in contrast to <em>structural</em> where a type that has similar structure can be considered a sub-type or equivalent to another.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/4ba4faf2fc5818d37c0aed6acb5b69a2?d=identicon&amp;version=1"></a><div class="content"><a class="author">James King</a><div class="metadata"><a href="#200542859" name="200542859"><div>2020-06-11 13:22:23</div></a></div><div class="text"><p>I don't recall him spelling it out in the talk but I assume he meant that Go does something useful here that would enable Haskell to shuffle around the type class hierarchy without forcing everyone to update their code.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#200545322" name="200545322"><div>2020-06-11 13:41:45</div></a></div><div class="text"><p>would that be a new language feature that allows specifying type class relationship with something other than dependency constraints?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#200545416" name="200545416"><div>2020-06-11 13:42:30</div></a></div><div class="text"><p>or is this about the equivalence of the types that inhabit type classes?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?x=x&amp;version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#200545686" name="200545686"><div>2020-06-11 13:44:38</div></a></div><div class="text"><p>Or maybe class <code>Generic</code>s <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#200546493" name="200546493"><div>2020-06-11 13:50:37</div></a></div><div class="text"><p><code>ClassKinds</code>?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/4ba4faf2fc5818d37c0aed6acb5b69a2?d=identicon&amp;version=1"></a><div class="content"><a class="author">James King</a><div class="metadata"><a href="#200547553" name="200547553"><div>2020-06-11 13:58:51</div></a></div><div class="text"><p>He wasn't specific -- if you want to know more I recommend watching the talk <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/4ba4faf2fc5818d37c0aed6acb5b69a2?d=identicon&amp;version=1"></a><div class="content"><a class="author">James King</a><div class="metadata"><a href="#200547687" name="200547687"><div>2020-06-11 13:59:53</div></a></div><div class="text"><p>Or maybe send him an email and let us know what he says.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#200547919" name="200547919"><div>2020-06-11 14:01:24</div></a></div><div class="text"><p><span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#200548147" name="200548147"><div>2020-06-11 14:02:58</div></a></div><div class="text"><p>my question was more about your explanation than what was hinted at in the talk</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/4ba4faf2fc5818d37c0aed6acb5b69a2?d=identicon&amp;version=1"></a><div class="content"><a class="author">James King</a><div class="metadata"><a href="#200550635" name="200550635"><div>2020-06-11 14:20:46</div></a></div><div class="text"><p>In that case to your first question, I <em>think</em> that might be what he was hinting at.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/4ba4faf2fc5818d37c0aed6acb5b69a2?d=identicon&amp;version=1"></a><div class="content"><a class="author">James King</a><div class="metadata"><a href="#200550794" name="200550794"><div>2020-06-11 14:21:59</div></a></div><div class="text"><p>Because he was mostly talking about type classes and specifically the change of monad's super classes</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/4ba4faf2fc5818d37c0aed6acb5b69a2?d=identicon&amp;version=1"></a><div class="content"><a class="author">James King</a><div class="metadata"><a href="#200550929" name="200550929"><div>2020-06-11 14:22:51</div></a></div><div class="text"><p>And how if we did this change in Haskell we could have avoided forcing everyone to update their code to handle the new hierarchy. Does that make sense?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#200551270" name="200551270"><div>2020-06-11 14:25:47</div></a></div><div class="text"><p>yes, interesting. thanks!</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/520889f20a2c66a8f4bd5be6f37d2923?d=identicon&amp;version=1"></a><div class="content"><a class="author">Asad Saeeduddin</a><div class="metadata"><a href="#200600215" name="200600215"><div>2020-06-11 20:17:57</div></a></div><div class="text"><p>It's not so much a way out of problems caused by typeclasses (although there's that too) but out of the more fundamental problem caused by generative type and data constructors (e.g. in the case of sum types). Every time you create a new data type in Haskell it can't hope to be more closely related to another type than via an explicit isomorphism that pollutes all your other code. In structural typing, types can end up being strictly equivalent</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/520889f20a2c66a8f4bd5be6f37d2923?d=identicon&amp;version=1"></a><div class="content"><a class="author">Asad Saeeduddin</a><div class="metadata"><a href="#200600823" name="200600823"><div>2020-06-11 20:22:08</div></a></div><div class="text"><p>e.g. <code>Compose (Const Foo) Bar</code> can actually be precisely <code>Const Foo</code>, you don't need to manage an isomorphism between those two everywhere</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/520889f20a2c66a8f4bd5be6f37d2923?d=identicon&amp;version=1"></a><div class="content"><a class="author">Asad Saeeduddin</a><div class="metadata"><a href="#200600935" name="200600935"><div>2020-06-11 20:23:15</div></a></div><div class="text"><p>or lists can actually be precisely the fixpoint of <code>\a r -&gt; Maybe (a, r)</code>, instead of only being isomorphic to it</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#200602174" name="200602174"><div>2020-06-11 20:32:27</div></a></div><div class="text"><p><span class="user-mention" data-user-id="225136">@Asad Saeeduddin</span> what does "generative" mean here?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/520889f20a2c66a8f4bd5be6f37d2923?d=identicon&amp;version=1"></a><div class="content"><a class="author">Asad Saeeduddin</a><div class="metadata"><a href="#200602287" name="200602287"><div>2020-06-11 20:33:44</div></a></div><div class="text"><p><span class="user-mention" data-user-id="260881">@Torsten Schmits</span> There's a good definition of it in this paper: <a href="https://www.microsoft.com/en-us/research/uploads/prod/2019/03/unsaturated-type-families-icfp-2019.pdf">https://www.microsoft.com/en-us/research/uploads/prod/2019/03/unsaturated-type-families-icfp-2019.pdf</a></p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/520889f20a2c66a8f4bd5be6f37d2923?d=identicon&amp;version=1"></a><div class="content"><a class="author">Asad Saeeduddin</a><div class="metadata"><a href="#200602320" name="200602320"><div>2020-06-11 20:33:59</div></a></div><div class="text"><p>but to quote it</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/520889f20a2c66a8f4bd5be6f37d2923?d=identicon&amp;version=1"></a><div class="content"><a class="author">Asad Saeeduddin</a><div class="metadata"><a href="#200602406" name="200602406"><div>2020-06-11 20:34:34</div></a></div><div class="text"><div class="codehilite"><pre><span></span><code>f and g are generative iff f a ~ g b =&gt; f ~ g
</code></pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/520889f20a2c66a8f4bd5be6f37d2923?d=identicon&amp;version=1"></a><div class="content"><a class="author">Asad Saeeduddin</a><div class="metadata"><a href="#200602435" name="200602435"><div>2020-06-11 20:34:50</div></a></div><div class="text"><p>where <code>~</code> is equality of types and <code>=&gt;</code> is implication</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/520889f20a2c66a8f4bd5be6f37d2923?d=identicon&amp;version=1"></a><div class="content"><a class="author">Asad Saeeduddin</a><div class="metadata"><a href="#200603252" name="200603252"><div>2020-06-11 20:41:45</div></a></div><div class="text"><p>in more natural language it means that it is impossible to exactly unify the type constructors introduced by two distinct <code>data</code>/<code>newtype</code> declarations by applying some arguments to each, even though it is very often the case that applying some type arguments to each gives you a pair of isomorphic types</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#200605745" name="200605745"><div>2020-06-11 21:02:54</div></a></div><div class="text"><p>if <code>a</code> and <code>b</code> don't matter for the equality, are they phantoms?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#200605805" name="200605805"><div>2020-06-11 21:03:29</div></a></div><div class="text"><p>that is, if they don't need to be equal</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/7334dc60b6aef6a75cd9284126231f13c76926a5?x=x&amp;version=3"></a><div class="content"><a class="author">Torsten Schmits</a><div class="metadata"><a href="#200606250" name="200606250"><div>2020-06-11 21:07:21</div></a></div><div class="text"><p>ah, no, it's a condition, so they do matter</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/520889f20a2c66a8f4bd5be6f37d2923?d=identicon&amp;version=1"></a><div class="content"><a class="author">Asad Saeeduddin</a><div class="metadata"><a href="#200614287" name="200614287"><div>2020-06-11 22:16:43</div></a></div><div class="text"><p>Yes, they may or may not be equal. It's simply saying that no possible <code>a</code> and <code>b</code> exist such that <code>f a ~ g b</code> unless <code>f ~ g</code>.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/2c3c795b7e14eeb6a5a5660a9c84593b?d=identicon&amp;version=1"></a><div class="content"><a class="author">Julian KG</a><div class="metadata"><a href="#201101218" name="201101218"><div>2020-06-17 04:47:07</div></a></div><div class="text"><p><a href="https://blog.golang.org/generics-next-step">https://blog.golang.org/generics-next-step</a> you can now try it out for yourself</p></div></div></div></div></div><div class="ui vertical footer segment"><a href="https://github.com/srid/zulip-archive">Powered by Haskell</a> | Questions? Contact <a href="https://www.srid.ca">srid</a></div></div></body></html>