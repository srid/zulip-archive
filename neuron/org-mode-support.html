<html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="Something unfortunate happened: I discovered org-mode, and would like to be able to take my neuron notes in org.
Pandoc supports conversion to and from org files, and many more file formats. Would it be possible for neuron to use the pandoc AST internally? (i.e. have type Zettel = ZettelT Pandoc)
Al" name="description"><link href="https://funprog.srid.ca/neuron/org-mode-support.html" rel="canonical"><meta property="og:title" content="org-mode support - Neuron"><meta property="og:site_name" content="Functional Programming Zulip Archive"><meta property="og:type" content="article"><meta property="og:article:section" content="Neuron"><meta property="og:article:modified_time" content="2020-08-02T01:24:02Z"><meta property="og:article:published_time" content="2020-05-08T09:59:15Z"><meta property="og:image" content="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"><title>org-mode support - Neuron</title><style type="text/css">
div#thesite
{
  font-family   : "Open Sans", sans-serif;
  font-size     : 1em !important;
  margin-top    : 1em;
  margin-bottom : 1em;
}

div#thesite h1
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h2
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h3
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h4
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h5
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h6
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .ui.breadcrumb.rib .section
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .as-header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite code, pre, tt
{
  font-family : "SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace;
}

div#thesite .ui.breadcrumb.rib
{
  margin-bottom : 1em;
}



div#thesite .ui.comments.messages .comment .metadata a
{
  color : #808080;
}

div#thesite .ui.comments.messages .comment a.avatar img
{
  height : auto;
}

div#thesite .subtle
{
  color : #808080;
}


div#thesite .messages pre
{
  font-size : 85%;
  overflow  : auto;
  max-width : 100%;
}

div#thesite .messages .message_embed
{
  border-left  : solid 3px #808080;
  padding-left : 0.69999em;
}

div#thesite .messages .message_inline_image img
{
  max-width     : 100%;
  margin-bottom : 1em;
}


/* Generated with Clay, http://fvisser.nl/clay */</style><link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Open+Sans|Oswald&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto|Open+Sans&amp;display=swap" rel="stylesheet"></head><body><div id="thesite" class="ui text container"><div class="ui violet inverted top attached center aligned segment"><h1 class="ui huge header">org-mode support - Neuron</h1></div><div class="ui attached segment"><div class="ui message"><p>Welcome to the Functional Programming Zulip Chat Archive. You can join the chat <a href="https://funprog.zulipchat.com">here</a>.</p></div><div class="ui breadcrumb rib"><a href="/" class="section">Home</a><i class="right angle icon divider"></i><a href="/neuron/" class="section">#Neuron</a><i class="right angle icon divider"></i><div class="active section">org-mode support</div></div><div class="ui comments messages"><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#196876584" name="196876584"><div>2020-05-08 09:59:15</div></a></div><div class="text"><p>Something unfortunate happened: I discovered org-mode, and would like to be able to take my neuron notes in org.<br>
Pandoc supports conversion to and from org files, and many more file formats. Would it be possible for neuron to use the pandoc AST internally? (i.e. have <code>type Zettel = ZettelT Pandoc</code>)<br>
Alternatively, how would one implement org support in neuron? Maybe neuron should be format-agnostic in its library, and provide markdown-specific features by default in the actual executable</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#196886793" name="196886793"><div>2020-05-08 12:03:07</div></a></div><div class="text"><p>The main challenge is the link extension. Let's say we add org format as one of the built-in formats to neuron. So .md uses mmark, .org uses Pandoc, .pmd uses Pandoc markdown ... How would we extract and render links and queries?</p>
<p>Can you think of a way we can do this while also supporting the use case of using it with just say mmark or commonmark parser?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#196889021" name="196889021"><div>2020-05-08 12:29:31</div></a></div><div class="text"><p>I'm not sure to understand the problem, mmark support would be dropped in favor of pandoc markdown, but pandoc supports a bunch of formats already so it should allow everything we would ever want. Extracting links is easy, the <code>pandoc-types</code> package defines the universal document type as well as a few functions to traverse its AST. Rendering links is not a problem either because in all cases, the export format would be HTML (though choosing the export format from the zettel metadata would be even better, but let's keep it simple for now)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#196889634" name="196889634"><div>2020-05-08 12:34:54</div></a></div><div class="text"><p>Ideally org support wouldn't be builtin, neuron could support multiple formats which could be installed individually e.g. by cabal flags or some equivalent nix feature, and the library part of neuron would only know about the pandoc type, and wouldn't care about how the parsing is handled at all (the pandoc type is very general, and handles metadata)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#196890689" name="196890689"><div>2020-05-08 12:45:40</div></a></div><div class="text"><p>Wait nevermind, I think neuron (the executable) depending on the full pandoc library isn't a bad idea after all, at least I see no better way to support multiple file formats</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#196891817" name="196891817"><div>2020-05-08 12:56:47</div></a></div><div class="text"><p>I'm currently playing with the commonmark-parser, and at the point where it seems I have to use the pandoc AST (in order to extract link info). I'm going to keep this at the back of the mind (also the original philosophy of keeping the system simple, and not complicated).</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#196891929" name="196891929"><div>2020-05-08 12:58:00</div></a></div><div class="text"><p><span class="user-mention" data-user-id="276419">@felko</span> by the way, just curious about your situation, which I don't think I understand well. I've used org-mode in the past, so I'm familiar with it. But why would anyone use <em>both</em> org-mode and neuron? They seem orthogonal to me (especially with org-roam).</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#196892458" name="196892458"><div>2020-05-08 13:02:56</div></a></div><div class="text"><p>org-roam and neuron(-mode) are parallel, but org-mode alone is rather orthogonal to neuron, and that's good because it means that somehow I could make some some elisp glue to combine the power of both</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#196892700" name="196892700"><div>2020-05-08 13:05:22</div></a></div><div class="text"><p>How well does pandoc parse org? Does it even support parsing org files?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#196892738" name="196892738"><div>2020-05-08 13:05:54</div></a></div><div class="text"><p>Let's assume for discussion that neuron internally uses pandoc AST to represent zettel document.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#196892889" name="196892889"><div>2020-05-08 13:07:05</div></a></div><div class="text"><p>pandoc seems to support org parsing and export yeah, but I can't say how well</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#196892942" name="196892942"><div>2020-05-08 13:07:31</div></a></div><div class="text"><p><a href="/user_uploads/13896/P6G7SQ4GZo8r4V3jXFLAQkzK/image.png" title="image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/13896/P6G7SQ4GZo8r4V3jXFLAQkzK/image.png" title="image.png"><img src="/user_uploads/13896/P6G7SQ4GZo8r4V3jXFLAQkzK/image.png"></a></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#196925991" name="196925991"><div>2020-05-08 17:33:09</div></a></div><div class="text"><p>Hmm, pandoc AST does work pretty well actually. All the link/query stuff can be done on the post-parsed AST (without having to deal with the original source markup)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#196926454" name="196926454"><div>2020-05-08 17:37:13</div></a></div><div class="text"><p>On the commonmark-side, we need an inline parser that that will create regular link nodes (of pandoc AST) from neuron links. It will look like this: <a href="/user_uploads/13896/UZoqlMg5TZTL-hL7f76cjdRm/image.png" title="image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/13896/UZoqlMg5TZTL-hL7f76cjdRm/image.png" title="image.png"><img src="/user_uploads/13896/UZoqlMg5TZTL-hL7f76cjdRm/image.png"></a></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#196926481" name="196926481"><div>2020-05-08 17:37:30</div></a></div><div class="text"><p>The org-mode parser would have to do something similar <span class="user-mention" data-user-id="276419">@felko</span></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#196926595" name="196926595"><div>2020-05-08 17:38:13</div></a></div><div class="text"><p>Then, once we have the pandoc AST, with ID link and z: links already put in regular <code>link</code> AST nodes, neuron would process them (eg: expand z:tags into tag tree HTML) without having to know anything about markdown or org.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#196927895" name="196927895"><div>2020-05-08 17:48:35</div></a></div><div class="text"><p>I believe org-mode supports the creation of custom link types, maybe we could use that feature. No sure how they are parsed into the pandoc AST</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#196937820" name="196937820"><div>2020-05-08 19:10:55</div></a></div><div class="text"><p>Pandoc AST is close to Html. It has a link node that maps straight to <code>a</code> element</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#197030416" name="197030416"><div>2020-05-10 03:38:09</div></a></div><div class="text"><p>Okay, I see how all of this would work together. Things are much simpler, actually. Use any input source format, as long as it can define normal HTML links. If the link URL is the same as the link text (the 'short links'), neuron will process them, as it will now operate only on the pandoc AST.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202435850" name="202435850"><div>2020-06-30 13:37:13</div></a></div><div class="text"><p>Ok I'm trying to implement this, not sure how I should organize the modules. I can't just make a <code>Neuron.Org</code> module in the library since it doesn't depend on <code>pandoc</code> anymore, which I need for <code>Text.Pandoc.Readers.Org.readOrg</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202436263" name="202436263"><div>2020-06-30 13:40:00</div></a></div><div class="text"><p>I think we've already covered this issue but it's been a long time</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202436469" name="202436469"><div>2020-06-30 13:41:23</div></a></div><div class="text"><p>not really related but TeX support would be a big selling point imo, i think many zettelkasten enthusiasts are also academics</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202436925" name="202436925"><div>2020-06-30 13:44:17</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="276419">felko</span> <a href="#narrow/stream/231929-Neuron/topic/org-mode.20support/near/196890689">said</a>:</p>
<blockquote>
<p>Wait nevermind, I think neuron (the executable) depending on the full pandoc library isn't a bad idea after all, at least I see no better way to support multiple file formats</p>
</blockquote>
<p>I said this ^ but I don't remember if you agreed</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202437121" name="202437121"><div>2020-06-30 13:45:38</div></a></div><div class="text"><p>why is the markdown parser in the src/lib already?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202437274" name="202437274"><div>2020-06-30 13:46:25</div></a></div><div class="text"><p><span class="user-mention" data-user-id="276419">@felko</span> yes, src/app can depend on Pandoc on whatever (but not src/lib as that have to compile on ghcjs). You can put the orgmode parser in src/app then</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202437322" name="202437322"><div>2020-06-30 13:46:41</div></a></div><div class="text"><p>ah right, for ghcjs</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202437342" name="202437342"><div>2020-06-30 13:46:48</div></a></div><div class="text"><p>ok then, thank you</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202437669" name="202437669"><div>2020-06-30 13:48:57</div></a></div><div class="text"><p>so src/app/Neuron/Org.hs?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202437741" name="202437741"><div>2020-06-30 13:49:32</div></a></div><div class="text"><p>For now yes. Once it is working we can move around</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202437766" name="202437766"><div>2020-06-30 13:49:42</div></a></div><div class="text"><p><span aria-label="check" class="emoji emoji-2705" role="img" title="check">:check:</span></p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202437988" name="202437988"><div>2020-06-30 13:51:03</div></a></div><div class="text"><p>yeah I was thinking <code>src/lib/Neuron/Format/Markdown.hs</code> and <code>src/app/Neuron/Format/Markdown.hs</code> would be cleaner, but I'll try to focus on the actual feature this time lol</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202437994" name="202437994"><div>2020-06-30 13:51:08</div></a></div><div class="text"><p>Eventually we can even make it general so that it works with any Pandoc input reader (like reST)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202438110" name="202438110"><div>2020-06-30 13:52:00</div></a></div><div class="text"><p>Yea don't do premature refactoring. Duplicate code is fine in the beginning</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202444138" name="202444138"><div>2020-06-30 14:38:34</div></a></div><div class="text"><p>Not sure how to proceed, buildZettelkasten is in the lib and uses the markdown parser</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202444315" name="202444315"><div>2020-06-30 14:39:41</div></a></div><div class="text"><p>Pass the 'reader' (eg: parseMarkdown) from app/Main.hs.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202444327" name="202444327"><div>2020-06-30 14:39:50</div></a></div><div class="text"><p>as arguments to <code>generateSite</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202444418" name="202444418"><div>2020-06-30 14:40:16</div></a></div><div class="text"><p>Should probably be <code>Map Text ReaderFunc</code> where the key is the fileextension (<code>md</code>, <code>org, </code>...)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202444762" name="202444762"><div>2020-06-30 14:42:22</div></a></div><div class="text"><p>Eventually neuron.dhall would specify this map, and they would be passed in the <code>Config</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202445107" name="202445107"><div>2020-06-30 14:44:28</div></a></div><div class="text"><p>that only builds the website, we still need to take org notes into account when building the graph</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202445203" name="202445203"><div>2020-06-30 14:45:03</div></a></div><div class="text"><p>not sure what you mean. you can't build the website without building the graph.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202445326" name="202445326"><div>2020-06-30 14:45:51</div></a></div><div class="text"><p>I can't figure out where but I guess generateSite calls buildZettelkasten at some point</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202445452" name="202445452"><div>2020-06-30 14:46:25</div></a></div><div class="text"><p>yeah that's in generatSite</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202445488" name="202445488"><div>2020-06-30 14:46:34</div></a></div><div class="text"><p>it calls loadZettelkasten</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202445501" name="202445501"><div>2020-06-30 14:46:38</div></a></div><div class="text"><p>note that <code>buildZettelkasten</code> is a pure function (cerveau uses it), and it should remain so</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202445540" name="202445540"><div>2020-06-30 14:46:56</div></a></div><div class="text"><p>that's ok, pandoc has a pure parser monad</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202445643" name="202445643"><div>2020-06-30 14:47:44</div></a></div><div class="text"><p>can I add the <code>Map Text ReaderFunc</code> argument to buildZettelkasten?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202445837" name="202445837"><div>2020-06-30 14:48:59</div></a></div><div class="text"><p>It currently takes an already-traversed list of files. <code>[(FilePath, Text)]</code>. So we shouldn't keep passing the extensions map once it is used. Maybe instead: <code>[(ReaderFunc, [(FilePath, Text)]]</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202445914" name="202445914"><div>2020-06-30 14:49:31</div></a></div><div class="text"><p>hmm, wait</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202445975" name="202445975"><div>2020-06-30 14:50:00</div></a></div><div class="text"><p>alright, let's do that, but I think buildZettelkasten should be split into a parsing function and a function that just builds the graph using the list of parsed zettels</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202446050" name="202446050"><div>2020-06-30 14:50:24</div></a></div><div class="text"><p>Actually, n/m - have it take <code>Map Text ReaderFunc</code> and match extensions in there. because, then Cerveau can pass the neuron.dhall's configuration straight to it.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202446105" name="202446105"><div>2020-06-30 14:50:48</div></a></div><div class="text"><p>ok</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202446126" name="202446126"><div>2020-06-30 14:50:56</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="276419">felko</span> <a href="#narrow/stream/231929-Neuron/topic/org-mode.20support/near/202445975">said</a>:</p>
<blockquote>
<p>alright, let's do that, but I think buildZettelkasten should be split into a parsing function and a function that just builds the graph using the list of parsed zettels</p>
</blockquote>
<p>that sounds like premature refactoring. we can do it later.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202446181" name="202446181"><div>2020-06-30 14:51:15</div></a></div><div class="text"><p>aim for a minimal diff. then let's see what can be changed</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202446237" name="202446237"><div>2020-06-30 14:51:43</div></a></div><div class="text"><p>yeah</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202446268" name="202446268"><div>2020-06-30 14:51:57</div></a></div><div class="text"><p>parsing actually happens in <code>parseZettels</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202446393" name="202446393"><div>2020-06-30 14:52:36</div></a></div><div class="text"><p>I suppose you'd pass the map to <code>parseZettels</code>, and that's where we would do the extension matching.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202446435" name="202446435"><div>2020-06-30 14:53:00</div></a></div><div class="text"><p>also, <code>ZettelParserError</code> should be reused, as a common error type between input formats.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202446504" name="202446504"><div>2020-06-30 14:53:35</div></a></div><div class="text"><p>noted</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202448103" name="202448103"><div>2020-06-30 15:03:44</div></a></div><div class="text"><p>can I put ZettelParserError in a separate module instead of importing <code>Neuron.Markdown (ZettelParserError(..))</code> in <code>Neuron.Org</code>? or is that also premature refactoring</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202448232" name="202448232"><div>2020-06-30 15:04:20</div></a></div><div class="text"><p>that's okay - since we know they will be moved out of it anyway</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202448472" name="202448472"><div>2020-06-30 15:06:04</div></a></div><div class="text"><p>with most forms of premature refactoring however, i would often find out later (based on new information) that how I had refactored wasn't correct. so i have to change things again. which is why it is best to get something working first, and once you have a better idea of the active code, that would be the best time to refactor.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202448762" name="202448762"><div>2020-06-30 15:08:05</div></a></div><div class="text"><p>this is a concise/better explanation of what i was trying to say:</p>
<blockquote>
<p>Attempting premature refactoring risks selecting a wrong abstraction, which can result in worse code as new requirements emerge[2] and will eventually need to be refactored again. <a href="https://en.wikipedia.org/wiki/Rule_of_three_(computer_programming)">https://en.wikipedia.org/wiki/Rule_of_three_(computer_programming)</a></p>
</blockquote></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202448772" name="202448772"><div>2020-06-30 15:08:09</div></a></div><div class="text"><p>yeah I get the idea but it's not always obvious to see if a specific refactor is premature or not, also its hard to break an old habit</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202448874" name="202448874"><div>2020-06-30 15:08:36</div></a></div><div class="text"><p>ah, didn't know that one</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202448913" name="202448913"><div>2020-06-30 15:08:51</div></a></div><div class="text"><p>some people even have the <em>opposite</em> habit. :-)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202449081" name="202449081"><div>2020-06-30 15:09:51</div></a></div><div class="text"><p>i used to do premature optimization all the time, and then at Obsidian (my first Haskell job) i got criticized to death in code reviews. took me a while to realize the benefits of it.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202453381" name="202453381"><div>2020-06-30 15:37:02</div></a></div><div class="text"><p>do you prefer me to make a draft PR so that you can review progressively when you have time?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202453489" name="202453489"><div>2020-06-30 15:37:24</div></a></div><div class="text"><p>ya good idea</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202455707" name="202455707"><div>2020-06-30 15:52:44</div></a></div><div class="text"><div class="codehilite"><pre><span></span><code><span class="nf">zettelIDSourceFileName</span> <span class="ow">::</span> <span class="kt">ZettelID</span> <span class="ow">-&gt;</span> <span class="kt">FilePath</span>
<span class="nf">zettelIDSourceFileName</span> <span class="n">zid</span> <span class="ow">=</span> <span class="n">toString</span> <span class="o">$</span> <span class="n">zettelIDText</span> <span class="n">zid</span> <span class="o">&lt;&gt;</span> <span class="s">&quot;.md&quot;</span>
</code></pre></div>


<p>ouch</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202460014" name="202460014"><div>2020-06-30 16:24:07</div></a></div><div class="text"><p>So we store the filename in <code>ZettelT</code>?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202460178" name="202460178"><div>2020-06-30 16:25:14</div></a></div><div class="text"><p>Or, just <code>format</code> in <code>ZettelT</code> (then construct filename out of it)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202460237" name="202460237"><div>2020-06-30 16:25:41</div></a></div><div class="text"><p>Related: what happens if there is both <code>foo.md</code> and <code>foo.org</code>?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202460402" name="202460402"><div>2020-06-30 16:26:42</div></a></div><div class="text"><p>To prevent such conflicts, one idea is to put the format in <code>ZettelID</code> - but make its <code>Eq</code> instance ignore the format.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202460442" name="202460442"><div>2020-06-30 16:27:04</div></a></div><div class="text"><p>Then <code>zettelIDSourceFileName</code> can be fixed trivially</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202460717" name="202460717"><div>2020-06-30 16:28:46</div></a></div><div class="text"><p>Meta question: why not support a single format only (eg: either md <em>or</em> org, but not both)? If not, what's the use case for simultaneous formats?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202461323" name="202461323"><div>2020-06-30 16:32:45</div></a></div><div class="text"><blockquote>
<p>Meta question: why not support a single format only (eg: either md or org, but not both)? If not, what's the use case for simultaneous formats?</p>
</blockquote>
<p>Sometimes I want org, sometimes I want markdown, and I would like to be able to write TeX to write my courses (mathjax is nice but not enough for writing TeX productively)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202461381" name="202461381"><div>2020-06-30 16:33:10</div></a></div><div class="text"><p>Maybe its just me but I know that I'll use different formats if neuron supports it</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202461460" name="202461460"><div>2020-06-30 16:33:45</div></a></div><div class="text"><p>ok - so we explicitly prevent cases like <code>foo.md</code> vs <code>foo.org</code> and have neuron produce an error for that zettel.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202461498" name="202461498"><div>2020-06-30 16:34:01</div></a></div><div class="text"><p>yes</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202461692" name="202461692"><div>2020-06-30 16:34:57</div></a></div><div class="text"><p>sorry I misunderstood your point, I didn't understand that you were talking about a single format for the same note</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202461794" name="202461794"><div>2020-06-30 16:35:35</div></a></div><div class="text"><p>No, I was talking about a single format for entire zettelkasten. But nevermind, your use case is a valid one.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202461815" name="202461815"><div>2020-06-30 16:35:42</div></a></div><div class="text"><p>ah</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202462482" name="202462482"><div>2020-06-30 16:40:19</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="251311">Sridhar Ratnakumar</span> <a href="#narrow/stream/231929-Neuron/topic/org-mode.20support/near/202460178">said</a>:</p>
<blockquote>
<p>So we store the filename in ZettelT?<br>
Or, just <code>format</code> in <code>ZettelT</code> (then construct filename out of it)</p>
</blockquote>
<p>I would say the filepath, since at several places <code>zettelJsonFull</code> is used, which adds the path<br>
having ZettelT store the path makes this function redundant</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202462604" name="202462604"><div>2020-06-30 16:41:20</div></a></div><div class="text"><p>We have two proposed approaches:</p>
<ol>
<li>Store filepath in <code>ZettelT</code></li>
<li>Store format in <code>ZettelID</code></li>
</ol>
<p>Without having thought this in detail, it seems to me that (2) is better. What do you think?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202462750" name="202462750"><div>2020-06-30 16:42:16</div></a></div><div class="text"><p>Note that <code>zettelJsonFull</code> uses absolute path, not relative. We still need it.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202462899" name="202462899"><div>2020-06-30 16:43:34</div></a></div><div class="text"><p>I prefer filepath in ZettelT because it feels more natural to me, storing the format in ZettelID suggests that <code>foo.md</code> and <code>foo.org</code> can coexist</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202462996" name="202462996"><div>2020-06-30 16:44:04</div></a></div><div class="text"><p>even if the Eq instance only compares the id itself</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202463034" name="202463034"><div>2020-06-30 16:44:19</div></a></div><div class="text"><p><a href="/user_uploads/13896/ar0Kqe8h9vyMxTTc5BX-o62r/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/13896/ar0Kqe8h9vyMxTTc5BX-o62r/image.png" title="image.png"><img src="/user_uploads/13896/ar0Kqe8h9vyMxTTc5BX-o62r/image.png"></a></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202463042" name="202463042"><div>2020-06-30 16:44:23</div></a></div><div class="text"><p>we do the same trick for ZettelT</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202463100" name="202463100"><div>2020-06-30 16:44:50</div></a></div><div class="text"><p>neither can ZettelT provide that guarantee. let me think</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202463662" name="202463662"><div>2020-06-30 16:48:13</div></a></div><div class="text"><p>The problem with (1) is that you can't determine the original filename associated with a zettel ID, without also knowing its file contents.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202463729" name="202463729"><div>2020-06-30 16:48:51</div></a></div><div class="text"><p>consider a http request action: <code>SaveZettel :: ZettelID -&gt; Text -&gt; m ()</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202463760" name="202463760"><div>2020-06-30 16:49:05</div></a></div><div class="text"><p>the server can determine the path to update solely from <code>ZettelID</code>. with (1) this won't be possible anymore.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202463804" name="202463804"><div>2020-06-30 16:49:31</div></a></div><div class="text"><p>hmm wait</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202463825" name="202463825"><div>2020-06-30 16:49:43</div></a></div><div class="text"><p>it can look in the zettelgraph</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202464103" name="202464103"><div>2020-06-30 16:51:47</div></a></div><div class="text"><p>another thing to take into consideration is that, presumably, adding a field to ZettelT takes less refactoring than wrapping the current zettel id into a record</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202464255" name="202464255"><div>2020-06-30 16:52:41</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="276419">felko</span> <a href="#narrow/stream/231929-Neuron/topic/org-mode.20support/near/202464103">said</a>:</p>
<blockquote>
<p>another thing to take into consideration is that, presumably, adding a field to ZettelT takes less refactoring than wrapping the current zettel id into a record</p>
</blockquote>
<p>that shouldn't be a factor in choosing an approach. if we have to refactor a lot to 'get things right', then so be it.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202464281" name="202464281"><div>2020-06-30 16:52:50</div></a></div><div class="text"><p>let me think how this would look like from cerveau's side.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202464317" name="202464317"><div>2020-06-30 16:53:06</div></a></div><div class="text"><p>ok</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202464391" name="202464391"><div>2020-06-30 16:53:37</div></a></div><div class="text"><p>how would metadata parsing look in the org reader?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202464406" name="202464406"><div>2020-06-30 16:53:47</div></a></div><div class="text"><p>tags and date</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202464758" name="202464758"><div>2020-06-30 16:56:09</div></a></div><div class="text"><p>it uses pandoc's meta type, which stores things like</p>
<div class="codehilite"><pre><span></span><code>#+TITLE my org zettel
#+DATE &quot;2020-06-30&quot;
</code></pre></div>


<p>I have two options:</p>
<ul>
<li>mimic the parseMarkdown approach and return <code>forall meta. FromJSON meta =&gt; FilePath -&gt; Text -&gt; Either ZettelParseError (Maybe meta, Pandoc)</code> (Pandoc provides a ToJSON instance for its meta type)</li>
<li>extract manually and return <code>Either ZettelParseError (Maybe Meta, Pandoc)</code></li>
</ul></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202464823" name="202464823"><div>2020-06-30 16:56:43</div></a></div><div class="text"><p>i don't know yet for tags, not sure what meta lists look like from org's side</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202465105" name="202465105"><div>2020-06-30 16:58:49</div></a></div><div class="text"><p>okay, back to the problem, first of all it seems to me that sooner or later we will need an ADT like this:</p>
<div class="codehilite"><pre><span></span><code><span class="kr">data</span> <span class="kt">ZettelFormat</span>
  <span class="ow">=</span> <span class="kt">ZettelFormat_Markdown</span>
  <span class="o">|</span> <span class="kt">ZettelFormat_Org</span>
</code></pre></div>


<p>assuming we have that, then <code>Map Text ZettelFormat</code> in neuron.dhall specifies format to use for a given file extension.</p>
<p>then, we can store this format value in <code>ZettelT</code> (<code>zettelFormat :: ZettelFormat</code>). we shouldn't need to store the filepath. </p>
<p>from the cerveau's side, it would look like:</p>
<div class="codehilite"><pre><span></span><code><span class="kt">SaveZettel</span> <span class="ow">::</span> <span class="kt">ZettelID</span> <span class="ow">-&gt;</span> <span class="kt">ZettelFormat</span> <span class="ow">-&gt;</span> <span class="kt">Text</span> <span class="ow">-&gt;</span> <span class="n">m</span> <span class="nb">()</span>
</code></pre></div>


<p>finally, the filename of a zettel can be determined from ZettelID and ZettelFormat.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202465326" name="202465326"><div>2020-06-30 17:00:10</div></a></div><div class="text"><p>it's worth keeping in mind that -- from an abstraction point of view -- we "forget" the notion of files/filenames/filesystem once the graph is built.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202465353" name="202465353"><div>2020-06-30 17:00:23</div></a></div><div class="text"><p>this is why i think filenames should not leak into higher layers</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202465422" name="202465422"><div>2020-06-30 17:01:00</div></a></div><div class="text"><p>sounds good to me</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202465597" name="202465597"><div>2020-06-30 17:02:07</div></a></div><div class="text"><p>I warn you, the first commit will be quite big, I hope you don't mind</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202465616" name="202465616"><div>2020-06-30 17:02:14</div></a></div><div class="text"><p><code>zettelFormat</code> would come in handy when rendering the zettel in cerveau. it can just dump the raw text if it is non-markdown.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202466097" name="202466097"><div>2020-06-30 17:06:06</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="251311">Sridhar Ratnakumar</span> <a href="#narrow/stream/231929-Neuron/topic/org-mode.20support/near/202465616">said</a>:</p>
<blockquote>
<p><code>zettelFormat</code> would come in handy when rendering the zettel in cerveau. it can just dump the raw text if it is non-markdown.</p>
</blockquote>
<p>off topic but maybe you can still display the zettel that are not in markdown if the <code>.neuron</code> directory is not gitignored, then you can just return the html that's already generated</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202466111" name="202466111"><div>2020-06-30 17:06:18</div></a></div><div class="text"><p>not sure if that works</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202466223" name="202466223"><div>2020-06-30 17:07:26</div></a></div><div class="text"><p>cerveau deals directly with github api. no local filesystem involved</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202466242" name="202466242"><div>2020-06-30 17:07:37</div></a></div><div class="text"><p>(it caches file content in database)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202466379" name="202466379"><div>2020-06-30 17:08:33</div></a></div><div class="text"><p>But - I can indeed generate the HTML on the fly in the <em>backend</em>, send that via API to the <em>frontend</em>. That's something I need to experiment with ... (you just won't get live editor preview though)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202466509" name="202466509"><div>2020-06-30 17:09:57</div></a></div><div class="text"><p>that's be cool i think, cerveau can also serve as a zettelkasten reader</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202466645" name="202466645"><div>2020-06-30 17:10:56</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="276419">felko</span> <a href="#narrow/stream/231929-Neuron/topic/org-mode.20support/near/202464758">said</a>:</p>
<blockquote>
<p>I have two options:</p>
<ul>
<li>mimic the parseMarkdown approach and return <code>forall meta. FromJSON meta =&gt; FilePath -&gt; Text -&gt; Either ZettelParseError (Maybe meta, Pandoc)</code> (Pandoc provides a ToJSON instance for its meta type)</li>
<li>extract manually and return <code>Either ZettelParseError (Maybe Meta, Pandoc)</code></li>
</ul>
</blockquote>
<p>what do you think about this? I'm afraid that the generated JSON will look a bit weird since it reflects the document structure of pandoc</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202466994" name="202466994"><div>2020-06-30 17:13:46</div></a></div><div class="text"><p><span class="user-mention" data-user-id="276419">@felko</span> generated JSON ? what do you mean?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202467166" name="202467166"><div>2020-06-30 17:15:00</div></a></div><div class="text"><p>and i don't understand your two options question, since they both return <code>Either ZettelParseError (Maybe Meta, Pandoc)</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202467213" name="202467213"><div>2020-06-30 17:15:24</div></a></div><div class="text"><p>oh, wait one is not polymorphic. that's okay - it is always <code>Meta</code> anyway</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202467372" name="202467372"><div>2020-06-30 17:16:32</div></a></div><div class="text"><p>alright, I just checked the implementation of ToJSON Pandoc.Meta (= what I meant by generated JSON) and its really pandoc-specific anyway, I'll do the non polymorphic option</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202467437" name="202467437"><div>2020-06-30 17:16:59</div></a></div><div class="text"><p>I imagine something like:</p>
<div class="codehilite"><pre><span></span><code><span class="kr">type</span> <span class="kt">NeuronReader</span> <span class="ow">=</span> <span class="kt">FilePath</span> <span class="ow">-&gt;</span> <span class="kt">Text</span> <span class="ow">-&gt;</span> <span class="kt">Either</span> <span class="kt">ZettelParseError</span> <span class="p">(</span><span class="kt">Maybe</span> <span class="kt">Meta</span><span class="p">,</span> <span class="kt">Pandoc</span><span class="p">)</span>

<span class="nf">readZettel</span> <span class="ow">::</span> <span class="kt">ZettelFormat</span> <span class="ow">-&gt;</span> <span class="kt">NeuronReader</span>
<span class="nf">readZettel</span> <span class="ow">=</span> <span class="nf">\</span><span class="kr">case</span>
  <span class="kt">ZettelFormat_Markdown</span> <span class="ow">-&gt;</span> <span class="kt">Neuron</span><span class="o">.</span><span class="kt">Markdown</span><span class="o">.</span><span class="n">parseMarkdown</span>
  <span class="o">...</span>
</code></pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202467953" name="202467953"><div>2020-06-30 17:21:02</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="276419">felko</span> <a href="#narrow/stream/231929-Neuron/topic/org-mode.20support/near/202464758">said</a>:</p>
<blockquote>
<p>it uses pandoc's meta type, which stores things like</p>
<div class="codehilite"><pre><span></span><code>#+TITLE my org zettel
#+DATE &quot;2020-06-30&quot;
</code></pre></div>


<p>I have two options:</p>
<ul>
<li>mimic the parseMarkdown approach and return <code>forall meta. FromJSON meta =&gt; FilePath -&gt; Text -&gt; Either ZettelParseError (Maybe meta, Pandoc)</code> (Pandoc provides a ToJSON instance for its meta type)</li>
<li>extract manually and return <code>Either ZettelParseError (Maybe Meta, Pandoc)</code></li>
</ul>
</blockquote>
<p>You don't need <code>TITLE</code> if there is a level 1 heading in the org note.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202468025" name="202468025"><div>2020-06-30 17:21:37</div></a></div><div class="text"><p>title in meta is deprecated</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202468049" name="202468049"><div>2020-06-30 17:21:50</div></a></div><div class="text"><p>eventually <code>tags</code> too will be deprecated</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202468172" name="202468172"><div>2020-06-30 17:22:32</div></a></div><div class="text"><p>right now, meta is used only for tags and date.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202468178" name="202468178"><div>2020-06-30 17:22:35</div></a></div><div class="text"><p>what if <code>type NeuronReader = Text -&gt; Either ZettelParseError (Maybe Meta, Pandoc)</code> instead?</p>
<div class="codehilite"><pre><span></span><code><span class="nf">parseZettels</span> <span class="ow">::</span>
  <span class="kt">Map</span><span class="o">.</span><span class="kt">Map</span> <span class="kt">Text</span> <span class="p">(</span><span class="kt">FilePath</span> <span class="ow">-&gt;</span> <span class="kt">ZettelReader</span><span class="p">)</span> <span class="ow">-&gt;</span>
  <span class="p">[(</span><span class="kt">FilePath</span><span class="p">,</span> <span class="kt">Text</span><span class="p">)]</span> <span class="ow">-&gt;</span>
  <span class="p">[</span><span class="kt">ZettelC</span><span class="p">]</span>
<span class="nf">parseZettels</span> <span class="n">readers</span> <span class="n">fs</span> <span class="ow">=</span>
  <span class="n">flip</span> <span class="n">mapMaybe</span> <span class="n">fs</span> <span class="o">$</span> <span class="nf">\</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="kr">do</span>
    <span class="c1">-- TODO either use fromJust since this is supposed to be unreachable</span>
    <span class="c1">--      or report unsupported extension</span>
    <span class="n">zreader</span> <span class="ow">&lt;-</span> <span class="kt">Map</span><span class="o">.</span><span class="n">lookup</span> <span class="p">(</span><span class="n">toText</span> <span class="o">$</span> <span class="n">takeExtension</span> <span class="n">path</span><span class="p">)</span> <span class="n">readers</span>
    <span class="n">zid</span> <span class="ow">&lt;-</span> <span class="n">getZettelID</span> <span class="n">path</span>
    <span class="n">pure</span> <span class="o">$</span> <span class="n">parseZettel</span> <span class="p">(</span><span class="n">zreader</span> <span class="n">path</span><span class="p">)</span> <span class="n">zid</span> <span class="n">s</span>
</code></pre></div>


<p>which allows me to do this in parseZettel:</p>
<div class="codehilite"><pre><span></span><code><span class="nf">parseZettel</span> <span class="ow">::</span>
  <span class="kt">ZettelReader</span> <span class="ow">-&gt;</span>
  <span class="kt">ZettelID</span> <span class="ow">-&gt;</span>
  <span class="kt">Text</span> <span class="ow">-&gt;</span>
  <span class="kt">ZettelC</span>
<span class="nf">parseZettel</span> <span class="n">zreader</span> <span class="n">zid</span> <span class="n">s</span> <span class="ow">=</span> <span class="kr">do</span>
  <span class="kr">case</span> <span class="n">zreader</span> <span class="n">s</span> <span class="kr">of</span>
    <span class="o">...</span>
</code></pre></div>


<p>the idea is that the path is passed in the closure instead of doing <code>case zreader (zettelIDSourceFileName zid) s of</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202468486" name="202468486"><div>2020-06-30 17:24:53</div></a></div><div class="text"><p>you mean - drop filename from the parser errors?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202468621" name="202468621"><div>2020-06-30 17:25:58</div></a></div><div class="text"><p>no, the map contains functions that take the filename as a parameter, the question is just whether we want ZettelReader to include the filename instead</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202468808" name="202468808"><div>2020-06-30 17:27:16</div></a></div><div class="text"><p>i see, okay, that's fine</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202468815" name="202468815"><div>2020-06-30 17:27:18</div></a></div><div class="text"><p>my solution allows me to reuse the ZettelReader alias in parseZettel, and take advantage of the fact that I don't need to compute the path anymore</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202468818" name="202468818"><div>2020-06-30 17:27:20</div></a></div><div class="text"><p>ok</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202500756" name="202500756"><div>2020-06-30 22:00:12</div></a></div><div class="text"><p>org doesn't seem to allow tags containing <code>/</code>, that's annoying<br>
I can define a <code>#+NEURON_TAGS</code> field that defines the neuron tags (as opposed to org tags) but I'm not really satisfied</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202500782" name="202500782"><div>2020-06-30 22:00:35</div></a></div><div class="text"><p>also I can't use <code>#+TAGS</code> since that's already used by org for something else</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202502875" name="202502875"><div>2020-06-30 22:25:46</div></a></div><div class="text"><p><a href="https://orgmode.org/manual/Tag-Inheritance.html#Tag-Inheritance">https://orgmode.org/manual/Tag-Inheritance.html#Tag-Inheritance</a></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202502885" name="202502885"><div>2020-06-30 22:26:01</div></a></div><div class="text"><p>It uses <code>:Peter:Boss:Secret:</code> instead of <code>Peter/Boss/Secret</code>? not sure how the pandoc parser represents it</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202502963" name="202502963"><div>2020-06-30 22:26:34</div></a></div><div class="text"><p>n/m - that's not hierarchical</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202503033" name="202503033"><div>2020-06-30 22:27:55</div></a></div><div class="text"><p>there is <a href="https://orgmode.org/manual/Tag-Hierarchy.html#Tag-Hierarchy">https://orgmode.org/manual/Tag-Hierarchy.html#Tag-Hierarchy</a> though, but I don't get it</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202503076" name="202503076"><div>2020-06-30 22:28:09</div></a></div><div class="text"><p>why does it not allow <code>/</code>? what _does_ it allow?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202503339" name="202503339"><div>2020-06-30 22:31:55</div></a></div><div class="text"><p>what about tags as a property ? <a href="https://orgmode.org/manual/Property-Syntax.html#Property-Syntax">https://orgmode.org/manual/Property-Syntax.html#Property-Syntax</a></p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202503395" name="202503395"><div>2020-06-30 22:32:17</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="251311">Sridhar Ratnakumar</span> <a href="#narrow/stream/231929-Neuron/topic/org-mode.20support/near/202503076">said</a>:</p>
<blockquote>
<p>why does it not allow <code>/</code>? what _does_ it allow?</p>
</blockquote>
<p>I think this is the relevant code (from pandoc)</p>
<div class="codehilite"><pre><span></span><code><span class="nf">orgTagWordChar</span> <span class="ow">::</span> <span class="kt">Monad</span> <span class="n">m</span> <span class="ow">=&gt;</span> <span class="kt">OrgParser</span> <span class="n">m</span> <span class="kt">Char</span>
<span class="nf">orgTagWordChar</span> <span class="ow">=</span> <span class="n">alphaNum</span> <span class="o">&lt;|&gt;</span> <span class="n">oneOf</span> <span class="s">&quot;@%#_&quot;</span>
</code></pre></div>


<p>no idea about org-mode itself, but I know org mode doesn't recognize tags with / either</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202503470" name="202503470"><div>2020-06-30 22:33:54</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="251311">Sridhar Ratnakumar</span> <a href="#narrow/stream/231929-Neuron/topic/org-mode.20support/near/202503339">said</a>:</p>
<blockquote>
<p>what about tags as a property ? <a href="https://orgmode.org/manual/Property-Syntax.html#Property-Syntax">https://orgmode.org/manual/Property-Syntax.html#Property-Syntax</a></p>
</blockquote>
<p>Good idea</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202503887" name="202503887"><div>2020-06-30 22:38:30</div></a></div><div class="text"><p>org-mode could add a lot more feature than what is currently supported in markdown,  it's up to you but I think it would be a waste to be conservative about having exactly the same behavior for all formats<br>
e.g. writing multiple zettels in the same file, inheriting tags, etc...</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202503941" name="202503941"><div>2020-06-30 22:39:21</div></a></div><div class="text"><p>let's get the simple case done, and then open up a proposal on github of what exactly that would look like.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202503956" name="202503956"><div>2020-06-30 22:39:33</div></a></div><div class="text"><p>yeah I was just thinking out loud</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202504081" name="202504081"><div>2020-06-30 22:40:49</div></a></div><div class="text"><p>you mentioned something about waiting org support for releasing 0.6, but that may take a while to implement and get it right, also I won't be working full time on this</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202504765" name="202504765"><div>2020-06-30 22:49:30</div></a></div><div class="text"><p><span class="user-mention" data-user-id="276419">@felko</span> i won't be thinking about release until mid-July'ish - but of course, no rush on an open source project.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202547561" name="202547561"><div>2020-07-01 09:25:03</div></a></div><div class="text"><p>I realize that <code>Reflex.DOM.Pandoc.URILink.queryURLLinks</code> alone cannot work with org, since custom org links need to be prefixed with the link type, e.g. <code>[[neuron:76ab876e]]</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202547592" name="202547592"><div>2020-07-01 09:25:27</div></a></div><div class="text"><p>we need to have a format-specific function for extracting links</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202547985" name="202547985"><div>2020-07-01 09:30:08</div></a></div><div class="text"><div class="codehilite"><pre><span></span><code>    <span class="c1">-- Extract all (valid) queries from the Pandoc document</span>
    <span class="n">extractQueries</span> <span class="ow">::</span> <span class="kt">MonadWriter</span> <span class="p">[</span><span class="kt">QueryParseError</span><span class="p">]</span> <span class="n">m</span> <span class="ow">=&gt;</span> <span class="kt">Pandoc</span> <span class="ow">-&gt;</span> <span class="n">m</span> <span class="p">[</span><span class="kt">Some</span> <span class="kt">ZettelQuery</span><span class="p">]</span>
    <span class="n">extractQueries</span> <span class="n">doc</span> <span class="ow">=</span>
      <span class="n">fmap</span> <span class="n">catMaybes</span> <span class="o">$</span> <span class="n">forM</span> <span class="p">(</span><span class="n">queryURILinks</span> <span class="n">doc</span><span class="p">)</span> <span class="o">$</span> <span class="nf">\</span><span class="n">ul</span> <span class="ow">-&gt;</span>
        <span class="kr">case</span> <span class="n">queryFromURILink</span> <span class="n">ul</span> <span class="kr">of</span>
          <span class="o">...</span>
</code></pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202548436" name="202548436"><div>2020-07-01 09:36:00</div></a></div><div class="text"><p>possible fix: rewrite</p>
<div class="codehilite"><pre><span></span><code><span class="kr">type</span> <span class="kt">ZettelReader</span> <span class="ow">=</span> <span class="kt">FilePath</span> <span class="ow">-&gt;</span> <span class="kt">Text</span> <span class="ow">-&gt;</span> <span class="kt">Either</span> <span class="kt">ZettelParseError</span> <span class="p">(</span><span class="kt">Maybe</span> <span class="kt">Meta</span><span class="p">,</span> <span class="kt">Pandoc</span><span class="p">)</span>
</code></pre></div>


<p>as</p>
<div class="codehilite"><pre><span></span><code><span class="kr">data</span> <span class="kt">ZettelReader</span> <span class="ow">=</span> <span class="kt">ZettelReader</span>
  <span class="p">{</span> <span class="n">readZettel</span> <span class="ow">::</span> <span class="kt">FilePath</span> <span class="ow">-&gt;</span> <span class="kt">Text</span> <span class="ow">-&gt;</span> <span class="kt">Either</span> <span class="kt">ZettelParseError</span> <span class="p">(</span><span class="kt">Maybe</span> <span class="kt">Meta</span><span class="p">,</span> <span class="kt">Pandoc</span><span class="p">),</span>
    <span class="n">extractQueries</span> <span class="ow">::</span> <span class="n">forall</span> <span class="n">m</span><span class="o">.</span> <span class="kt">MonadWriter</span> <span class="p">[</span><span class="kt">QueryParseError</span><span class="p">]</span> <span class="n">m</span> <span class="ow">=&gt;</span> <span class="kt">Pandoc</span> <span class="ow">-&gt;</span> <span class="n">m</span> <span class="p">[</span><span class="kt">Some</span> <span class="kt">ZettelQuery</span><span class="p">]</span>
  <span class="p">}</span>
</code></pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202553345" name="202553345"><div>2020-07-01 10:33:21</div></a></div><div class="text"><p>here's the PR in the meantime: <a href="https://github.com/srid/neuron/pull/263">https://github.com/srid/neuron/pull/263</a><br>
hope it's not too big</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/neuron/pull/263" style="background-image: url(https://avatars2.githubusercontent.com/u/3998?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/neuron/pull/263" title="WIP: Support for org notes by felko  Pull Request #263  srid/neuron">WIP: Support for org notes by felko  Pull Request #263  srid/neuron</a></div><div class="message_embed_description">Implements support for writing zettels in org-mode.

 Glue pandoc&#39;s org parser to neuron
 Extract metadata from the first headline&#39;s properties (date and tags)
 Take .org files into account...</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202574328" name="202574328"><div>2020-07-01 14:21:03</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="276419">felko</span> <a href="#narrow/stream/231929-Neuron/topic/org-mode.20support/near/202548436">said</a>:</p>
<blockquote>
<p>possible fix: rewrite</p>
<div class="codehilite"><pre><span></span><code><span class="kr">type</span> <span class="kt">ZettelReader</span> <span class="ow">=</span> <span class="kt">FilePath</span> <span class="ow">-&gt;</span> <span class="kt">Text</span> <span class="ow">-&gt;</span> <span class="kt">Either</span> <span class="kt">ZettelParseError</span> <span class="p">(</span><span class="kt">Maybe</span> <span class="kt">Meta</span><span class="p">,</span> <span class="kt">Pandoc</span><span class="p">)</span>
</code></pre></div>


<p>as</p>
<div class="codehilite"><pre><span></span><code><span class="kr">data</span> <span class="kt">ZettelReader</span> <span class="ow">=</span> <span class="kt">ZettelReader</span>
  <span class="p">{</span> <span class="n">readZettel</span> <span class="ow">::</span> <span class="kt">FilePath</span> <span class="ow">-&gt;</span> <span class="kt">Text</span> <span class="ow">-&gt;</span> <span class="kt">Either</span> <span class="kt">ZettelParseError</span> <span class="p">(</span><span class="kt">Maybe</span> <span class="kt">Meta</span><span class="p">,</span> <span class="kt">Pandoc</span><span class="p">),</span>
    <span class="n">extractQueries</span> <span class="ow">::</span> <span class="n">forall</span> <span class="n">m</span><span class="o">.</span> <span class="kt">MonadWriter</span> <span class="p">[</span><span class="kt">QueryParseError</span><span class="p">]</span> <span class="n">m</span> <span class="ow">=&gt;</span> <span class="kt">Pandoc</span> <span class="ow">-&gt;</span> <span class="n">m</span> <span class="p">[</span><span class="kt">Some</span> <span class="kt">ZettelQuery</span><span class="p">]</span>
  <span class="p">}</span>
</code></pre></div>


</blockquote>
<p>That sounds like configuration over convention (<a href="https://en.wikipedia.org/wiki/Convention_over_configuration">ref</a>). You shouldn't need to configure its behaviour if your orgmode parser returns the expected <code>Pandoc</code> structure. Basically for every <code>[[neuron:76ab876e]]</code>, produce a <code>Link</code> node with both link text and url set to <code>76ab876e</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202574490" name="202574490"><div>2020-07-01 14:22:18</div></a></div><div class="text"><p>You can use <code>walk</code> or <code>walkM</code> to transform the document: <a href="https://hackage.haskell.org/package/pandoc-types-1.21/docs/Text-Pandoc-Walk.html#v:walk">https://hackage.haskell.org/package/pandoc-types-1.21/docs/Text-Pandoc-Walk.html#v:walk</a></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202574691" name="202574691"><div>2020-07-01 14:24:03</div></a></div><div class="text"><p>Do we really need the <code>neuron:</code> prefix?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202575227" name="202575227"><div>2020-07-01 14:28:18</div></a></div><div class="text"><p>If we must have the prefix, let's make it <code>z:</code> instead of <code>neuron:</code> to be consistent with the rest of the queries</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202575782" name="202575782"><div>2020-07-01 14:33:11</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="251311">Sridhar Ratnakumar</span> <a href="#narrow/stream/231929-Neuron/topic/org-mode.20support/near/202575227">said</a>:</p>
<blockquote>
<p>If we must have the prefix, let's make it <code>z:</code> instead of <code>neuron:</code> to be consistent with the rest of the queries</p>
</blockquote>
<p>that's what I chose for now, see the last comment on the PR, so the links look like <code>[[z:zettel/id]]</code> currently, I think we can shrink it down to <code>[[z:id]]</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202575832" name="202575832"><div>2020-07-01 14:33:43</div></a></div><div class="text"><p><code>z:&lt;id&gt;</code> would prevent the user from having zettels.md and tags.md right?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202575963" name="202575963"><div>2020-07-01 14:34:48</div></a></div><div class="text"><p><span class="user-mention" data-user-id="276419">@felko</span> Just took a cursory look at the PR; structure looks good.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202576023" name="202576023"><div>2020-07-01 14:35:28</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="251311">Sridhar Ratnakumar</span> <a href="#narrow/stream/231929-Neuron/topic/org-mode.20support/near/202575832">said</a>:</p>
<blockquote>
<p><code>z:&lt;id&gt;</code> would prevent the user from having zettels.md and tags.md right?</p>
</blockquote>
<p>Hm good point, I didn't think about that,</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202576128" name="202576128"><div>2020-07-01 14:36:06</div></a></div><div class="text"><blockquote>
<p>You shouldn't need to configure its behaviour if your orgmode parser returns the expected Pandoc structure. Basically for every [[neuron:76ab876e]], produce a Link node with both link text and url set to 76ab876e</p>
</blockquote>
<p>alright, I'll do this instead</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202599557" name="202599557"><div>2020-07-01 17:38:28</div></a></div><div class="text"><p>Does not a link like <code>[[67c6f7a0.org]]</code> already work in org-mode?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202614555" name="202614555"><div>2020-07-01 19:38:19</div></a></div><div class="text"><p>I don't think so, I have very little experience with org-mode but after testing a few combinations, it seems that bracket links proceed in that order:</p>
<ul>
<li>if the adress is a valid URL, point to that</li>
<li>otherwise, test if is of the form <code>type:something</code> in which case it looks for a link type called <code>type</code> and passes <code>something</code> to the follow function corresponding to that link type</li>
<li>otherwise, the link is understood as an internal link, to another section in the same file</li>
</ul></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202616515" name="202616515"><div>2020-07-01 19:55:13</div></a></div><div class="text"><p>I just found out that angle links are supported by pandoc <a href="https://github.com/jgm/pandoc/blob/master/src/Text/Pandoc/Readers/Org/Inlines.hs#L447">https://github.com/jgm/pandoc/blob/master/src/Text/Pandoc/Readers/Org/Inlines.hs#L447</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/jgm/pandoc/blob/master/src/Text/Pandoc/Readers/Org/Inlines.hs#L447" style="background-image: url(https://avatars3.githubusercontent.com/u/3044?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/jgm/pandoc/blob/master/src/Text/Pandoc/Readers/Org/Inlines.hs#L447" title="jgm/pandoc">jgm/pandoc</a></div><div class="message_embed_description">Universal markup converter. Contribute to jgm/pandoc development by creating an account on GitHub.</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202620858" name="202620858"><div>2020-07-01 20:35:27</div></a></div><div class="text"><p>So <code>&lt;foo-bar&gt;</code> and <code>&lt;z:zettels?tag=foo&gt;</code> work in orgmode?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202621058" name="202621058"><div>2020-07-01 20:37:13</div></a></div><div class="text"><p><code>&lt;z:zettels?tag=foo&gt;</code> will work because it's an URL (it can also be treated as a custom link type on the emacs lisp side)<br>
sadly, I don't think <code>&lt;foo-bar&gt;</code> works</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202621181" name="202621181"><div>2020-07-01 20:38:19</div></a></div><div class="text"><p>weird thing is that I can't get pandoc to parse <code>&lt;z:zettel/id&gt;</code> as a link</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202621411" name="202621411"><div>2020-07-01 20:40:15</div></a></div><div class="text"><p>commonmark appears to have a much more configurable interface, regular pandoc readers are opaque</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202621700" name="202621700"><div>2020-07-01 20:43:04</div></a></div><div class="text"><p><code>&lt;z://zettel/id&gt;</code> works though</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202621838" name="202621838"><div>2020-07-01 20:44:33</div></a></div><div class="text"><p>One reason to favour [[..]] over &lt;..&gt; in org notes is that the former seems to be what people use for links. So it would be natural to use the same syntax on org.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202622063" name="202622063"><div>2020-07-01 20:46:51</div></a></div><div class="text"><p>do you insist on having zettel links display the exact title of the zettel, or would it be possible to allow links with description e.g. <code>[[z:zettel/id][desc]]</code>?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202622416" name="202622416"><div>2020-07-01 20:50:11</div></a></div><div class="text"><p>what about decoupling single zettel links from proper neuron queries?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202622498" name="202622498"><div>2020-07-01 20:51:23</div></a></div><div class="text"><p>e.g. having <code>[[z:id]]</code> and <code>[[neuron:zettels?tag=foo]]</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202622525" name="202622525"><div>2020-07-01 20:51:49</div></a></div><div class="text"><p>that's not really satisfying but at least there's no ambiguity</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202622586" name="202622586"><div>2020-07-01 20:52:14</div></a></div><div class="text"><p>Does <code>[[z:/id]]</code> work?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202622634" name="202622634"><div>2020-07-01 20:52:57</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="276419">felko</span> <a href="#narrow/stream/231929-Neuron/topic/org-mode.20support/near/202622063">said</a>:</p>
<blockquote>
<p>do you insist on having zettel links display the exact title of the zettel, or would it be possible to allow links with description e.g. <code>[[z:zettel/id][desc]]</code>?</p>
</blockquote>
<p>not a big fan of it</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202623009" name="202623009"><div>2020-07-01 20:56:26</div></a></div><div class="text"><p>yeah <code>[[z:/id]]</code> works</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202623072" name="202623072"><div>2020-07-01 20:57:08</div></a></div><div class="text"><p>that's your "near-short link" then!</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202623091" name="202623091"><div>2020-07-01 20:57:15</div></a></div><div class="text"><p>kind of hacky but maybe we can support both <code>[[z:id]]</code> and <code>[[z:/id]]</code>, then we can still refer to zettels called <code>zettels</code> or <code>tags</code> from org mode</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202623149" name="202623149"><div>2020-07-01 20:57:48</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="276419">felko</span> <a href="#narrow/stream/231929-Neuron/topic/org-mode.20support/near/202622498">said</a>:</p>
<blockquote>
<p>e.g. having <code>[[z:id]]</code> and <code>[[neuron:zettels?tag=foo]]</code></p>
</blockquote>
<p>I don't like this one, because then as an user you have an extra distinction to remember.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202623236" name="202623236"><div>2020-07-01 20:58:11</div></a></div><div class="text"><p>It is needless distinction, resulting solely because of implementation (pandoc parser)'s limitation</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202623275" name="202623275"><div>2020-07-01 20:58:31</div></a></div><div class="text"><p>yeah understandable, even though i think org mode users hardly ever enter links manually</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202623543" name="202623543"><div>2020-07-01 21:01:12</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="276419">felko</span> <a href="#narrow/stream/231929-Neuron/topic/org-mode.20support/near/202623091">said</a>:</p>
<blockquote>
<p>kind of hacky but maybe we can support both <code>[[z:id]]</code> and <code>[[z:/id]]</code>, then we can still refer to zettels called <code>zettels</code> or <code>tags</code> from org mode</p>
</blockquote>
<p><em>shrug</em>. i'd just go with <code>z:/id</code>. don't like to deal with an extra edge case if it saves only one character, but with an added complexity in parser</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202623743" name="202623743"><div>2020-07-01 21:03:10</div></a></div><div class="text"><p>ok let's go with <code>z:/id</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202931571" name="202931571"><div>2020-07-05 18:05:01</div></a></div><div class="text"><p>I'm testing this PR in cerveau. Involves more changes than I originally estimated.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202931577" name="202931577"><div>2020-07-05 18:05:17</div></a></div><div class="text"><p>One confusion is the notion of zettel "key" has changed.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202931581" name="202931581"><div>2020-07-05 18:05:37</div></a></div><div class="text"><p>It used to be just <code>ZettelID</code>, but now we have <em>custom</em> paths.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202931630" name="202931630"><div>2020-07-05 18:06:08</div></a></div><div class="text"><p>Very likely that I'm gonna replace the neuron.dhall config type with <code>[ZettelFormat]</code>, and always use <code>*.md</code> for Markdown, etc.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202931707" name="202931707"><div>2020-07-05 18:09:11</div></a></div><div class="text"><p>As well as renaming <code>zettelPath</code> -&gt; <code>zettelFileName</code> to make it clear there cannot be directories in the path</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202931733" name="202931733"><div>2020-07-05 18:09:52</div></a></div><div class="text"><p>Uhh, this is still confusing</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202931806" name="202931806"><div>2020-07-05 18:11:48</div></a></div><div class="text"><p>zettel IDs should still be unique, why can't the ID alone serve as the key?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202931872" name="202931872"><div>2020-07-05 18:13:26</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="251311">Sridhar Ratnakumar</span> <a href="#narrow/stream/231929-Neuron/topic/org-mode.20support/near/202931630">said</a>:</p>
<blockquote>
<p>Very likely that I'm gonna replace the neuron.dhall config type with <code>[ZettelFormat]</code>, and always use <code>*.md</code> for Markdown, etc.</p>
</blockquote>
<p>that's ok</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202931876" name="202931876"><div>2020-07-05 18:13:35</div></a></div><div class="text"><p>ID alone cannot serve as the key to retrieve content; you need to know whether to find foo.md or <a href="http://foo.org">foo.org</a>.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202931885" name="202931885"><div>2020-07-05 18:14:01</div></a></div><div class="text"><p>Unless you load the neuron graph to look it up</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202931947" name="202931947"><div>2020-07-05 18:15:11</div></a></div><div class="text"><p>isn't the graph loaded when using cerveau?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202932010" name="202932010"><div>2020-07-05 18:16:11</div></a></div><div class="text"><p>not all of the web app is stateful</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202932038" name="202932038"><div>2020-07-05 18:17:22</div></a></div><div class="text"><p>wasn't cerveau meant to support markdown only anyway?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202932087" name="202932087"><div>2020-07-05 18:18:03</div></a></div><div class="text"><p>doesn't have to be (only real-time preview strictly needs markdown)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202932405" name="202932405"><div>2020-07-05 18:27:13</div></a></div><div class="text"><p>umm, there might be other issues with supporting non-markdown formats in cerveau. i think i'll just focus on markdown.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202932417" name="202932417"><div>2020-07-05 18:27:42</div></a></div><div class="text"><p>which makes me think: I should just make neuron.dhall specify a single format, not a list of formats</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202932419" name="202932419"><div>2020-07-05 18:27:57</div></a></div><div class="text"><p>so you won't have <a href="http://foo.org">foo.org</a> linking to bar.md</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202932459" name="202932459"><div>2020-07-05 18:28:13</div></a></div><div class="text"><p>that will just be confusing when loading the site on cerveau</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202932619" name="202932619"><div>2020-07-05 18:33:32</div></a></div><div class="text"><p>though from neuron perspective i can see the value of supporting multiple formats, if only to faciliate gradual migration.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202932685" name="202932685"><div>2020-07-05 18:35:06</div></a></div><div class="text"><p>Okay, let's say we support multiple formats: <code>["markdown", "org"]</code>. And cerveau can propagate "unsupported formats" error up to the ZIndex.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202932694" name="202932694"><div>2020-07-05 18:35:29</div></a></div><div class="text"><p>neuron can do the same too, if the user specifies <code>["markdown", "org", "blah"]</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202932695" name="202932695"><div>2020-07-05 18:35:30</div></a></div><div class="text"><p>yeah I was about to say that</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202932700" name="202932700"><div>2020-07-05 18:35:58</div></a></div><div class="text"><p>Which means if you specify <code>["org"]</code>, cerveau will show an empty zindex, with that error</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202942850" name="202942850"><div>2020-07-05 23:28:40</div></a></div><div class="text"><p><span class="user-mention" data-user-id="276419">@felko</span> Do you have anything left to do in the PR?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202942910" name="202942910"><div>2020-07-05 23:30:21</div></a></div><div class="text"><p>And I take that <code> [[z:/foo?cf]]</code> is the best possible linking syntax for orgmode ...</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202942923" name="202942923"><div>2020-07-05 23:31:46</div></a></div><div class="text"><p>i didn't have the time to work on it today but I can write tests maybe<br>
I was also waiting for you to see how it will play with cerveau<br>
other than that and documentation I think it's ready, what do you think?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202942962" name="202942962"><div>2020-07-05 23:32:25</div></a></div><div class="text"><p>cerveau part is done; what sorts of tests were you thinking of?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202943011" name="202943011"><div>2020-07-05 23:34:14</div></a></div><div class="text"><p>I don't know how exactly but it would be nice to test duplicate ID detection and parser edge cases (for both markdown and org, using real files in a sample zettelkasten)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#202943029" name="202943029"><div>2020-07-05 23:35:21</div></a></div><div class="text"><p>okay, i'll merge it after writing docs. if you get to writing those tests, we can merge it in a different PR</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202943030" name="202943030"><div>2020-07-05 23:35:36</div></a></div><div class="text"><p>alright <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202943087" name="202943087"><div>2020-07-05 23:38:01</div></a></div><div class="text"><p>about this:</p>
<blockquote>
<p>Select sensible defaults for the pandoc extensions</p>
</blockquote></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202943126" name="202943126"><div>2020-07-05 23:38:27</div></a></div><div class="text"><p>not sure if we should pick "hard line breaks" or whatever its called</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#202943184" name="202943184"><div>2020-07-05 23:40:05</div></a></div><div class="text"><p>i saw that pandoc has something to parse user-defined extension lists, it would be nice to be able to set pandoc extensions from neuron.dhall (or even, per zettel extensions, enabled in the metadata block)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/e83f765b1914f7523386f3724bf3572d?d=identicon&amp;version=1"></a><div class="content"><a class="author">porcuquine</a><div class="metadata"><a href="#205705090" name="205705090"><div>2020-08-02 00:56:34</div></a></div><div class="text"><p>Is there a way to customize how org mode is rendered? I see that by default, heading are numbered, but I'd like to change that. Ideally, I'd set a different default but that could be overridden if needed.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#205705100" name="205705100"><div>2020-08-02 00:57:43</div></a></div><div class="text"><p>If Pandoc allows such customization, neuron can (theortically).</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/e83f765b1914f7523386f3724bf3572d?d=identicon&amp;version=1"></a><div class="content"><a class="author">porcuquine</a><div class="metadata"><a href="#205705140" name="205705140"><div>2020-08-02 00:58:16</div></a></div><div class="text"><p>Where would I specify them?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#205705149" name="205705149"><div>2020-08-02 00:59:10</div></a></div><div class="text"><p>In the <code>def</code> argument to <code>readOrg</code> here: <a href="https://github.com/srid/neuron/blob/master/neuron/src/app/Neuron/Reader/Org.hs#L30">https://github.com/srid/neuron/blob/master/neuron/src/app/Neuron/Reader/Org.hs#L30</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/neuron/blob/master/neuron/src/app/Neuron/Reader/Org.hs#L30" style="background-image: url(https://avatars2.githubusercontent.com/u/3998?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/neuron/blob/master/neuron/src/app/Neuron/Reader/Org.hs#L30" title="srid/neuron">srid/neuron</a></div><div class="message_embed_description">Future-proof and simple-to-use notes system based on Zettelkasten. - srid/neuron</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#205705152" name="205705152"><div>2020-08-02 00:59:26</div></a></div><div class="text"><p><code>ReaderOptions</code> of <a href="https://hackage.haskell.org/package/pandoc-2.10.1/docs/Text-Pandoc-Readers.html#v:readOrg">https://hackage.haskell.org/package/pandoc-2.10.1/docs/Text-Pandoc-Readers.html#v:readOrg</a></p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/e83f765b1914f7523386f3724bf3572d?d=identicon&amp;version=1"></a><div class="content"><a class="author">porcuquine</a><div class="metadata"><a href="#205705257" name="205705257"><div>2020-08-02 01:02:42</div></a></div><div class="text"><p>Hmmm. For clarity, is there a user-level way to customize this, or would I need to customize neuron source to effect this? (I'm quite new to this.)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#205705755" name="205705755"><div>2020-08-02 01:21:05</div></a></div><div class="text"><p><span class="user-mention" data-user-id="327015">@porcuquine</span> No user-level way to customize; it will require changing neuron, by someone willing to do the investigation and hack on it.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/e83f765b1914f7523386f3724bf3572d?d=identicon&amp;version=1"></a><div class="content"><a class="author">porcuquine</a><div class="metadata"><a href="#205705832" name="205705832"><div>2020-08-02 01:24:02</div></a></div><div class="text"><p>Got it, thanks. I'll look into it as time time allows.</p></div></div></div></div></div><div class="ui vertical footer segment"><a href="https://github.com/srid/zulip-archive">Powered by Haskell</a></div></div></body></html>