<html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="https://github.com/srid/neuron/issues/49
That&#39;s a good idea, this can avoid creating too many tags.

Should querying for tag=journal include journal/work zettels as well? Or would this behaviour be specified explicitly by the user somehow?

I would prefer that tag queries only match the exact tag. I" name="description"><link href="https://funprog.srid.ca/neuron/hierarchical-tags.html" rel="canonical"><meta property="og:title" content="Hierarchical tags - Neuron"><meta property="og:site_name" content="Functional Programming Zulip Archive"><meta property="og:type" content="article"><meta property="og:article:section" content="Neuron"><meta property="og:article:modified_time" content="2020-04-17T16:05:57Z"><meta property="og:article:published_time" content="2020-04-05T22:32:29Z"><meta property="og:image" content="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"><title>Hierarchical tags - Neuron</title><style type="text/css">
div#thesite
{
  font-family   : "Open Sans", sans-serif;
  font-size     : 1em !important;
  margin-top    : 1em;
  margin-bottom : 1em;
}

div#thesite h1
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h2
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h3
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h4
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h5
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h6
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .ui.breadcrumb.rib .section
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .as-header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite code, pre, tt
{
  font-family : "SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace;
}

div#thesite .ui.breadcrumb.rib
{
  margin-bottom : 1em;
}



div#thesite .ui.comments.messages .comment .metadata a
{
  color : #808080;
}

div#thesite .ui.comments.messages .comment a.avatar img
{
  height : auto;
}

div#thesite .subtle
{
  color : #808080;
}


div#thesite .messages pre
{
  font-size : 85%;
  overflow  : auto;
  max-width : 100%;
}

div#thesite .messages .message_embed
{
  border-left  : solid 3px #808080;
  padding-left : 0.69999em;
}

div#thesite .messages .message_inline_image img
{
  max-width     : 100%;
  margin-bottom : 1em;
}


/* Generated with Clay, http://fvisser.nl/clay */</style><link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Open+Sans|Oswald&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto|Open+Sans&amp;display=swap" rel="stylesheet"></head><body><div id="thesite" class="ui text container"><div class="ui violet inverted top attached center aligned segment"><h1 class="ui huge header">Hierarchical tags - Neuron</h1></div><div class="ui attached segment"><div class="ui message"><p>Welcome to the Functional Programming Zulip Chat Archive. You can join the chat <a href="https://funprog.zulipchat.com">here</a>.</p></div><div class="ui breadcrumb rib"><a href="/" class="section">Home</a><i class="right angle icon divider"></i><a href="/neuron/" class="section">#Neuron</a><i class="right angle icon divider"></i><div class="active section">Hierarchical tags</div></div><div class="ui comments messages"><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#192981571" name="192981571"><div>2020-04-05 22:32:29</div></a></div><div class="text"><p><a href="https://github.com/srid/neuron/issues/49" title="https://github.com/srid/neuron/issues/49">https://github.com/srid/neuron/issues/49</a><br>
That's a good idea, this can avoid creating too many tags.</p>
<blockquote>
<p>Should querying for <code>tag=journal</code> include <code>journal/work</code> zettels as well? Or would this behaviour be specified explicitly by the user somehow?</p>
</blockquote>
<p>I would prefer that <code>tag</code> queries only match the exact tag. In my personal zettelkasten I would like to make "portals" kinda like wikipedia, the only way I found around this is to make a <code>note</code> tag and then do in the portal <code>zquery://search?tag=topic&amp;tag=note</code>. Maybe a new query like <code>zquery://search?category=journal</code> could be useful?</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/neuron/issues/49" style="background-image: url(https://avatars2.githubusercontent.com/u/3998?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/neuron/issues/49" title="Hierarchical tags support 路 Issue #49 路 srid/neuron">Hierarchical tags support 路 Issue #49 路 srid/neuron</a></div><div class="message_embed_description">If a zettel has the following metadata --- title: Some zettel tags: - journal/work --- Should querying for tag=journal include journal/work zettels as well? Or would this behaviour be specified exp...</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#192991502" name="192991502"><div>2020-04-06 03:09:54</div></a></div><div class="text"><p>I'm not sure I understand your portal example. Could you elaborate with some example?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#192991548" name="192991548"><div>2020-04-06 03:10:27</div></a></div><div class="text"><p>What's "topic" and "note"? What's the relation between them?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#192991577" name="192991577"><div>2020-04-06 03:11:43</div></a></div><div class="text"><blockquote>
<p>I would prefer that <code>tag</code> queries only match the exact tag.</p>
</blockquote>
<p>Okay, yea. Let's keep it this way. "Less magic" is good. For matching the whole tag tree, perhaps one can use<code>tag=journal&amp;tag=journal/*</code> EDIT: Actually the query does an AND. So we have to revamp the query format to support OR'ing.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#193014493" name="193014493"><div>2020-04-06 09:14:30</div></a></div><div class="text"><blockquote>
<p>What's "topic" and "note"? What's the relation between them?</p>
</blockquote>
<p>Let's say topic = calculus and I want to make a zettel that shows all topics I have written about related to mathematics (but without linking to the actual notes). Here's how I do this currently:</p>
<div class="codehilite"><pre><span></span>+ math (contains zquery://search?tag=math&amp;tag=portal)
|---+ calculus (tags: math, calculus, portal, contains zquery://search?tag=calculus&amp;tag=note)
|   |--- note1 (tags: math, calculus, note)
|   |--- note2 (tags: math, calculus, note)
|---+ algebra (tags: math, algebra, portal, contains zquery://search?tag=algebra&amp;tag=note)
|   |--- note1 (tags: math, algebra, note)
|   |--- note2 (tags: math, algebra, note)
</pre></div>


<p>I need to make the <code>portal</code> and <code>note</code> tags to avoid the <code>calculus</code> and <code>algebra</code> zettels linking to themselves.<br>
With hierarchical tags I could do <code>tag=math/*/</code> in the <code>math</code> zettel and <code>tag=math/calculus/*</code> in the <code>calculus</code> zettel.<br>
Also, recursive globs like <code>math/**</code> could be useful.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#193254449" name="193254449"><div>2020-04-07 22:06:54</div></a></div><div class="text"><p>In that scheme, if I want to include everything under one tag, including that tag, I'd do: <code>tag=journal OR tag=journal/**</code>. I wonder if that can be simplified somehow.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#193254537" name="193254537"><div>2020-04-07 22:08:03</div></a></div><div class="text"><p>Maybe <code>tagFrom=journal</code>. And for your case, <code>tagUnder=math/calculus</code> (excludes <code>math/calculus</code> itself). I'm not too happy about this, but it is one idea.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#194316793" name="194316793"><div>2020-04-16 14:57:08</div></a></div><div class="text"><p>I said I wasn't going to be able to contribute this week but actually I need hierarchical tags to start taking my course notes so I decided to implement them.<br>
I went for the globbing mechanism but with <code>tagFrom</code>/<code>tagUnder</code> syntactic sugar, are you ok with that?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194317146" name="194317146"><div>2020-04-16 14:59:18</div></a></div><div class="text"><p>Let me think about it. I'd like to see that simplified, because tagFrom/tagUnder is something no other software uses, so it is a new thing one needs to learn and remember (in fact, I had to re-read my own message to understand what it actually means)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194317339" name="194317339"><div>2020-04-16 15:00:27</div></a></div><div class="text"><p><span class="user-mention" data-user-id="276419">@felko</span> Do you need <em>both</em> <code>tagFrom</code> and <code>tagUnder</code>? What's the use case?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194317494" name="194317494"><div>2020-04-16 15:01:41</div></a></div><div class="text"><p>And what does your <code>tagFrom</code> sugar expand to (in terms of <code>Query</code> value)?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194317782" name="194317782"><div>2020-04-16 15:03:31</div></a></div><div class="text"><p>Here's an idea. We can eliminate <code>tagUnder</code>, and in its place use <code>tagFrom=journal/</code> (i.e., with a slash at the end).</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194317855" name="194317855"><div>2020-04-16 15:03:59</div></a></div><div class="text"><p>Need a better name than "tagFrom" still</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#194318081" name="194318081"><div>2020-04-16 15:05:11</div></a></div><div class="text"><p>I don't need both, <code>tagUnder</code> is enough for me, but most importantly I would really like globs. I can see how <code>tagFrom</code> could be useful though, but I don't think its worth implementing it.</p>
<blockquote>
<p>And what does your <code>tagFrom</code> sugar expand to (in terms of Query value)?</p>
</blockquote>
<p>Indeed <code>tagFrom</code>  doesn't reduce to a tag glob, but I can reuse the globbing mechanism to implement <code>isSubTag</code> and <code>isStrictSubTag</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194318296" name="194318296"><div>2020-04-16 15:06:18</div></a></div><div class="text"><p>Does tagUnder=math/calculus include only math/calculus/foo or also math/calculus/foo/bar?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#194318349" name="194318349"><div>2020-04-16 15:06:41</div></a></div><div class="text"><p>both</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194318447" name="194318447"><div>2020-04-16 15:07:17</div></a></div><div class="text"><p>So the entire sub-tree of tags</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#194318455" name="194318455"><div>2020-04-16 15:07:21</div></a></div><div class="text"><p>actually both tagFrom and tagUnder can be reduced to globs</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194318504" name="194318504"><div>2020-04-16 15:07:39</div></a></div><div class="text"><p>What does tagUnder=math/calculus map to in terms of glob or the Query type?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#194318720" name="194318720"><div>2020-04-16 15:09:11</div></a></div><div class="text"><p><code>tagFrom=math/calculus</code> --&gt; <code>tagGlob=math/calculus/**</code> (<code>**</code> can match nothing)<br>
<code>tagUnder=math/calculus</code> --&gt; <code>tagGlob=math/calculus/**/*</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194319034" name="194319034"><div>2020-04-16 15:11:02</div></a></div><div class="text"><p>What's the meaning of "<code>*</code>"? What does "<code>**</code>" mean?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194319120" name="194319120"><div>2020-04-16 15:11:39</div></a></div><div class="text"><p>I'm particulary confused by "<code>/**/*</code>"</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194319356" name="194319356"><div>2020-04-16 15:12:55</div></a></div><div class="text"><p>I thought "<code>**</code>" generally meant a recursive glob. So <code>/foo/**</code> should match both <code>/foo/bar/</code> and <code>/foo/bar/baz</code> (but not <code>/foo</code> because there is a slash before the <code>*</code>)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194319483" name="194319483"><div>2020-04-16 15:13:37</div></a></div><div class="text"><p>It looks to me like the main feature you need right now is: <code>foo/**</code> (with could be aliased to something like <code>tagUnder=foo</code>)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#194319861" name="194319861"><div>2020-04-16 15:15:53</div></a></div><div class="text"><p><code>*</code> will match a single tag component (like "math" or "calculus", but not "math/calculus")<br>
<code>**</code> will non-eagerly match as little tag components as possible<br>
I can make <code>**</code> match at least one component though,  I think that's less confusing too but that's the way python's recursive globs work, and it allows tagFrom to be interpreted as a glob</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194320550" name="194320550"><div>2020-04-16 15:19:57</div></a></div><div class="text"><p>In Haskell, it is a bit different:</p>
<div class="codehilite"><pre><span></span>* matches part of a path component, excluding any separators.
** as a path component matches an arbitrary number of path components.
</pre></div>


<p><a href="https://hackage.haskell.org/package/filepattern" title="https://hackage.haskell.org/package/filepattern">https://hackage.haskell.org/package/filepattern</a></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194320672" name="194320672"><div>2020-04-16 15:20:21</div></a></div><div class="text"><div class="codehilite"><pre><span></span>**/*.c matches all .c files anywhere on the filesystem, so file.c, dir/file.c,
dir1/dir2/file.c and /path/to/file.c all match, but file.h and dir/file.h don&#39;t.
</pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194320912" name="194320912"><div>2020-04-16 15:21:52</div></a></div><div class="text"><p>So: <code>math/*/**</code> is what you would do if you want to match <code>math/calculus</code> and <code>math/calculus/sub</code>.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194320984" name="194320984"><div>2020-04-16 15:22:05</div></a></div><div class="text"><p>If <code>math</code> should be matched as well in addition, one would do: <code>math/**</code>.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194321049" name="194321049"><div>2020-04-16 15:22:26</div></a></div><div class="text"><p>To me, that looks like a clearer interface.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194321142" name="194321142"><div>2020-04-16 15:23:00</div></a></div><div class="text"><p>And it allows a third posibility: if you want to match only the immediate sub tags: <code>math/*</code>.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194321439" name="194321439"><div>2020-04-16 15:24:40</div></a></div><div class="text"><p>Also, we could re-use the <code>tag</code> key for this. The parser would construct the appropriate type.</p>
<div class="codehilite"><pre><span></span>data Query = ByTag TagSpec
data TagSpec
  = LiteralMatch Text
  | TreeMatch SomeTypeForGlob
</pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194321595" name="194321595"><div>2020-04-16 15:25:32</div></a></div><div class="text"><p>So <code>tag=journal</code> will continue to work as before; but now users can do one of the following as well:</p>
<ul>
<li><code>tag=journal/*</code>: include journal/&lt;whatever&gt; (only one level)</li>
<li><code>tag=journal/*/**</code>: recursively include all under journal/</li>
<li><code>tag=journal/**</code>: recursively include all under journal/ including journal itself</li>
</ul></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194322195" name="194322195"><div>2020-04-16 15:28:24</div></a></div><div class="text"><p>And we may be able to re-use this function to implement the actual matching: <a href="https://hackage.haskell.org/package/filepattern-0.1.2/docs/System-FilePattern.html#v:match" title="https://hackage.haskell.org/package/filepattern-0.1.2/docs/System-FilePattern.html#v:match">https://hackage.haskell.org/package/filepattern-0.1.2/docs/System-FilePattern.html#v:match</a></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194322229" name="194322229"><div>2020-04-16 15:28:40</div></a></div><div class="text"><p>This way we use an existing semantics, instead of creating a new one (that users need to learn)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#194322319" name="194322319"><div>2020-04-16 15:29:18</div></a></div><div class="text"><p>just to give some context: in most clusters I don't need a complicated set of tags, so tagUnder/tagFrom are enough<br>
but in some cases, its preferable to have something more granular  by separating e.g. definitions from theorems or examples.<br>
What recursive globs would allow is to query all definitions at once, by doing <code>**/definition</code>, and if I just want definitions in calculus, i could do <code>math/calculus/**/definition</code> (here empty match on ** would be useful because some definitions are nested, and some aren't)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194322532" name="194322532"><div>2020-04-16 15:30:19</div></a></div><div class="text"><p>Sure. What do you think of the proposal above?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194322686" name="194322686"><div>2020-04-16 15:31:17</div></a></div><div class="text"><p>In the proposal, <code>math/calculus/**/definition</code> would be automatically supported if we use <code>System.FilePattern.match</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#194323152" name="194323152"><div>2020-04-16 15:34:07</div></a></div><div class="text"><p>I like it, I already implemented a (backtracking) globbing algorithm that matches this specification (not that complicated, its about 10 LOC), would you still rather like me to use System.FilePattern.match?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194323242" name="194323242"><div>2020-04-16 15:34:44</div></a></div><div class="text"><p>I have no strong preference. One thing we will need is a good number of cases to check against in the unit test.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#194323344" name="194323344"><div>2020-04-16 15:35:17</div></a></div><div class="text"><p>I already wrote a bunch (for both parsing and globbing), I can write more</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194323372" name="194323372"><div>2020-04-16 15:35:26</div></a></div><div class="text"><p>You can put them in this module I added yesterday: <a href="https://github.com/srid/neuron/blob/master/test/Neuron/Zettelkasten/QuerySpec.hs" title="https://github.com/srid/neuron/blob/master/test/Neuron/Zettelkasten/QuerySpec.hs">https://github.com/srid/neuron/blob/master/test/Neuron/Zettelkasten/QuerySpec.hs</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/neuron/blob/master/test/Neuron/Zettelkasten/QuerySpec.hs" style="background-image: url(https://avatars2.githubusercontent.com/u/3998?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/neuron/blob/master/test/Neuron/Zettelkasten/QuerySpec.hs" title="srid/neuron">srid/neuron</a></div><div class="message_embed_description">Haskell meets Zettelkasten, for your plain-text delight. - srid/neuron</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#194323955" name="194323955"><div>2020-04-16 15:39:09</div></a></div><div class="text"><p>Here's what I wrote so far, if you have any suggestion: <a href="https://github.com/felko/neuron/blob/hierarchical-tags/test/Neuron/Zettelkasten/TagSpec.hs" title="https://github.com/felko/neuron/blob/hierarchical-tags/test/Neuron/Zettelkasten/TagSpec.hs">https://github.com/felko/neuron/blob/hierarchical-tags/test/Neuron/Zettelkasten/TagSpec.hs</a><br>
(or comments about the interface)<br>
I'll need to change the <code>it "fails to match end of tag"</code> test</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/felko/neuron/blob/hierarchical-tags/test/Neuron/Zettelkasten/TagSpec.hs" style="background-image: url(https://avatars1.githubusercontent.com/u/9366592?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/felko/neuron/blob/hierarchical-tags/test/Neuron/Zettelkasten/TagSpec.hs" title="felko/neuron">felko/neuron</a></div><div class="message_embed_description">Haskell meets Zettelkasten, for your plain-text delight. - felko/neuron</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194324235" name="194324235"><div>2020-04-16 15:41:24</div></a></div><div class="text"><div class="codehilite"><pre><span></span>newtype Tag = Tag
  {tagComponents :: NonEmpty Text}
</pre></div>


<p>Is this to represent that exact tag (without patterns)?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#194324389" name="194324389"><div>2020-04-16 15:42:08</div></a></div><div class="text"><p>yes, I initially went for a messy GADT to store exact tags and tag patterns in the same type but it was a bit overkill</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194324675" name="194324675"><div>2020-04-16 15:43:58</div></a></div><div class="text"><div class="codehilite"><pre><span></span>      it &quot;cannot contain stars&quot; $ do
        shouldNotParse $ Z.parseTag &quot;algorithms/a*&quot;
</pre></div>


<p>May be not necessary to be done in your PR, but we could eventually accept this pattern as well (<code>filepatterns</code> library will make this possible). Telling the user that the "<code>*</code>" semantics is same as file system matching as used by the <code>filepatterns</code> library should be easier than giving a custom explanation (with a list of restrictions like this).</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#194325210" name="194325210"><div>2020-04-16 15:47:15</div></a></div><div class="text"><p>if we didn't take into account the custom explanation, I think it would be better to restrict this because it would allow pretty weird globs (unix globbing also supports the <code>?</code> wildcard which matches a single char)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194325216" name="194325216"><div>2020-04-16 15:47:19</div></a></div><div class="text"><p>About the <code>context "tag pattern"</code>, I think it would be simpler if you wrote the cases like this:</p>
<div class="codehilite"><pre><span></span><span class="kr">let</span> <span class="n">cases</span> <span class="ow">=</span>
    <span class="p">[</span> <span class="p">(</span><span class="s">&quot;course/*/note&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;course/foo/note&quot;</span><span class="p">,</span> <span class="s">&quot;course/bar/note&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s">&quot;course/foo/bar/note&quot;</span><span class="p">]</span> <span class="p">)</span>
    <span class="p">]</span>
</pre></div>


<p>i.e., a list of <code>(search text, shouldMatch list, shouldNotMatch list)</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#194325420" name="194325420"><div>2020-04-16 15:48:26</div></a></div><div class="text"><p>good idea, thanks</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194325554" name="194325554"><div>2020-04-16 15:49:28</div></a></div><div class="text"><p>Actually add one more item to that tuple, to indicate the reason that you can put in <code>it</code>.  kind of how it happens here <a href="https://github.com/felko/neuron/blob/hierarchical-tags/test/Neuron/Zettelkasten/Link/ActionSpec.hs#L26-L66" title="https://github.com/felko/neuron/blob/hierarchical-tags/test/Neuron/Zettelkasten/Link/ActionSpec.hs#L26-L66">https://github.com/felko/neuron/blob/hierarchical-tags/test/Neuron/Zettelkasten/Link/ActionSpec.hs#L26-L66</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/felko/neuron/blob/hierarchical-tags/test/Neuron/Zettelkasten/Link/ActionSpec.hs#L26-L66" style="background-image: url(https://avatars1.githubusercontent.com/u/9366592?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/felko/neuron/blob/hierarchical-tags/test/Neuron/Zettelkasten/Link/ActionSpec.hs#L26-L66" title="felko/neuron">felko/neuron</a></div><div class="message_embed_description">Haskell meets Zettelkasten, for your plain-text delight. - felko/neuron</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#194325605" name="194325605"><div>2020-04-16 15:49:54</div></a></div><div class="text"><p>wait <code>filepattern</code> doesn't seem to handle anything besides <code>*</code> and <code>**</code>, so that might not be a problem</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194325727" name="194325727"><div>2020-04-16 15:50:30</div></a></div><div class="text"><p>Yea, give it a try in a timebox maybe. You may be able to simplify a lot of what's in Tag.hs</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194325804" name="194325804"><div>2020-04-16 15:50:59</div></a></div><div class="text"><p>Less code is always better :-)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#194326804" name="194326804"><div>2020-04-16 15:56:56</div></a></div><div class="text"><p>I'm just a bit uncomfortable with the fact that files have a more general format than hierarchical tags, however:</p>
<blockquote>
<p>All matching is O(n)</p>
</blockquote>
<p>this may convince me to use <code>filepatterns</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194326889" name="194326889"><div>2020-04-16 15:57:31</div></a></div><div class="text"><p>More general format?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#194327365" name="194327365"><div>2020-04-16 16:00:14</div></a></div><div class="text"><p>I meant filepaths (and file patterns), because they can contain more characters, wildcards can be placed anywhere in a component, and they can have file extensions (maybe the extensions don't change anything about the globbing algorithm actually, I'm not sure)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194327783" name="194327783"><div>2020-04-16 16:03:03</div></a></div><div class="text"><p>If we generate a .html page for each tags, wouldn't it basically be like the filepaths, i.e., <code>tags/math/calculus.html</code>, <code>tags/math/calculus/foo/definitions.html</code>, <code>tags/math.html</code>, etc.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194327989" name="194327989"><div>2020-04-16 16:04:26</div></a></div><div class="text"><p>(which by the way is an interesting idea to consider for really large zettelkastens; to generate individual tag index pages).</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#194329050" name="194329050"><div>2020-04-16 16:11:29</div></a></div><div class="text"><p>what would you put inside those tag indices? If they would list zettels with that tag then I'm not sure to understand the purpose, since the web search can already do that. However I think it would be interesting to let the user say "redirect to this zettel instead of running the web search when clicking on that specific tag"</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194330184" name="194330184"><div>2020-04-16 16:19:41</div></a></div><div class="text"><p>A tag index could be a z-index corresponding to the, hmm, "sub zettelkasten"? With its own tree view, clusters, etc.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194330393" name="194330393"><div>2020-04-16 16:21:07</div></a></div><div class="text"><blockquote>
<p>"redirect to this zettel instead of running the web search when clicking on that specific tag"</p>
</blockquote>
<p>If you are referring to portal zettels, then a tag z-index should display it prominently in the category tree. So it will be two clicks to get there. Anyway, this is a distant idea.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#194330596" name="194330596"><div>2020-04-16 16:22:09</div></a></div><div class="text"><blockquote>
<p>With its own tree view, clusters, etc.</p>
</blockquote>
<p>ok then it's a great idea i think</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#194330787" name="194330787"><div>2020-04-16 16:23:19</div></a></div><div class="text"><p>anyway i'll try to make hierarchical tags first, with filepatterns</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#194449123" name="194449123"><div>2020-04-17 14:33:50</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="251311">Sridhar Ratnakumar</span> <a href="#narrow/stream/231929-Neuron/topic/Hierarchical.20tags/near/194321439" title="#narrow/stream/231929-Neuron/topic/Hierarchical.20tags/near/194321439">said</a>:</p>
<blockquote>
<p>Also, we could re-use the <code>tag</code> key for this. The parser would construct the appropriate type.</p>
<div class="codehilite"><pre><span></span>data Query = ByTag TagSpec
data TagSpec
  = LiteralMatch Text
  | TreeMatch SomeTypeForGlob
</pre></div>


</blockquote>
<p>Is this really needed? A literal match is also a glob without wildcards</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194453071" name="194453071"><div>2020-04-17 14:58:42</div></a></div><div class="text"><p>Good point</p></div></div></div><div class="comment"><a class="avatar"><img src="https://secure.gravatar.com/avatar/39430c3a1d5705ad377af9607e67d98c?d=identicon&amp;version=1"></a><div class="content"><a class="author">felko</a><div class="metadata"><a href="#194453462" name="194453462"><div>2020-04-17 15:01:01</div></a></div><div class="text"><p>Also, <code>neuron query --list-tags</code> could output the tags in a tree, if someday in zettel-mode I want to implement a 'select tag' feature, instead of showing all existing tags like <code>math/calculus</code> and <code>math/topology</code>, group them in pseudo directories a la <code>counsel-find-file</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?x=x&amp;version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#194463333" name="194463333"><div>2020-04-17 16:05:57</div></a></div><div class="text"><p>By the way, there is also <code>+ivy/projectile-find-file</code> which allows you to fuzzy match anywhere on the path. So you can type "calc" and directly get to "math/calculus" without typing "math" first.</p></div></div></div></div></div><div class="ui vertical footer segment"><a href="https://github.com/srid/zulip-archive">Powered by Haskell</a></div></div></body></html>