<html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="I&#39;m trying to setup automatic building of neuron web on Gitlab, though approach taken in github template seems to use Github API for receiving neuron binary, which requires token for access - is there some &quot;public&quot; way of receiving &quot;neuron bundle&quot;?" name="description"><link href="https://funprog.srid.ca/neuron/gitlab-pages.html" rel="canonical"><meta property="og:title" content="Gitlab Pages - Neuron"><meta property="og:site_name" content="Functional Programming Zulip Archive"><meta property="og:type" content="article"><meta property="og:article:section" content="Neuron"><meta property="og:article:modified_time" content="2020-09-04T08:26:26Z"><meta property="og:article:published_time" content="2020-07-16T19:40:01Z"><meta property="og:image" content="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"><title>Gitlab Pages - Neuron</title><style type="text/css">
div#thesite
{
  font-family   : "Open Sans", sans-serif;
  font-size     : 1em !important;
  margin-top    : 1em;
  margin-bottom : 1em;
}

div#thesite h1
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h2
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h3
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h4
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h5
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h6
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .ui.breadcrumb.rib .section
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .as-header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite code, pre, tt
{
  font-family : "SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace;
}

div#thesite .ui.breadcrumb.rib
{
  margin-bottom : 1em;
}



div#thesite .ui.comments.messages .comment .metadata a
{
  color : #808080;
}

div#thesite .ui.comments.messages .comment a.avatar img
{
  height : auto;
}

div#thesite .subtle
{
  color : #808080;
}


div#thesite .messages pre
{
  font-size : 85%;
  overflow  : auto;
  max-width : 100%;
}

div#thesite .messages .message_embed
{
  border-left  : solid 3px #808080;
  padding-left : 0.69999em;
}

div#thesite .messages .message_inline_image img
{
  max-width     : 100%;
  margin-bottom : 1em;
}


/* Generated with Clay, http://fvisser.nl/clay */</style><link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Open+Sans|Oswald&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto|Open+Sans&amp;display=swap" rel="stylesheet"></head><body><div id="thesite" class="ui text container"><div class="ui violet inverted top attached center aligned segment"><h1 class="ui huge header">Gitlab Pages - Neuron</h1></div><div class="ui attached segment"><div class="ui message"><p>Welcome to the Functional Programming Zulip Chat Archive. You can join the chat <a href="https://funprog.zulipchat.com">here</a>.</p></div><div class="ui breadcrumb rib"><a href="/" class="section">Home</a><i class="right angle icon divider"></i><a href="/neuron/" class="section">#Neuron</a><i class="right angle icon divider"></i><div class="active section">Gitlab Pages</div></div><div class="ui comments messages"><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#204132793" name="204132793"><div>2020-07-16 19:40:01</div></a></div><div class="text"><p>I'm trying to setup automatic building of neuron web on Gitlab, though approach taken in github template seems to use Github API for receiving neuron binary, which requires token for access - is there some "public" way of receiving "neuron bundle"?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#204138908" name="204138908"><div>2020-07-16 20:32:29</div></a></div><div class="text"><p><a href="https://github.com/srid/neuron/issues/292">https://github.com/srid/neuron/issues/292</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/neuron/issues/292" style="background-image: url(https://avatars2.githubusercontent.com/u/3998?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/neuron/issues/292" title="Add binary artifacts to releases · Issue #292 · srid/neuron">Add binary artifacts to releases · Issue #292 · srid/neuron</a></div><div class="message_embed_description">I would like download linux bundles of neuron in CI outside of Github (https://funprog.zulipchat.com/#narrow/stream/231929-Neuron/topic/Gitlab.20Pages/near/204132793), but Github API seems to requi...</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204139737" name="204139737"><div>2020-07-16 20:39:58</div></a></div><div class="text"><p>Responded. <span class="user-mention" data-user-id="225127">@TheMatten</span> as a quick workaround meanwhile I suppose you can just commit the bundle executable to your repo, and update it once in a while.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#204198096" name="204198096"><div>2020-07-17 12:10:04</div></a></div><div class="text"><p><a href="https://github.com/srid/neuron/pull/293">https://github.com/srid/neuron/pull/293</a></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#204304239" name="204304239"><div>2020-07-18 15:15:22</div></a></div><div class="text"><p>Merged - <span class="user-mention" data-user-id="251311">@Sridhar Ratnakumar</span> thanks!</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#204352329" name="204352329"><div>2020-07-19 14:13:16</div></a></div><div class="text"><p>Hmm, I'm having some problems with input and output directories to <code>neuron</code>:<br>
First, <code>neuron rib</code> doesn't seem to like relative paths in <code>-o</code> - it doesn't seem to output anything at all when given one, even though it lists built files as usually<br>
Second, while trying to <a href="https://gitlab.com/thematten/neuron-template/-/jobs/645671148">build page on GitLab</a>, it fails to find directory given through <code>-d</code> even though I <em>literally list it's content</em> before running <code>neuron</code></p>
<p>Not sure whether I'm missing something or whether this is a bug</p>
<div class="message_embed"><a class="message_embed_image" href="https://gitlab.com/thematten/neuron-template/-/jobs/645671148" style="background-image: url(https://assets.gitlab-static.net/assets/gitlab_logo-7ae504fe4f68fdebb3c2034e36621930cd36ea87924c11ff65dbcb8ed50dca58.png)"></a><div class="data-container"><div class="message_embed_title"><a href="https://gitlab.com/thematten/neuron-template/-/jobs/645671148" title="pages (#645671148) · Jobs · TheMatten / Neuron Template">pages (#645671148) · Jobs · TheMatten / Neuron Template</a></div><div class="message_embed_description">A template to get started with neuron (modified from https://github.com/srid/neuron-template)</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204358133" name="204358133"><div>2020-07-19 16:14:15</div></a></div><div class="text"><p><span class="user-mention" data-user-id="225127">@TheMatten</span> What's the full neuron CLI ?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204358138" name="204358138"><div>2020-07-19 16:14:35</div></a></div><div class="text"><p><code>-d</code> should appear <em>before</em> any subcommand. I can't find the CLI you used from the link above.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#204358477" name="204358477"><div>2020-07-19 16:22:22</div></a></div><div class="text"><p>See commit on the right side - I use it that way</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204358621" name="204358621"><div>2020-07-19 16:26:44</div></a></div><div class="text"><p><span class="user-mention" data-user-id="225127">@TheMatten</span> Try <code>set -x</code> so it spits out the <em>actual</em> command.</p>
<p>Your gitlab yml has:</p>
<blockquote>
<p>./neuron -d $CI_PROJECT_DIR rib -o $CI_PROJECT_DIR/public</p>
</blockquote>
<p>I can't tell what those env vars contain (or if they are empty)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204358633" name="204358633"><div>2020-07-19 16:27:22</div></a></div><div class="text"><p>And yea, you need absolute path. That's the limitation of using nix-bundle</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204358703" name="204358703"><div>2020-07-19 16:29:05</div></a></div><div class="text"><blockquote>
<p>Second, while trying to build page on GitLab, it fails to find directory given through -d even though I literally list it's content before running neuron</p>
</blockquote>
<p>Ah, I missed this</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204358715" name="204358715"><div>2020-07-19 16:29:42</div></a></div><div class="text"><p>something to do with nix-bundle not playing well with mounted directories? i see you are using docker</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204358728" name="204358728"><div>2020-07-19 16:30:01</div></a></div><div class="text"><p>can you do away with not using docker? the bundle should run on linux 64-bit</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204358785" name="204358785"><div>2020-07-19 16:30:57</div></a></div><div class="text"><p>potential workaround if you can't find a good fix: <code>cp -r $CI_PROJECT_DIR proj; neuron -d $(pwd)/proj rib ...</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#204360439" name="204360439"><div>2020-07-19 17:07:20</div></a></div><div class="text"><p><span class="user-mention" data-user-id="251311">@Sridhar Ratnakumar</span> I'm not sure whether I can use non-Docker configuration on hosted CI - is there some specific reason why <code>nix-bundle</code> shouldn't play well with it?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#204360490" name="204360490"><div>2020-07-19 17:08:29</div></a></div><div class="text"><p>BTW, <code>$CI_PROJECT_DIR</code> points to working directory of cloned repo</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204360499" name="204360499"><div>2020-07-19 17:08:46</div></a></div><div class="text"><p>no idea; something to do with chroot? <a href="https://github.com/matthewbauer/nix-bundle/issues/56">https://github.com/matthewbauer/nix-bundle/issues/56</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/matthewbauer/nix-bundle/issues/56" style="background-image: url(https://avatars0.githubusercontent.com/u/19036?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/matthewbauer/nix-bundle/issues/56" title="nix-user-chroot Error · Issue #56 · matthewbauer/nix-bundle">nix-user-chroot Error · Issue #56 · matthewbauer/nix-bundle</a></div><div class="message_embed_description">Hi, I would like to package a Nix app (seth) to a non-NixOs docker image (i.e alpine) with nix-bundle.sh. Here&#39;s my Dockerfile: FROM nixos/nix as buildSeth RUN adduser -D sethservice &amp;&amp;...</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#204367470" name="204367470"><div>2020-07-19 19:31:05</div></a></div><div class="text"><p>Hmm, maybe<br>
I've tried running <code>alpine:latest</code> image locally (Arch Linux host) and I'm getting this, even after doing what it says and checking that setting:</p>
<div class="codehilite"><pre><span></span><code>~ # ./neuron -d . rib -o output
Run the following to enable unprivileged namespace use:
sudo bash -c &quot;sysctl -w kernel.unprivileged_userns_clone=1 ; echo kernel.unprivileged_userns_clone=1 &gt; /etc/sysctl.d/nix-user-chroot.conf&quot;
</code></pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204369012" name="204369012"><div>2020-07-19 20:12:43</div></a></div><div class="text"><p>If nothing works, then you might as well <code>nix-env -i ...</code> it directly (after having done 'cachix use srid'). Should take no more than 2mins.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204369019" name="204369019"><div>2020-07-19 20:13:09</div></a></div><div class="text"><p>Or, we push docker image in neuron CI (see <code>docker.nix</code> in neuron repo)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#204369388" name="204369388"><div>2020-07-19 20:25:56</div></a></div><div class="text"><div class="codehilite"><pre><span></span><code>&gt; nix-build docker.nix --show-trace
error: while evaluating the attribute &#39;buildCommand&#39; of the derivation &#39;docker-image-neuron.tar.gz&#39; at /nix/store/km5w6fszy4bcs9q13mr3biabirshrrgw-nixpkgs-20.09pre226024.873e114cf49/nixpkgs/pkgs/build-support/trivial-builders.nix:7:7:
while evaluating the attribute &#39;contents&#39; of the derivation &#39;docker-layer-neuron&#39; at /nix/store/km5w6fszy4bcs9q13mr3biabirshrrgw-nixpkgs-20.09pre226024.873e114cf49/nixpkgs/pkgs/build-support/trivial-builders.nix:7:7:
cannot coerce a function to a string, at /nix/store/km5w6fszy4bcs9q13mr3biabirshrrgw-nixpkgs-20.09pre226024.873e114cf49/nixpkgs/pkgs/build-support/trivial-builders.nix:7:7
</code></pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204371484" name="204371484"><div>2020-07-19 21:26:31</div></a></div><div class="text"><p>let me update it</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204371497" name="204371497"><div>2020-07-19 21:27:17</div></a></div><div class="text"><p><span class="user-mention" data-user-id="225127">@TheMatten</span> fixed</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204371549" name="204371549"><div>2020-07-19 21:28:03</div></a></div><div class="text"><p>would be nice to have CI automatically build and push this to <a href="https://hub.docker.com/r/sridca/neuron">https://hub.docker.com/r/sridca/neuron</a></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204371694" name="204371694"><div>2020-07-19 21:32:10</div></a></div><div class="text"><p>I jush did a one-off push to the hub</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204371967" name="204371967"><div>2020-07-19 21:41:09</div></a></div><div class="text"><p>docker hub says image size is "80.75 MB" which is curious</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204372088" name="204372088"><div>2020-07-19 21:44:55</div></a></div><div class="text"><p><a href="/user_uploads/13896/zv804928yso-uHnu_-MHDQhi/Screen-Shot-2020-07-19-at-5.44.22-PM.png">Screen-Shot-2020-07-19-at-5.44.22-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/13896/zv804928yso-uHnu_-MHDQhi/Screen-Shot-2020-07-19-at-5.44.22-PM.png" title="Screen-Shot-2020-07-19-at-5.44.22-PM.png"><img src="/user_uploads/13896/zv804928yso-uHnu_-MHDQhi/Screen-Shot-2020-07-19-at-5.44.22-PM.png"></a></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204372097" name="204372097"><div>2020-07-19 21:45:02</div></a></div><div class="text"><p>Not bad at all ... 80mb download on mac, and it just works</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204372220" name="204372220"><div>2020-07-19 21:49:08</div></a></div><div class="text"><div class="codehilite"><pre><span></span><code>docker run --rm -i -p 8080:8080 -v ~/zettelkasten:/zettelkasten sridca/neuron:test neuron rib -ws 0.0.0.0:8080
</code></pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204372434" name="204372434"><div>2020-07-19 21:54:20</div></a></div><div class="text"><p><span class="user-mention silent" data-user-id="251311">Sridhar Ratnakumar</span> <a href="#narrow/stream/231929-Neuron/topic/Gitlab.20Pages/near/204371549">said</a>:</p>
<blockquote>
<p>would be nice to have CI automatically build and push this to <a href="https://hub.docker.com/r/sridca/neuron">https://hub.docker.com/r/sridca/neuron</a></p>
</blockquote>
<p><a href="https://github.com/srid/neuron/issues/146">https://github.com/srid/neuron/issues/146</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/neuron/issues/146" style="background-image: url(https://avatars2.githubusercontent.com/u/3998?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/neuron/issues/146" title="Publish docker image in CI · Issue #146 · srid/neuron">Publish docker image in CI · Issue #146 · srid/neuron</a></div><div class="message_embed_description">CI should automatically publish the docker image from the project root&#39;s docker.nix. In effect, run these commands in CI: docker load -i $(nix-build docker.nix) docker login ... docker push sri...</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#204398753" name="204398753"><div>2020-07-20 08:47:30</div></a></div><div class="text"><p><img alt=":partydrizaw:" class="emoji" src="https://zulip-avatars.s3.amazonaws.com/13896/emoji/images/14115.gif" title="partydrizaw"> <img alt=":parrot:" class="emoji" src="https://zulip-avatars.s3.amazonaws.com/13896/emoji/images/17415.gif" title="parrot"> <a href="https://thematten.gitlab.io/neuron-template">https://thematten.gitlab.io/neuron-template</a> <img alt=":parrot:" class="emoji" src="https://zulip-avatars.s3.amazonaws.com/13896/emoji/images/17415.gif" title="parrot"> <img alt=":partywizard:" class="emoji" src="https://zulip-avatars.s3.amazonaws.com/13896/emoji/images/14113.gif" title="partywizard"></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#204398816" name="204398816"><div>2020-07-20 08:48:03</div></a></div><div class="text"><p>I ended up making custom docker image with <code>bash_5</code> and <code>coreutils</code>, but it works now perfectly!</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204402496" name="204402496"><div>2020-07-20 09:32:04</div></a></div><div class="text"><p>Nice. How long does it take for the CI to run?</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#204404228" name="204404228"><div>2020-07-20 09:54:30</div></a></div><div class="text"><p>Haha, it's actually around 25 seconds, so I didn't even have to change the number in FAQ <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#204405303" name="204405303"><div>2020-07-20 10:09:39</div></a></div><div class="text"><p>I think GitLab Pages template should now be ready for use: <a href="https://gitlab.com/thematten/neuron-template">https://gitlab.com/thematten/neuron-template</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://gitlab.com/thematten/neuron-template" style="background-image: url(https://assets.gitlab-static.net/assets/gitlab_logo-7ae504fe4f68fdebb3c2034e36621930cd36ea87924c11ff65dbcb8ed50dca58.png)"></a><div class="data-container"><div class="message_embed_title"><a href="https://gitlab.com/thematten/neuron-template" title="Projects · TheMatten / Neuron Template">Projects · TheMatten / Neuron Template</a></div><div class="message_embed_description">A template to get started with neuron (modified from https://github.com/srid/neuron-template)</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#204406152" name="204406152"><div>2020-07-20 10:22:23</div></a></div><div class="text"><p>I've created <a href="https://github.com/srid/neuron/pull/298">PR</a> to include it in docs in case you're interested</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/neuron/pull/298" style="background-image: url(https://avatars2.githubusercontent.com/u/3998?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/neuron/pull/298" title="Update &quot;Automatic Publishing&quot; to include GL Pages by TheMatten · Pull Request #298 · srid/neuron">Update "Automatic Publishing" to include GL Pages by TheMatten · Pull Request #298 · srid/neuron</a></div><div class="message_embed_description">Links to modified version of neuron-template that works with GitLab Pages.</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#204408808" name="204408808"><div>2020-07-20 10:58:53</div></a></div><div class="text"><p><a href="https://github.com/srid/neuron/pull/299">another PR</a> to make (possibly automated) custom <code>docker.nix</code> builds easier<br>
<code>bash_5</code> and <code>coreutils</code> seem to add some size, maybe they could be replaced with something like <code>busybox</code>?</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/neuron/pull/299" style="background-image: url(https://avatars2.githubusercontent.com/u/3998?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/neuron/pull/299" title="Make `docker.nix` configurable, add option to include shell by TheMatten · Pull Request #299 · srid/neuron">Make `docker.nix` configurable, add option to include shell by TheMatten · Pull Request #299 · srid/neuron</a></div><div class="message_embed_description">This makes it more convenient to build custom images (possibly with shell included) using --arg flags in nix-build.

 investigate possibility of lowering shell footprint</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#204411183" name="204411183"><div>2020-07-20 11:30:58</div></a></div><div class="text"><p>Great, will take look!</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#209018001" name="209018001"><div>2020-09-03 19:28:17</div></a></div><div class="text"><p>Does gitlab support gitlab-pages on private repositories for free accounts? (github does not)</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=2"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#209031861" name="209031861"><div>2020-09-03 21:29:08</div></a></div><div class="text"><blockquote>
<p>We are updating the CI/CD minutes limit in the Free tier to 400 minutes per group per month</p>
</blockquote>
<p>oh</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/20a04d823b7c3891d78ca5f6a188ccd0e4fc5e3d?version=2"></a><div class="content"><a class="author">TheMatten</a><div class="metadata"><a href="#209067225" name="209067225"><div>2020-09-04 08:26:26</div></a></div><div class="text"><p>See <a href="https://about.gitlab.com/pricing/">https://about.gitlab.com/pricing/</a> &gt; "Are GitLab Pages included in the free plan?":</p>
<blockquote>
<p>Absolutely, GitLab Pages will remain free for everyone.</p>
</blockquote>
<div class="message_embed"><a class="message_embed_image" href="https://about.gitlab.com/pricing/" style="background-image: url(https://about.gitlab.com/images/blogimages/gitlab-blog-cover.png)"></a><div class="data-container"><div class="message_embed_title"><a href="https://about.gitlab.com/pricing/" title="GitLab Pricing">GitLab Pricing</a></div><div class="message_embed_description">See the options to self-host GitLab or use GitLab.com.</div></div></div></div></div></div></div></div><div class="ui vertical footer segment"><a href="https://github.com/srid/zulip-archive">Powered by Haskell</a> | Questions? Contact <a href="https://www.srid.ca">srid</a></div></div></body></html>