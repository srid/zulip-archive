<html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="Project using purescript-gjs:

autochill, a gnome extension to help you chill by setting up breath time.

https://github.com/purescript-gjs/purescript-gjs
purescript-gjs/purescript-gjsContribute to purescript-gjs/purescript-gjs development by creating an account on GitHub." name="description"><link href="https://funprog.srid.ca/purescript/writing-gnome-extensions.html" rel="canonical"><meta property="og:title" content="Writing GNOME extensions - PureScript"><meta property="og:site_name" content="Functional Programming Zulip Archive"><meta property="og:type" content="article"><meta property="og:article:section" content="PureScript"><meta property="og:article:modified_time" content="2021-05-19T22:24:10Z"><meta property="og:article:published_time" content="2021-05-14T18:41:01Z"><meta property="og:image" content="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=3"><title>Writing GNOME extensions - PureScript</title><style type="text/css">
div#thesite
{
  font-family   : "Open Sans", sans-serif;
  font-size     : 1em !important;
  margin-top    : 1em;
  margin-bottom : 1em;
}

div#thesite h1
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h2
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h3
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h4
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h5
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite h6
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .ui.breadcrumb.rib .section
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite .as-header
{
  font-family : "Roboto", sans-serif;
  line-height : 1.19999em;
}

div#thesite code, pre, tt
{
  font-family : "SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace;
}

div#thesite .ui.breadcrumb.rib
{
  margin-bottom : 1em;
}



div#thesite .ui.comments.messages .comment .metadata a
{
  color : #808080;
}

div#thesite .ui.comments.messages .comment a.avatar img
{
  height : auto;
}

div#thesite .subtle
{
  color : #808080;
}


div#thesite .messages pre
{
  font-size : 85%;
  overflow  : auto;
  max-width : 100%;
}

div#thesite .messages .message_embed
{
  border-left  : solid 3px #808080;
  padding-left : 0.69999em;
}

div#thesite .messages .message_inline_image img
{
  max-width     : 100%;
  margin-bottom : 1em;
}


/* Generated with Clay, http://fvisser.nl/clay */</style><link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Open+Sans|Oswald&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto|Open+Sans&amp;display=swap" rel="stylesheet"></head><body><div id="thesite" class="ui text container"><div class="ui violet inverted top attached center aligned segment"><h1 class="ui huge header">Writing GNOME extensions - PureScript</h1></div><div class="ui attached segment"><div class="ui message"><p>Welcome to the Functional Programming Zulip Chat Archive. You can join the chat <a href="https://funprog.zulipchat.com">here</a>.</p></div><div class="ui breadcrumb rib"><a href="/" class="section">Home</a><i class="right angle icon divider"></i><a href="/purescript/" class="section">#PureScript</a><i class="right angle icon divider"></i><div class="active section">Writing GNOME extensions</div></div><div class="ui comments messages"><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=3"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#238811382" name="238811382"><div>2021-05-14 18:41:01</div></a></div><div class="text"><div class="codehilite"><pre><span></span><code>Project using purescript-gjs:

autochill, a gnome extension to help you chill by setting up breath time.
</code></pre></div>
<p><a href="https://github.com/purescript-gjs/purescript-gjs">https://github.com/purescript-gjs/purescript-gjs</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/purescript-gjs/purescript-gjs" style="background-image: url(https://opengraph.githubassets.com/1ae39314a21ac30b1f8038f99c2e20a5222261e97339944b96a7c160bb8d4dde/purescript-gjs/purescript-gjs)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/purescript-gjs/purescript-gjs" title="purescript-gjs/purescript-gjs">purescript-gjs/purescript-gjs</a></div><div class="message_embed_description">Contribute to purescript-gjs/purescript-gjs development by creating an account on GitHub.</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/24b62e7b62bbbc0f4f0617b5ccd66e6f8fe784f6?version=2"></a><div class="content"><a class="author">tristanC</a><div class="metadata"><a href="#239441315" name="239441315"><div>2021-05-19 15:09:01</div></a></div><div class="text"><p>Happy to talk about purescript-gjs here too. I think the GNOME extensions bit should be moved to a separate repository since it is not available with pure gjs runtime.</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=3"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#239491560" name="239491560"><div>2021-05-19 20:33:59</div></a></div><div class="text"><p>I avoided writing GNOME extensions just to stay away from having to write JS/TS. <span class="user-mention" data-user-id="282115">@tristanC</span> Would be great to have a template repo that makes it easy to get started. i.e., open in VSCode with nix-env-selector and have everything ready to go including PureScript language server (all setup via nix).</p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/4429aa8b689608f24a4ad712843ce29862e330d2?version=3"></a><div class="content"><a class="author">Sridhar Ratnakumar</a><div class="metadata"><a href="#239491685" name="239491685"><div>2021-05-19 20:34:37</div></a></div><div class="text"><p>Sort of like <a href="https://github.com/srid/rust-nix-template">https://github.com/srid/rust-nix-template</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/srid/rust-nix-template" style="background-image: url(https://opengraph.githubassets.com/5b0ea89a262adbf5128b255e1b414ef3ee5de943a06f2f254ecf3b43c278bac9/srid/rust-nix-template)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/srid/rust-nix-template" title="srid/rust-nix-template">srid/rust-nix-template</a></div><div class="message_embed_description">Rust project template with Nix (Flakes) and VSCode support - srid/rust-nix-template</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/24b62e7b62bbbc0f4f0617b5ccd66e6f8fe784f6?version=2"></a><div class="content"><a class="author">tristanC</a><div class="metadata"><a href="#239492149" name="239492149"><div>2021-05-19 20:38:02</div></a></div><div class="text"><p>I'll populate <a href="https://github.com/purescript-gjs/purescript-gnome-shell">https://github.com/purescript-gjs/purescript-gnome-shell</a> shortly with instructions to get started</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/purescript-gjs/purescript-gnome-shell" style="background-image: url(https://opengraph.githubassets.com/88db71bc26cc7494c123f1939ff5c7889f87ac002a948b74cb1f90ebd09ba08f/purescript-gjs/purescript-gnome-shell)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/purescript-gjs/purescript-gnome-shell" title="purescript-gjs/purescript-gnome-shell">purescript-gjs/purescript-gnome-shell</a></div><div class="message_embed_description">PureScript bindings for writting gnome-shell extension - purescript-gjs/purescript-gnome-shell</div></div></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/24b62e7b62bbbc0f4f0617b5ccd66e6f8fe784f6?version=2"></a><div class="content"><a class="author">tristanC</a><div class="metadata"><a href="#239492792" name="239492792"><div>2021-05-19 20:43:34</div></a></div><div class="text"><p>It seems like we could provide such helper:</p>
<div class="codehilite" data-code-language="purescript"><pre><span></span><code>type Extension env = {
  init :: env -&gt; Effect Unit,
  enable :: env -&gt; Effect Unit,
  disable :: env -&gt; Effect Unit
}
</code></pre></div></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/24b62e7b62bbbc0f4f0617b5ccd66e6f8fe784f6?version=2"></a><div class="content"><a class="author">tristanC</a><div class="metadata"><a href="#239493133" name="239493133"><div>2021-05-19 20:46:23</div></a></div><div class="text"><p>or something along those line. The thing is gnome-shell expect a javascript file i'm currently injecting like this:</p>
<div class="codehilite" data-code-language="JavaScript"><pre><span></span><code><span class="kd">const</span> <span class="nx">env</span> <span class="o">=</span> <span class="nx">PS</span><span class="p">[</span><span class="s2">"AutoChill"</span><span class="p">].</span><span class="nx">create</span><span class="p">();</span>
<span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span> <span class="nx">PS</span><span class="p">[</span><span class="s2">"AutoChill"</span><span class="p">].</span><span class="nx">init</span><span class="p">(</span><span class="nx">env</span><span class="p">)();</span> <span class="p">}</span>
<span class="kd">function</span> <span class="nx">enable</span><span class="p">()</span> <span class="p">{</span> <span class="nx">PS</span><span class="p">[</span><span class="s2">"AutoChill"</span><span class="p">].</span><span class="nx">enable</span><span class="p">(</span><span class="nx">env</span><span class="p">)();</span> <span class="p">}</span>
<span class="kd">function</span> <span class="nx">disable</span><span class="p">()</span> <span class="p">{</span> <span class="nx">PS</span><span class="p">[</span><span class="s2">"AutoChill"</span><span class="p">].</span><span class="nx">disable</span><span class="p">(</span><span class="nx">env</span><span class="p">)();</span> <span class="p">}</span>
</code></pre></div>
<p>but that's not good because the env needs to be created by the init function, so i'm actually using a <code>Ref (Maybe env)</code></p></div></div></div><div class="comment"><a class="avatar"><img src="https://zulip-avatars.s3.amazonaws.com/13896/24b62e7b62bbbc0f4f0617b5ccd66e6f8fe784f6?version=2"></a><div class="content"><a class="author">tristanC</a><div class="metadata"><a href="#239504387" name="239504387"><div>2021-05-19 22:24:10</div></a></div><div class="text"><p>Here is the bootstrap using some dhall template: <a href="https://github.com/purescript-gjs/purescript-gnome-shell/tree/main/demo">https://github.com/purescript-gjs/purescript-gnome-shell/tree/main/demo</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/purescript-gjs/purescript-gnome-shell/tree/main/demo" style="background-image: url(https://opengraph.githubassets.com/6978a2075d387f4d1f89821ebfac56f61f1b9d2024add795ac52003da6ad457a/purescript-gjs/purescript-gnome-shell)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/purescript-gjs/purescript-gnome-shell/tree/main/demo" title="purescript-gjs/purescript-gnome-shell">purescript-gjs/purescript-gnome-shell</a></div><div class="message_embed_description">PureScript bindings for writting gnome-shell extension - purescript-gjs/purescript-gnome-shell</div></div></div></div></div></div></div></div><div class="ui vertical footer segment"><a href="https://github.com/srid/zulip-archive">Powered by Haskell</a> | Questions? Contact <a href="https://www.srid.ca">srid</a></div></div></body></html>